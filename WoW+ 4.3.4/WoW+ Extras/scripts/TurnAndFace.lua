-- TurnAndFace v1.0 by Jadd
-- Programmed for WoWPlus v1.1


---------------------------------------------------
--                   Variables                   --
---------------------------------------------------

-- Script settings
local Settings_Hotkey = VK_F12;

-- Event variables
local Event_FaceTarget = nil;

-- Script variables
local Script_Started = false;


---------------------------------------------------
--                    Startup                    --
---------------------------------------------------

function Load()
	-- Print script loaded
	Plus.PrintChat( "TurnAndFace v1.0 loaded!" );

	-- Initialize start/stop toggle hotkey
	Event.RegisterKeyCallback( OnToggleHotkey, Settings_Hotkey );
end

function Unload()
end



---------------------------------------------------
--                     Events                    --
---------------------------------------------------

function OnToggleHotkey( identifier, key )
	if Script_Started == true then
		Script_Started = false;
		
		-- Remove target facing timer
		Event.RemoveTimerCallback( Event_FaceTarget );
	else
		Script_Started = true;
		
		-- Initialize target facing timer
		Event_FaceTarget = Event.RegisterTimerCallback( FaceTarget, 5, true );
	end
end

function FaceTarget( identifier, interval )
	local Target = ObjectManager.GetCurrentTarget();
	if Target == nil then
		return;
	end
	
	X, Y = Target:GetLocation();
	Player.Face( X, Y );
end