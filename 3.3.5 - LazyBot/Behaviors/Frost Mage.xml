<?xml version="1.0"?>
<Behavior>
  <CombatDistance>34</CombatDistance>
  <PullDistance>34</PullDistance>
  <PrePullDistance>34</PrePullDistance>
  <UseAutoAttack>False</UseAutoAttack>
  <SendPet>True</SendPet>
  <GlobalCooldown>850</GlobalCooldown>
  <PrePullController>
    <Rule>
      <Name>Mana Gem (Conjure)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>0</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Conjure Mana Gem</Name>
      </Action>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>600000</Value>
      </TickerCondition>
    </Rule>
  </PrePullController>
  <PullController>
    <Rule>
      <Name>Frostfire bolt (Brain Freeze)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>0</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Frostfire Bolt</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>57761</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Deep Freeze (FoF)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>1</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Deep Freeze</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>44544</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>12494</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Frostbolt</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>2</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Frostbolt</Name>
      </Action>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>0</Value>
      </TickerCondition>
    </Rule>
  </PullController>
  <CombatController>
    <Rule>
      <Name>Lifeblood (Herb Heal)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>0</Priority>
      <Action>
        <Type>ActionKey</Type>
        <Name>Lifeblood</Name>
        <Bar>3</Bar>
        <Key>4</Key>
        <Special>None</Special>
        <Times>1</Times>
      </Action>
      <HealthPowerCondition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionType>Health</ConditionType>
        <Condition>LessThan</Condition>
        <Value>70</Value>
      </HealthPowerCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>120000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Ice Block (LH)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>1</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Block</Name>
      </Action>
      <HealthPowerCondition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionType>Mana</ConditionType>
        <Condition>LessThan</Condition>
        <Value>40</Value>
      </HealthPowerCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>240000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Mana Gem</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>2</Priority>
      <Action>
        <Type>ActionKey</Type>
        <Name>Mana Gem</Name>
        <Bar>3</Bar>
        <Key>5</Key>
        <Special>None</Special>
        <Times>1</Times>
      </Action>
      <HealthPowerCondition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionType>Mana</ConditionType>
        <Condition>LessThan</Condition>
        <Value>60</Value>
      </HealthPowerCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>120000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Evocation (LM)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>3</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Evocation</Name>
      </Action>
      <HealthPowerCondition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionType>Mana</ConditionType>
        <Condition>LessThan</Condition>
        <Value>40</Value>
      </HealthPowerCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>240000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Blink (Barrier Nova)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>4</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Blink</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>83073</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>15000</Value>
      </TickerCondition>
      <FunctionCondition>
        <Condition>Is</Condition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionFunction>FacingAway</ConditionFunction>
      </FunctionCondition>
    </Rule>
    <Rule>
      <Name>Deep Freeze (Barrier Nova)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>5</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Deep Freeze</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>83073</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>30000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Flame Orb</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>6</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Flame Orb</Name>
      </Action>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>60000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Cone of Cold</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>7</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Cone of Cold</Name>
      </Action>
      <DistanceToTargetCondition>
        <Condition>LessThan</Condition>
        <Value>12</Value>
      </DistanceToTargetCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>8000</Value>
      </TickerCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>31224</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Frost Nova</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>8</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Frost Nova</Name>
      </Action>
      <DistanceToTargetCondition>
        <Condition>LessThan</Condition>
        <Value>12</Value>
      </DistanceToTargetCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>20000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Blink (melee)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>9</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Blink</Name>
      </Action>
      <DistanceToTargetCondition>
        <Condition>LessThan</Condition>
        <Value>6</Value>
      </DistanceToTargetCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>15000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Mirror Image</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Unchanged</ShouldTarget>
      <Priority>10</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Mirror Image</Name>
      </Action>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>180000</Value>
      </TickerCondition>
      <CombatCountCondition>
        <Condition>MoreThan</Condition>
        <Value>2</Value>
      </CombatCountCondition>
    </Rule>
    <Rule>
      <Name>Icy Veins</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>11</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Icy Veins</Name>
      </Action>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>150000</Value>
      </TickerCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>31224</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Counterspell</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>12</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Counterspell</Name>
      </Action>
      <FunctionCondition>
        <Condition>Is</Condition>
        <ConditionTarget>Target</ConditionTarget>
        <ConditionFunction>Casting</ConditionFunction>
      </FunctionCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>24000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Ice Barrier</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>13</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Barrier</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>11426</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>24000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Deep Freeze (FoF)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>14</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Deep Freeze</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>44544</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>12494</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>30000</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Spellsteal</Name>
      <MatchAll>False</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>15</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Spellsteal</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>54589</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>17</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Frostfire bolt (Brain Freeze)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>16</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Frostfire Bolt</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>57761</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>31224</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Fireball (Brain Freeze)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>17</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Fireball</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>57761</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Ice Lance (Improved Cone of Cold)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>18</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Lance</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>83302</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Ice Lance (FoF)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>19</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Lance</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>44544</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>57761</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>31224</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Ice Lance (Barrier Nova)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>20</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Lance</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>83073</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>31224</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Ice Lance (Deep Freeze)</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>21</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Lance</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>HasBuff</Condition>
        <ValueType>Id</ValueType>
        <Value>44572</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>0</Value>
      </TickerCondition>
    </Rule>
    <Rule>
      <Name>Frostbolt</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Enemy</ShouldTarget>
      <Priority>22</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Frostbolt</Name>
      </Action>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>0</Value>
      </TickerCondition>
      <BuffCondition>
        <ConditionTarget>Target</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>31224</Value>
      </BuffCondition>
    </Rule>
  </CombatController>
  <BuffController>
    <Rule>
      <Name>Ice Barrier</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>None</ShouldTarget>
      <Priority>0</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Ice Barrier</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>11426</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>24000</Value>
      </TickerCondition>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>8395</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Summon Water Elemental</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>None</ShouldTarget>
      <Priority>1</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Summon Water Elemental</Name>
      </Action>
      <PetCondition>
        <Condition>DoesNotHave</Condition>
      </PetCondition>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>86458</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Arcane Brilliance</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>Self</ShouldTarget>
      <Priority>2</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Arcane Brilliance</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>79058</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>8395</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Frost Armor</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>None</ShouldTarget>
      <Priority>3</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Frost Armor</Name>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>7302</Value>
      </BuffCondition>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>8395</Value>
      </BuffCondition>
    </Rule>
    <Rule>
      <Name>Potion of Treasure Finding</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>None</ShouldTarget>
      <Priority>4</Priority>
      <Action>
        <Type>ActionKey</Type>
        <Name>PoTF</Name>
        <Bar>4</Bar>
        <Key>5</Key>
        <Special>None</Special>
        <Times>1</Times>
      </Action>
      <BuffCondition>
        <ConditionTarget>Player</ConditionTarget>
        <Condition>DoesNotHave</Condition>
        <ValueType>Id</ValueType>
        <Value>80263</Value>
      </BuffCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>1800000</Value>
      </TickerCondition>
    </Rule>
  </BuffController>
  <RestController>
    <Rule>
      <Name>Conjured Mana Cake</Name>
      <MatchAll>False</MatchAll>
      <ShouldTarget>None</ShouldTarget>
      <Priority>0</Priority>
      <Action>
        <Type>ActionKey</Type>
        <Name>Conjured Mana Cake</Name>
        <Bar>3</Bar>
        <Key>7</Key>
        <Special>None</Special>
        <Times>1</Times>
      </Action>
      <HealthPowerCondition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionType>Health</ConditionType>
        <Condition>LessThan</Condition>
        <Value>75</Value>
      </HealthPowerCondition>
      <HealthPowerCondition>
        <ConditionTarget>Player</ConditionTarget>
        <ConditionType>Mana</ConditionType>
        <Condition>LessThan</Condition>
        <Value>70</Value>
      </HealthPowerCondition>
    </Rule>
    <Rule>
      <Name>Conjure Refreshment</Name>
      <MatchAll>True</MatchAll>
      <ShouldTarget>None</ShouldTarget>
      <Priority>1</Priority>
      <Action>
        <Type>ActionSpell</Type>
        <Name>Conjure Refreshment</Name>
      </Action>
      <MageWaterCondition>
        <Condition>EqualTo</Condition>
        <Value>0</Value>
      </MageWaterCondition>
      <TickerCondition>
        <Condition>Is</Condition>
        <Value>3600000</Value>
      </TickerCondition>
    </Rule>
  </RestController>
</Behavior>