<?xml version="1.0" encoding="utf-8" ?><SHAMAN><Ability><Name>&amp;gt; Initialize</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>GroupInfo() 
CastClick() 

if IsShiftKeyDown() 
or IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,87959)
or UnitBuffID(&amp;quot;player&amp;quot;,2645)
or UnitBuffID(&amp;quot;player&amp;quot;,104269)
or UnitDebuffID(&amp;quot;target&amp;quot;,76780)
--or UnitChannelInfo(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;target&amp;quot;) 
then return true
end


if UnitBuffID(&amp;quot;player&amp;quot;, 79206) then
 Nova_Moving = false
elseif PQR_IsMoving() then
 Nova_Moving = true
else
 Nova_Moving = false
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>&amp;gt; Healing spells</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local InCombat = false
for i=1, #members do if UnitAffectingCombat(members[i].Unit) then InCombat = true end end
if not InCombat and not IsLeftShiftKeyDown() then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Tide Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local HStimer, HSTotem = GetTotemInfo(3)

if  IsUsableSpell(108280)
and GetSpellCooldown(108280) == 0
and HSTotem ~= GetSpellInfo(16190)
and HSTotem ~= GetSpellInfo(5394)
and members[1].HP &amp;lt; 80
and group.low &amp;gt; 2
then
CastSpellByName(GetSpellInfo(108280))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Water Shield</Name><Default>false</Default><SpellID>52127</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;,974) then return false end

if not UnitBuffID(&amp;quot;player&amp;quot;,52127)
then
return true
end</Lua><RecastDelay>1000</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Bind Elemental(Arena)</Name><Default>false</Default><SpellID>76780</SpellID><Actions></Actions><Lua>local TU = UnitDebuffID(&amp;quot;mouseover&amp;quot;, 10326)
local HW = UnitDebuffID(&amp;quot;mouseover&amp;quot;, 2812)
local hasFocus = UnitExists(&amp;quot;mouseover&amp;quot;)
local type= UnitCreatureType(&amp;quot;mouseover&amp;quot;)


if hasFocus ~= nil then
	if type == &amp;quot;Elemental&amp;quot; then
		if TU == nil and HW == nil then
			return true
		end
	end
end</Lua><RecastDelay>2000</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Grounding(Arena-Specific)</Name><Default>false</Default><SpellID>8177</SpellID><Actions>/stopcasting|/stopcasting</Actions><Lua>local InterruptSpells = { 79085, 51505, 51514, 33786, 2912, 78674, 2637, 5176, 5782, 116858, 710, 30108, 48181, 6353, 605, 9484, 8092, 34914, 20066, 61305, 28272, 61721, 61780, 28271, 118, 112948, 30451, 113656, 19434, 1513 }

if PQR_SpellAvailable(8177) then
	for y=1, 5 do
		local aTarget = &amp;quot;arena&amp;quot;..tostring(y)
		if UnitExists(aTarget) 
		 and IsSpellInRange(GetSpellInfo(403), aTarget) == 1 then
			local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(aTarget)
			for i=1, #InterruptSpells do
				if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
					if select(2, Nova_CastingInfo(aTarget)) &amp;gt;= 45 
and (( PQR_UnitFacing(&amp;quot;player&amp;quot;,aTarget,180) 
and not PQR_SpellAvailable(57994)) 
or 
(not PQR_UnitFacing(&amp;quot;player&amp;quot;,aTarget,180) 
and PQR_SpellAvailable(57994)))
then
						PQR_CustomTarget = aTarget
						return true
					end
				end
			end
		end
	end
	local fTarget = &amp;quot;focus&amp;quot;
	if UnitExists(fTarget) 
	 and IsSpellInRange(GetSpellInfo(403), fTarget) == 1 then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(fTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
		        if select(2, Nova_CastingInfo(fTarget)) &amp;gt;= 45 
and (( PQR_UnitFacing(&amp;quot;player&amp;quot;,fTarget,180) 
and not PQR_SpellAvailable(57994)) 
or 
(not PQR_UnitFacing(&amp;quot;player&amp;quot;,fTarget,180) 
and PQR_SpellAvailable(57994)))
then
					PQR_CustomTarget = fTarget
					return true
				end
			end
		end
	end
	local tTarget = &amp;quot;target&amp;quot;
	if UnitExists(tTarget) 
	 and IsSpellInRange(GetSpellInfo(403), tTarget) == 1 then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(tTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
				if select(2, Nova_CastingInfo(tTarget)) &amp;gt;= 45
and (( PQR_UnitFacing(&amp;quot;player&amp;quot;,tTarget,180) 
and not PQR_SpellAvailable(57994)) 
or 
(not PQR_UnitFacing(&amp;quot;player&amp;quot;,tTarget,180) 
and PQR_SpellAvailable(57994)))
 then
					PQR_CustomTarget = tTarget
					return true
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earthliving Weapon</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local ELW = GetWeaponEnchantInfo()

if ELW ~= 1 then
	CastSpellByID(51730)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earth Shield Auto(Arena/BG)</Name><Default>false</Default><SpellID>974</SpellID><Actions></Actions><Lua>if not CheckEarthShield then
  function CheckEarthShield(t)
    local _,_,_,EScount,_,_,EStimer = UnitBuffID(t,974,&amp;quot;PLAYER&amp;quot;) 
    return EScount, EStimer 
  end 
end 
local memberid = 1
local esactive = false
for i = 1, #members do
if UnitBuffID(members[i].Unit,974,&amp;quot;PLAYER&amp;quot;)
then 
esactive = true
memberid = i
end
end



for i = 1, #members do
 local EScount, EStimer = CheckEarthShield(members[i].Unit)
  if members[i].HP &amp;lt;= 99
  and UnitInRange(members[i].Unit)
  and esactive == false  
  then 
    PQR_CustomTarget = members[i].Unit 
    return true 
  end
end

for i = 1, #members do
  local EScount, EStimer = CheckEarthShield(members[i].Unit)
  if members[i].HP &amp;lt; (members[memberid].HP-20)
  and UnitInRange(members[i].Unit)
  then 
    PQR_CustomTarget = members[i].Unit 
    return true 
  end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Wave</Name><Default>false</Default><SpellID>331</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 92 
and not PQR_IsMoving(1) 
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>2000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Freedom Group(Arena)</Name><Default>false</Default><SpellID>108273</SpellID><Actions>/cast call of the elements</Actions><Lua>for i=1, #members do
if HaveDebuff(members[i].Unit,{339,102359,122,96294,91807, 19975, 128405, 45334,102359,110693, 50245,54706,4167,111340,116706,113275,123407,113275,87194,114404,115197,64695,63685,107566}) 
and UnitInRange(members[i].Unit)
then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge</Name><Default>false</Default><SpellID>8004</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 35 
and not PQR_IsMoving(1) 
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Purify Spirit(Arena-Specific)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1,#members do 
    if HaveDebuff(members[i].Unit,{118,8122,5484,5782,20066,853,1499,113724,44572,51514,2637,6789,15487}) 
    and UnitInRange(members[i].Unit)
    and not UnitDebuff(members[i].Unit, 30108)
    and not UnitDebuff(members[i].Unit, 34914)
    and not UnitDebuff(members[i].Unit, 131736)
    then
  		PQR_CustomTarget = members[i].Unit
  		CastSpellByName(GetSpellInfo(77130),PQR_CustomTarget)
  		return true
	end
	end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Tremor(Arena-All Fears+cancel)</Name><Default>false</Default><SpellID>8143</SpellID><Actions>/click TotemFrameTotem1 RightButton</Actions><Lua>if UnitDebuffID(&amp;quot;player&amp;quot;,5782)
or UnitDebuffID(&amp;quot;player&amp;quot;,5246)
or UnitDebuffID(&amp;quot;player&amp;quot;,111397)
or UnitDebuffID(&amp;quot;player&amp;quot;,8122) 
or UnitDebuffID(&amp;quot;player&amp;quot;,1513)
or UnitDebuffID(&amp;quot;player&amp;quot;,5484)
or UnitDebuffID(&amp;quot;player&amp;quot;,2944)
or UnitDebuffID(&amp;quot;player&amp;quot;,118699)
then return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Stream Totem</Name><Default>false</Default><SpellID>5394</SpellID><Actions></Actions><Lua>local HStimer, HSTotem = GetTotemInfo(3)

if members[1].HP &amp;lt; 70
and group.low &amp;gt; 1
and HSTotem ~= GetSpellInfo(108280)
and HSTotem ~= GetSpellInfo(16190)
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spirit Link Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsRightControlKeyDown()
and IsUsableSpell(98008)
and GetSpellCooldown(98008) == 0
then
CastSpellByName(GetSpellInfo(98008))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spirit Walkers Grace</Name><Default>false</Default><SpellID>79206</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 60 
and PQR_IsMoving(1) 
then
return true
end</Lua><RecastDelay>300</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>&amp;gt; Functions</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if SetFunctions == nil then

--------------------------------------------------

function HaveBuff(UnitID,SpellID,TimeLeft,Filter) 
  if not TimeLeft then TimeLeft = 0 end
  if type(SpellID) == &amp;quot;number&amp;quot; then SpellID = { SpellID } end 
  for i=1,#SpellID do 
    local spell, rank = GetSpellInfo(SpellID[i])
    if spell then
      local buff = select(7,UnitBuff(UnitID,spell,rank,Filter)) 
      if buff and ( buff == 0 or buff - GetTime() &amp;gt; TimeLeft ) then return true end
    end
  end
end

--------------------------------------------------

function HaveDebuff(UnitID,SpellID,TimeLeft,Filter) 
  if not TimeLeft then TimeLeft = 0 end
  if type(SpellID) == &amp;quot;number&amp;quot; then SpellID = { SpellID } end 
  for i=1,#SpellID do 
    local spell, rank = GetSpellInfo(SpellID[i])
    if spell then
      local debuff = select(7,UnitDebuff(UnitID,spell,rank,Filter)) 
      if debuff and ( debuff == 0 or debuff - GetTime() &amp;gt; TimeLeft ) then return true end
    end
  end
end

--------------------------------------------------

function CalculateHP(t)
  incomingheals = UnitGetIncomingHeals(t) or 0
  return 100 * ( UnitHealth(t) + incomingheals ) / UnitHealthMax(t)
end

--------------------------------------------------

function CanHeal(t)
  if UnitInRange(t) and UnitCanCooperate(&amp;quot;player&amp;quot;,t) and not UnitIsEnemy(&amp;quot;player&amp;quot;,t) 
  and not UnitIsCharmed(t) and not HaveDebuff(t,{33786,122370}) and not UnitIsDeadOrGhost(t) and not PQR_IsOutOfSight(t) 
  then return true end 
end

--------------------------------------------------

function GroupInfo()
  members, group = { { Unit = &amp;quot;player&amp;quot;, HP = CalculateHP(&amp;quot;player&amp;quot;) } }, { low = 0, tanks = { } } 
  group.type = IsInRaid() and &amp;quot;raid&amp;quot; or &amp;quot;party&amp;quot; 
  group.number = GetNumGroupMembers()
  for i=1,group.number do if CanHeal(group.type..i) then 
    local unit, hp = group.type..i, CalculateHP(group.type..i) 
    table.insert( members,{ Unit = unit, HP = hp } ) 
    if hp &amp;lt; 85 then group.low = group.low + 1 end
    if UnitGroupRolesAssigned(unit) == &amp;quot;TANK&amp;quot; then table.insert(group.tanks,unit) end 
  end end 
  if group.type == &amp;quot;raid&amp;quot; and #members &amp;gt; 1 then table.remove(members,1) end 
  table.sort(members, function(x,y) return x.HP &amp;lt; y.HP end)
  local customtarget = CanHeal(&amp;quot;target&amp;quot;) and &amp;quot;target&amp;quot; -- or CanHeal(&amp;quot;mouseover&amp;quot;) and GetMouseFocus() ~= WorldFrame and &amp;quot;mouseover&amp;quot; 
  if customtarget then table.sort(members, function(x) return UnitIsUnit(customtarget,x.Unit) end) end 
end

--------------------------------------------------

function CastClick()
  if IsMouseButtonDown(1) and MainMenuBar:IsShown() then 
    local mousefocus = GetMouseFocus() 
    if mousefocus and mousefocus.feedback_action 
    then SpellCancelQueuedSpell() PQR_DelayRotation(1) end
  end
end


----------------------------------------------------

if PQR_LoadLua ~= nil then
  -- Load Data File
  if PQR_LoadLua(&amp;quot;PQR_Nova_Data.lua&amp;quot;) == false then
   PQR_WriteToChat(&amp;quot;You are missing PQR_Nova_Data.lua. Rotation has been stopped.&amp;quot;, &amp;quot;Error&amp;quot;)
   PQR_StopRotation()
   return true
  end
 end

--------------------------------------------------


function IsHealer(t)
local class = select(2, UnitClass(t))
itheals = 0
if (class == &amp;quot;DRUID&amp;quot; or class == &amp;quot;PALADIN&amp;quot; or class == &amp;quot;PRIEST&amp;quot; or class == &amp;quot;MONK&amp;quot; or class == &amp;quot;SHAMAN&amp;quot;)
and UnitPowerMax(t) &amp;gt;= 290000
and not UnitBuffID(t, 24858)
and not UnitBuffID(t, 15473)
and not UnitBuffID(t, 324)
then
return true
end
end


---------------------------------------------------

function IsMelee(t)
local class = select(2, UnitClass(t))
itheals = 0
if (class == &amp;quot;DRUID&amp;quot; or class == &amp;quot;PALADIN&amp;quot; or class == &amp;quot;ROGUE&amp;quot; or class == &amp;quot;WARRIOR&amp;quot; or class == &amp;quot;DEATH KNIGHT&amp;quot;)
and UnitPowerMax(t) &amp;lt;= 62000
then
return true
end
end


--------------------------------------------------


if not cTar
then
	cTar = {&amp;quot;target&amp;quot;,&amp;quot;focus&amp;quot;,&amp;quot;mouseover&amp;quot;,&amp;quot;arena1&amp;quot;,&amp;quot;arena2&amp;quot;,&amp;quot;arena3&amp;quot;,&amp;quot;arena4&amp;quot;,&amp;quot;arena5&amp;quot;}
end



-------------------------------------------------

  SetFunctions = true

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Frost Shock Melee(Arena)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local Root = {
	-- Death Knight
	96294,		-- Chains of Ice (Chilblains)
	-- Death Knight Ghoul
	91807,		-- Shambling Rush (Dark Transformation)
	-- Druid
	339,		-- Entangling Roots
	45334,		-- Immobilized (Wild Charge - Bear)
	102359,		-- Mass Entanglement
	-- Druid Symbiosis
	110693,		-- Frost Nova (Mage)
	-- Hunter
	19185,		-- Entrapment
	128405,		-- Narrow Escape
	-- Hunter Pets
	50245,		-- Pin (Crab)
	54706,		-- Venom Web Spray (Silithid)
	4167,		-- Web (Spider)
	-- Mage
	122,		-- Frost Nova
	111340,		-- Ice Ward
	-- Mage Water Elemental
	33395,		-- Freeze
	-- Monk
	116706,		-- Disable
	113275,		-- Entangling Roots (Symbiosis)
	123407,		-- Spinning Fire Blossom
	-- Paladin
	-- Priest
	113275,		-- Entangling Roots (Symbiosis)
	87194,		-- Glyph of Mind Blast
	114404,		-- Void Tendril&amp;apos;s Grasp
	-- Rogue
	115197,		-- Partial Paralysis (is this actually used?)
	-- Shaman
	64695,		-- Earthgrab (Earthgrab Totem)
	63685,		-- Freeze (Frozen Power)
	-- Warlock
	-- Warlock Pets
	-- Warrior
	107566,		-- Staggering Shout
	-- Other
	39965,		-- Frost Grenade
	55536,		-- Frostweave Net
	13099		-- Net-o-Matic
}

local Stun = {
	-- Death Knight
	108194,		-- Asphyxiate
	115001,		-- Remorseless Winter
	-- Death Knight Ghoul
	91800,		-- Gnaw
	91797,		-- Monstrous Blow (Dark Transformation)
	-- Druid
	102795,		-- Bear Hug
	33786,		-- Cyclone
	99,		-- Disorienting Roar
	2637,		-- Hibernate
	22570,		-- Maim
	5211,		-- Mighty Bash
	9005,		-- Pounce
	--[dontknow] = &amp;quot;Snare&amp;quot;,		-- Wild Mushroom: Detonate
	-- Druid Symbiosis
	110698,		-- Hammer of Justice (Paladin)
	113004,		-- Intimidating Roar [Fleeing in fear] (Warrior)
	113056,		-- Intimidating Roar [Cowering in fear] (Warrior)
	-- Hunter
	117526,		-- Binding Shot
	3355,		-- Freezing Trap
	1513,		-- Scare Beast
	19503,		-- Scatter Shot
	19386,		-- Wyvern Sting
	-- Hunter Pets
	90337,		-- Bad Manner (Monkey)
	24394,		-- Intimidation
	50519,		-- Sonic Blast (Bat)
	56626,		-- Sting (Wasp)
	-- Mage
	118271,		-- Combustion Impact
	44572,		-- Deep Freeze
	31661,		-- Dragon&amp;apos;s Breath
	118,		-- Polymorph
	61305,		-- Polymorph: Black Cat
	28272,		-- Polymorph: Pig
	61721,		-- Polymorph: Rabbit
	61780,		-- Polymorph: Turkey
	28271,		-- Polymorph: Turtle
	82691,		-- Ring of Frost
	-- Monk
	123393,		-- Breath of Fire (Glyph of Breath of Fire)
	126451,		-- Clash
	122242,		-- Clash (not sure which one is right)
	119392,		-- Charging Ox Wave
	119381,		-- Leg Sweep
	115078,		-- Paralysis
	-- Paladin
	105421,		-- Blinding Light
	115752,		-- Blinding Light (Glyph of Blinding Light)
	105593,		-- Fist of Justice
	853,		-- Hammer of Justice
	119072,		-- Holy Wrath
	20066,		-- Repentance
	10326,		-- Turn Evil
	-- Priest
	113506,		-- Cyclone (Symbiosis)
	605,		-- Dominate Mind
	64044,		-- Psychic Horror
	8122,		-- Psychic Scream
	113792,		-- Psychic Terror (Psyfiend)
	9484,		-- Shackle Undead
	87204,		-- Sin and Punishment
	-- Rogue
	2094,		-- Blind
	1833,		-- Cheap Shot
	1776,		-- Gouge
	408,		-- Kidney Shot
	113953,		-- Paralysis (Paralytic Poison)
	6770,		-- Sap
	-- Shaman
	76780,		-- Bind Elemental
	77505,		-- Earthquake
	51514,		-- Hex
	118905,		-- Static Charge (Capacitor Totem)
	-- Shaman Primal Earth Elemental
	118345,		-- Pulverize
	-- Warlock
	710,		-- Banish
	111397,		-- Blood Fear - is this actually used? please test
	54786,		-- Demonic Leap (Metamorphosis)
	--5782,		-- Fear
	118699,		-- Fear
	5484,		-- Howl of Terror
	6789,		-- Mortal Coil
	30283,		-- Shadowfury
	104045,		-- Sleep (Metamorphosis)
	-- Warlock Pets
	89766,		-- Axe Toss (Felguard/Wrathguard)
	115268,		-- Mesmerize (Shivarra)
	6358,		-- Seduction (Succubus)
	-- Warrior
	7922,		-- Charge Stun
	--96273,		-- Charge Stun?
	118895,		-- Dragon Roar
	5246,		-- Intimidating Shout (Cowering in fear)
	20511,		-- Intimidating Shout (Cowering in fear)
	--97933,		-- Intimidating Shout (Cowering in fear) - used?
	--97934,		-- Intimidating Shout (Intimidated) - used?
	--46968,		-- Shockwave?
	132168,		-- Shockwave
	105771,		-- Warbringer
	-- Other
	30217,		-- Adamantite Grenade
	67769,		-- Cobalt Frag Bomb
	30216,		-- Fel Iron Bomb
	107079,		-- Quaking Palm
	13327,		-- Reckless Charge
	20549		-- War Stomp
}

local canroot = true

	for i=1, #Root do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Root[i])
		then canroot = false
		end
	end
	
	for i=1, #Stun do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Stun[i])
		then canroot = false
		end
	end

if IsUsableSpell(8056)
and canroot == true
and PQR_UnitFacing(&amp;quot;player&amp;quot;, PQR_CustomTarget, 90)
and IsMelee == true
then
CastSpellByName(tostring(GetSpellInfo(8056)))
    return true
end</Lua><RecastDelay>150</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wind Shear(Arena-Specific)</Name><Default>false</Default><SpellID>57994</SpellID><Actions>/stopcasting|/stopcasting</Actions><Lua>local InterruptSpells = { 79085, 331, 77472, 51514, 51505, 73920, 8004, 8936, 50464, 5185, 33786, 2912, 78674, 2637, 5176, 16914, 740, 5782, 116858, 111771, 108870, 5232, 101927, 710, 30108, 1120, 48181, 6353, 605, 2061, 2060, 9484, 8092, 32546, 34914, 64843, 47540, 32375, 42650, 19750, 82326, 7328, 54428, 82327, 20066, 115178, 117952, 115294, 116694, 124682, 115175, 117952, 115178, 113656, 61305, 28272, 61721, 61780, 28271, 118, 12051, 7302, 6117, 112948, 30451, 2641, 1513 }

if PQR_SpellAvailable(57994) then
	for y=1, 5 do
		local aTarget = &amp;quot;arena&amp;quot;..tostring(y)
		if UnitExists(aTarget) 
		 and IsSpellInRange(GetSpellInfo(57994), aTarget) == 1 
		 and PQR_UnitFacing(&amp;quot;player&amp;quot;, aTarget) then
			local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(aTarget)
			for i=1, #InterruptSpells do
				if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
					if select(2, Nova_CastingInfo(aTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,aTarget,180) 
then
						PQR_CustomTarget = aTarget
						return true
					end
				end
			end
		end
	end
	local fTarget = &amp;quot;focus&amp;quot;
	if UnitExists(fTarget) 
	 and IsSpellInRange(GetSpellInfo(57994), fTarget) == 1 
	 and PQR_UnitFacing(&amp;quot;player&amp;quot;, fTarget) then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(fTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
		        if select(2, Nova_CastingInfo(fTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,fTarget,180) 
then
					PQR_CustomTarget = fTarget
					return true
				end
			end
		end
	end
	local tTarget = &amp;quot;target&amp;quot;
	if UnitExists(tTarget) 
	 and IsSpellInRange(GetSpellInfo(57994), tTarget) == 1 
	 and PQR_UnitFacing(&amp;quot;player&amp;quot;, tTarget) then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(tTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
				if select(2, Nova_CastingInfo(tTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,tTarget,180) 
then
					PQR_CustomTarget = tTarget
					return true
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earthgrab Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local Root = {
	-- Death Knight
	96294,		-- Chains of Ice (Chilblains)
	-- Death Knight Ghoul
	91807,		-- Shambling Rush (Dark Transformation)
	-- Druid
	339,		-- Entangling Roots
	45334,		-- Immobilized (Wild Charge - Bear)
	102359,		-- Mass Entanglement
	-- Druid Symbiosis
	110693,		-- Frost Nova (Mage)
	-- Hunter
	19185,		-- Entrapment
	128405,		-- Narrow Escape
	-- Hunter Pets
	50245,		-- Pin (Crab)
	54706,		-- Venom Web Spray (Silithid)
	4167,		-- Web (Spider)
	-- Mage
	122,		-- Frost Nova
	111340,		-- Ice Ward
	-- Mage Water Elemental
	33395,		-- Freeze
	-- Monk
	116706,		-- Disable
	113275,		-- Entangling Roots (Symbiosis)
	123407,		-- Spinning Fire Blossom
	-- Paladin
	-- Priest
	113275,		-- Entangling Roots (Symbiosis)
	87194,		-- Glyph of Mind Blast
	114404,		-- Void Tendril&amp;apos;s Grasp
	-- Rogue
	115197,		-- Partial Paralysis (is this actually used?)
	-- Shaman
	64695,		-- Earthgrab (Earthgrab Totem)
	63685,		-- Freeze (Frozen Power)
	-- Warlock
	-- Warlock Pets
	-- Warrior
	107566,		-- Staggering Shout
	-- Other
	39965,		-- Frost Grenade
	55536,		-- Frostweave Net
	13099		-- Net-o-Matic
}

local Stun = {
	-- Death Knight
	108194,		-- Asphyxiate
	115001,		-- Remorseless Winter
	-- Death Knight Ghoul
	91800,		-- Gnaw
	91797,		-- Monstrous Blow (Dark Transformation)
	-- Druid
	102795,		-- Bear Hug
	33786,		-- Cyclone
	99,		-- Disorienting Roar
	2637,		-- Hibernate
	22570,		-- Maim
	5211,		-- Mighty Bash
	9005,		-- Pounce
	--[dontknow] = &amp;quot;Snare&amp;quot;,		-- Wild Mushroom: Detonate
	-- Druid Symbiosis
	110698,		-- Hammer of Justice (Paladin)
	113004,		-- Intimidating Roar [Fleeing in fear] (Warrior)
	113056,		-- Intimidating Roar [Cowering in fear] (Warrior)
	-- Hunter
	117526,		-- Binding Shot
	3355,		-- Freezing Trap
	1513,		-- Scare Beast
	19503,		-- Scatter Shot
	19386,		-- Wyvern Sting
	-- Hunter Pets
	90337,		-- Bad Manner (Monkey)
	24394,		-- Intimidation
	50519,		-- Sonic Blast (Bat)
	56626,		-- Sting (Wasp)
	-- Mage
	118271,		-- Combustion Impact
	44572,		-- Deep Freeze
	31661,		-- Dragon&amp;apos;s Breath
	118,		-- Polymorph
	61305,		-- Polymorph: Black Cat
	28272,		-- Polymorph: Pig
	61721,		-- Polymorph: Rabbit
	61780,		-- Polymorph: Turkey
	28271,		-- Polymorph: Turtle
	82691,		-- Ring of Frost
	-- Monk
	123393,		-- Breath of Fire (Glyph of Breath of Fire)
	126451,		-- Clash
	122242,		-- Clash (not sure which one is right)
	119392,		-- Charging Ox Wave
	119381,		-- Leg Sweep
	115078,		-- Paralysis
	-- Paladin
	105421,		-- Blinding Light
	115752,		-- Blinding Light (Glyph of Blinding Light)
	105593,		-- Fist of Justice
	853,		-- Hammer of Justice
	119072,		-- Holy Wrath
	20066,		-- Repentance
	10326,		-- Turn Evil
	-- Priest
	113506,		-- Cyclone (Symbiosis)
	605,		-- Dominate Mind
	64044,		-- Psychic Horror
	8122,		-- Psychic Scream
	113792,		-- Psychic Terror (Psyfiend)
	9484,		-- Shackle Undead
	87204,		-- Sin and Punishment
	-- Rogue
	2094,		-- Blind
	1833,		-- Cheap Shot
	1776,		-- Gouge
	408,		-- Kidney Shot
	113953,		-- Paralysis (Paralytic Poison)
	6770,		-- Sap
	-- Shaman
	76780,		-- Bind Elemental
	77505,		-- Earthquake
	51514,		-- Hex
	118905,		-- Static Charge (Capacitor Totem)
	-- Shaman Primal Earth Elemental
	118345,		-- Pulverize
	-- Warlock
	710,		-- Banish
	111397,		-- Blood Fear - is this actually used? please test
	54786,		-- Demonic Leap (Metamorphosis)
	--5782,		-- Fear
	118699,		-- Fear
	5484,		-- Howl of Terror
	6789,		-- Mortal Coil
	30283,		-- Shadowfury
	104045,		-- Sleep (Metamorphosis)
	-- Warlock Pets
	89766,		-- Axe Toss (Felguard/Wrathguard)
	115268,		-- Mesmerize (Shivarra)
	6358,		-- Seduction (Succubus)
	-- Warrior
	7922,		-- Charge Stun
	--96273,		-- Charge Stun?
	118895,		-- Dragon Roar
	5246,		-- Intimidating Shout (Cowering in fear)
	20511,		-- Intimidating Shout (Cowering in fear)
	--97933,		-- Intimidating Shout (Cowering in fear) - used?
	--97934,		-- Intimidating Shout (Intimidated) - used?
	--46968,		-- Shockwave?
	132168,		-- Shockwave
	105771,		-- Warbringer
	-- Other
	30217,		-- Adamantite Grenade
	67769,		-- Cobalt Frag Bomb
	30216,		-- Fel Iron Bomb
	107079,		-- Quaking Palm
	13327,		-- Reckless Charge
	20549		-- War Stomp
}

local canroot = true

if CheckInteractDistance(&amp;quot;target&amp;quot;, 3) == 1
then

	for i=1, #Root do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Root[i])
		then canroot = false
		end
	end
	
	for i=1, #Stun do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Stun[i])
		then canroot = false
		end
	end

if IsUsableSpell(108920)
and select(2,GetSpellCooldown(51485)) &amp;lt; 2 
and canroot == true
then
CastSpellByName(tostring(GetSpellInfo(51485)))
return true
end

end</Lua><RecastDelay>3500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Capacitor Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local Root = {
	-- Death Knight
	96294,		-- Chains of Ice (Chilblains)
	-- Death Knight Ghoul
	91807,		-- Shambling Rush (Dark Transformation)
	-- Druid
	339,		-- Entangling Roots
	45334,		-- Immobilized (Wild Charge - Bear)
	102359,		-- Mass Entanglement
	-- Druid Symbiosis
	110693,		-- Frost Nova (Mage)
	-- Hunter
	19185,		-- Entrapment
	128405,		-- Narrow Escape
	-- Hunter Pets
	50245,		-- Pin (Crab)
	54706,		-- Venom Web Spray (Silithid)
	4167,		-- Web (Spider)
	-- Mage
	122,		-- Frost Nova
	111340,		-- Ice Ward
	-- Mage Water Elemental
	33395,		-- Freeze
	-- Monk
	116706,		-- Disable
	113275,		-- Entangling Roots (Symbiosis)
	123407,		-- Spinning Fire Blossom
	-- Paladin
	-- Priest
	113275,		-- Entangling Roots (Symbiosis)
	87194,		-- Glyph of Mind Blast
	114404,		-- Void Tendril&amp;apos;s Grasp
	-- Rogue
	115197,		-- Partial Paralysis (is this actually used?)
	-- Shaman
	64695,		-- Earthgrab (Earthgrab Totem)
	63685,		-- Freeze (Frozen Power)
	-- Warlock
	-- Warlock Pets
	-- Warrior
	107566,		-- Staggering Shout
	-- Other
	39965,		-- Frost Grenade
	55536,		-- Frostweave Net
	13099		-- Net-o-Matic
}

local Stun = {
	-- Death Knight
	108194,		-- Asphyxiate
	115001,		-- Remorseless Winter
	-- Death Knight Ghoul
	91800,		-- Gnaw
	91797,		-- Monstrous Blow (Dark Transformation)
	-- Druid
	102795,		-- Bear Hug
	33786,		-- Cyclone
	99,		-- Disorienting Roar
	2637,		-- Hibernate
	22570,		-- Maim
	5211,		-- Mighty Bash
	9005,		-- Pounce
	--[dontknow] = &amp;quot;Snare&amp;quot;,		-- Wild Mushroom: Detonate
	-- Druid Symbiosis
	110698,		-- Hammer of Justice (Paladin)
	113004,		-- Intimidating Roar [Fleeing in fear] (Warrior)
	113056,		-- Intimidating Roar [Cowering in fear] (Warrior)
	-- Hunter
	117526,		-- Binding Shot
	3355,		-- Freezing Trap
	1513,		-- Scare Beast
	19503,		-- Scatter Shot
	19386,		-- Wyvern Sting
	-- Hunter Pets
	90337,		-- Bad Manner (Monkey)
	24394,		-- Intimidation
	50519,		-- Sonic Blast (Bat)
	56626,		-- Sting (Wasp)
	-- Mage
	118271,		-- Combustion Impact
	44572,		-- Deep Freeze
	31661,		-- Dragon&amp;apos;s Breath
	118,		-- Polymorph
	61305,		-- Polymorph: Black Cat
	28272,		-- Polymorph: Pig
	61721,		-- Polymorph: Rabbit
	61780,		-- Polymorph: Turkey
	28271,		-- Polymorph: Turtle
	82691,		-- Ring of Frost
	-- Monk
	123393,		-- Breath of Fire (Glyph of Breath of Fire)
	126451,		-- Clash
	122242,		-- Clash (not sure which one is right)
	119392,		-- Charging Ox Wave
	119381,		-- Leg Sweep
	115078,		-- Paralysis
	-- Paladin
	105421,		-- Blinding Light
	115752,		-- Blinding Light (Glyph of Blinding Light)
	105593,		-- Fist of Justice
	853,		-- Hammer of Justice
	119072,		-- Holy Wrath
	20066,		-- Repentance
	10326,		-- Turn Evil
	-- Priest
	113506,		-- Cyclone (Symbiosis)
	605,		-- Dominate Mind
	64044,		-- Psychic Horror
	8122,		-- Psychic Scream
	113792,		-- Psychic Terror (Psyfiend)
	9484,		-- Shackle Undead
	87204,		-- Sin and Punishment
	-- Rogue
	2094,		-- Blind
	1833,		-- Cheap Shot
	1776,		-- Gouge
	408,		-- Kidney Shot
	113953,		-- Paralysis (Paralytic Poison)
	6770,		-- Sap
	-- Shaman
	76780,		-- Bind Elemental
	77505,		-- Earthquake
	51514,		-- Hex
	118905,		-- Static Charge (Capacitor Totem)
	-- Shaman Primal Earth Elemental
	118345,		-- Pulverize
	-- Warlock
	710,		-- Banish
	111397,		-- Blood Fear - is this actually used? please test
	54786,		-- Demonic Leap (Metamorphosis)
	--5782,		-- Fear
	118699,		-- Fear
	5484,		-- Howl of Terror
	6789,		-- Mortal Coil
	30283,		-- Shadowfury
	104045,		-- Sleep (Metamorphosis)
	-- Warlock Pets
	89766,		-- Axe Toss (Felguard/Wrathguard)
	115268,		-- Mesmerize (Shivarra)
	6358,		-- Seduction (Succubus)
	-- Warrior
	7922,		-- Charge Stun
	--96273,		-- Charge Stun?
	118895,		-- Dragon Roar
	5246,		-- Intimidating Shout (Cowering in fear)
	20511,		-- Intimidating Shout (Cowering in fear)
	--97933,		-- Intimidating Shout (Cowering in fear) - used?
	--97934,		-- Intimidating Shout (Intimidated) - used?
	--46968,		-- Shockwave?
	132168,		-- Shockwave
	105771,		-- Warbringer
	-- Other
	30217,		-- Adamantite Grenade
	67769,		-- Cobalt Frag Bomb
	30216,		-- Fel Iron Bomb
	107079,		-- Quaking Palm
	13327,		-- Reckless Charge
	20549		-- War Stomp
}

local canroot = true

if CheckInteractDistance(&amp;quot;target&amp;quot;, 3) == 1
then

	for i=1, #Root do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Root[i])
		then canroot = false
		end
	end
	
	for i=1, #Stun do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Stun[i])
		then canroot = false
		end
	end

if IsUsableSpell(108920)
and select(2,GetSpellCooldown(108269)) &amp;lt; 2 
and canroot == true
then
CastSpellByName(tostring(GetSpellInfo(108269)))
return true
end

end</Lua><RecastDelay>3500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wind Shear</Name><Default>false</Default><SpellID>57994</SpellID><Actions></Actions><Lua>local devotionaura = UnitBuffID(&amp;quot;target&amp;quot;,31821)
local innerfocus = UnitBuffID(&amp;quot;target&amp;quot;,89485)
local swg = UnitBuffID(&amp;quot;target&amp;quot;,131558)

if devotionaura == nil
and innerfocus == nil
and swg == nil
and UnitCastingInfo(&amp;quot;target&amp;quot;)
and IsSpellInRange(&amp;quot;Wind Shear&amp;quot;, &amp;quot;target&amp;quot;)
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wind Shear (Focus)</Name><Default>false</Default><SpellID>57994</SpellID><Actions></Actions><Lua>local devotionaura = UnitBuffID(&amp;quot;focus&amp;quot;,31821)
local innerfocus = UnitBuffID(&amp;quot;focus&amp;quot;,89485)
local swg = UnitBuffID(&amp;quot;focus&amp;quot;,131558)

if devotionaura == nil
and innerfocus == nil
and swg == nil
and UnitCastingInfo(&amp;quot;focus&amp;quot;)
and IsSpellInRange(&amp;quot;Wind Shear&amp;quot;, &amp;quot;focus&amp;quot;)
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>SLT</Name><Default>false</Default><SpellID>98008</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 75 
and CalculateHP(&amp;quot;player&amp;quot;) &amp;lt; 32 
and not UnitIsUnit(&amp;quot;player&amp;quot;, members[1].Unit)
and not PQR_IsMoving(1) 
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>200</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healthstone</Name><Default>false</Default><SpellID>5512</SpellID><Actions></Actions><Lua>local myhp = UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) * 100

if myhp &amp;lt; 40 then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earthbind Totem</Name><Default>false</Default><SpellID>2484</SpellID><Actions></Actions><Lua>local Root = {
	-- Death Knight
	96294,		-- Chains of Ice (Chilblains)
	-- Death Knight Ghoul
	91807,		-- Shambling Rush (Dark Transformation)
	-- Druid
	339,		-- Entangling Roots
	45334,		-- Immobilized (Wild Charge - Bear)
	102359,		-- Mass Entanglement
	-- Druid Symbiosis
	110693,		-- Frost Nova (Mage)
	-- Hunter
	19185,		-- Entrapment
	128405,		-- Narrow Escape
	-- Hunter Pets
	50245,		-- Pin (Crab)
	54706,		-- Venom Web Spray (Silithid)
	4167,		-- Web (Spider)
	-- Mage
	122,		-- Frost Nova
	111340,		-- Ice Ward
	-- Mage Water Elemental
	33395,		-- Freeze
	-- Monk
	116706,		-- Disable
	113275,		-- Entangling Roots (Symbiosis)
	123407,		-- Spinning Fire Blossom
	-- Paladin
	-- Priest
	113275,		-- Entangling Roots (Symbiosis)
	87194,		-- Glyph of Mind Blast
	114404,		-- Void Tendril&amp;apos;s Grasp
	-- Rogue
	115197,		-- Partial Paralysis (is this actually used?)
	-- Shaman
	64695,		-- Earthgrab (Earthgrab Totem)
	63685,		-- Freeze (Frozen Power)
	-- Warlock
	-- Warlock Pets
	-- Warrior
	107566,		-- Staggering Shout
	-- Other
	39965,		-- Frost Grenade
	55536,		-- Frostweave Net
	13099		-- Net-o-Matic
}

local Stun = {
	-- Death Knight
	108194,		-- Asphyxiate
	115001,		-- Remorseless Winter
	-- Death Knight Ghoul
	91800,		-- Gnaw
	91797,		-- Monstrous Blow (Dark Transformation)
	-- Druid
	102795,		-- Bear Hug
	33786,		-- Cyclone
	99,		-- Disorienting Roar
	2637,		-- Hibernate
	22570,		-- Maim
	5211,		-- Mighty Bash
	9005,		-- Pounce
	--[dontknow] = &amp;quot;Snare&amp;quot;,		-- Wild Mushroom: Detonate
	-- Druid Symbiosis
	110698,		-- Hammer of Justice (Paladin)
	113004,		-- Intimidating Roar [Fleeing in fear] (Warrior)
	113056,		-- Intimidating Roar [Cowering in fear] (Warrior)
	-- Hunter
	117526,		-- Binding Shot
	3355,		-- Freezing Trap
	1513,		-- Scare Beast
	19503,		-- Scatter Shot
	19386,		-- Wyvern Sting
	-- Hunter Pets
	90337,		-- Bad Manner (Monkey)
	24394,		-- Intimidation
	50519,		-- Sonic Blast (Bat)
	56626,		-- Sting (Wasp)
	-- Mage
	118271,		-- Combustion Impact
	44572,		-- Deep Freeze
	31661,		-- Dragon&amp;apos;s Breath
	118,		-- Polymorph
	61305,		-- Polymorph: Black Cat
	28272,		-- Polymorph: Pig
	61721,		-- Polymorph: Rabbit
	61780,		-- Polymorph: Turkey
	28271,		-- Polymorph: Turtle
	82691,		-- Ring of Frost
	-- Monk
	123393,		-- Breath of Fire (Glyph of Breath of Fire)
	126451,		-- Clash
	122242,		-- Clash (not sure which one is right)
	119392,		-- Charging Ox Wave
	119381,		-- Leg Sweep
	115078,		-- Paralysis
	-- Paladin
	105421,		-- Blinding Light
	115752,		-- Blinding Light (Glyph of Blinding Light)
	105593,		-- Fist of Justice
	853,		-- Hammer of Justice
	119072,		-- Holy Wrath
	20066,		-- Repentance
	10326,		-- Turn Evil
	-- Priest
	113506,		-- Cyclone (Symbiosis)
	605,		-- Dominate Mind
	64044,		-- Psychic Horror
	8122,		-- Psychic Scream
	113792,		-- Psychic Terror (Psyfiend)
	9484,		-- Shackle Undead
	87204,		-- Sin and Punishment
	-- Rogue
	2094,		-- Blind
	1833,		-- Cheap Shot
	1776,		-- Gouge
	408,		-- Kidney Shot
	113953,		-- Paralysis (Paralytic Poison)
	6770,		-- Sap
	-- Shaman
	76780,		-- Bind Elemental
	77505,		-- Earthquake
	51514,		-- Hex
	118905,		-- Static Charge (Capacitor Totem)
	-- Shaman Primal Earth Elemental
	118345,		-- Pulverize
	-- Warlock
	710,		-- Banish
	111397,		-- Blood Fear - is this actually used? please test
	54786,		-- Demonic Leap (Metamorphosis)
	--5782,		-- Fear
	118699,		-- Fear
	5484,		-- Howl of Terror
	6789,		-- Mortal Coil
	30283,		-- Shadowfury
	104045,		-- Sleep (Metamorphosis)
	-- Warlock Pets
	89766,		-- Axe Toss (Felguard/Wrathguard)
	115268,		-- Mesmerize (Shivarra)
	6358,		-- Seduction (Succubus)
	-- Warrior
	7922,		-- Charge Stun
	--96273,		-- Charge Stun?
	118895,		-- Dragon Roar
	5246,		-- Intimidating Shout (Cowering in fear)
	20511,		-- Intimidating Shout (Cowering in fear)
	--97933,		-- Intimidating Shout (Cowering in fear) - used?
	--97934,		-- Intimidating Shout (Intimidated) - used?
	--46968,		-- Shockwave?
	132168,		-- Shockwave
	105771,		-- Warbringer
	-- Other
	30217,		-- Adamantite Grenade
	67769,		-- Cobalt Frag Bomb
	30216,		-- Fel Iron Bomb
	107079,		-- Quaking Palm
	13327,		-- Reckless Charge
	20549		-- War Stomp
}

local canroot = true

if CheckInteractDistance(&amp;quot;target&amp;quot;, 3) == 1
then

	for i=1, #Root do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Root[i])
		then canroot = false
		end
	end
	
	for i=1, #Stun do
		if UnitDebuffID(&amp;quot;target&amp;quot;,Stun[i])
		then canroot = false
		end
	end

if IsUsableSpell(2484)
and select(2,GetSpellCooldown(2484)) &amp;lt; 2 
and canroot == true
then
CastSpellByName(tostring(GetSpellInfo(2484)))
return true
end

end</Lua><RecastDelay>3500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Hex</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsLeftShiftKeyDown()
and not PQR_IsMoving(1) 
then
CastSpellByID(51514) 
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Dispel Low</Name><Default>false</Default><SpellID>77130</SpellID><Actions></Actions><Lua>if Nova_Spell[PQ_Cleanse].check then
	if members[1].HP &amp;lt; 50 then
		for i=1, #members do
			if ValidDispel(members[i].Unit) 
			 and not DontDispel(members[i].Unit) 
			 and DangerousMagic(members[i].Unit) then
			 	PQR_CustomTarget = members[i].Unit
			 	return true
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Greater Healing Wave (Arena)</Name><Default>false</Default><SpellID>77472</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 85 
and not Nova_Moving
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge Test</Name><Default>false</Default><SpellID>8004</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 35 
and not Nova_Moving
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Greater Healing Wave NS</Name><Default>false</Default><SpellID>77472</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 32 
and not Nova_Moving 
and UnitBuffID(&amp;quot;player&amp;quot;, 16188)
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Purify Spirit Low HP</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1,#members do 
    if  members[1].HP &amp;lt; 40
    and	UnitInRange(members[i].Unit)
    and not UnitDebuff(members[i].Unit, 30108)
    and not UnitDebuff(members[i].Unit, 34914)
    and not UnitDebuff(members[i].Unit, 131736)
    and members[1].HP &amp;lt; 40
    then
  		PQR_CustomTarget = members[i].Unit
  		CastSpellByName(GetSpellInfo(77130),PQR_CustomTarget)
  		return true
	end
	end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Focus/Pause</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsLeftShiftKeyDown() and GetCurrentKeyBoardFocus() == nil then
	if UnitExists(&amp;quot;mouseover&amp;quot;) == nil then
		return true
	elseif UnitIsDead(&amp;quot;mouseover&amp;quot;) == nil and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) then
		FocusUnit(&amp;quot;mouseover&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Hex Mouseover</Name><Default>false</Default><SpellID>51514</SpellID><Actions></Actions><Lua>if IsLeftShiftKeyDown() and IsMouseButtonDown(1) then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Stream Totem(BG)</Name><Default>false</Default><SpellID>5394</SpellID><Actions></Actions><Lua>local HStimer, HSTotem = GetTotemInfo(3)

if members[1].HP &amp;lt; 70
and group.low &amp;gt; 1
and HSTotem ~= GetSpellInfo(108280)
and HSTotem ~= GetSpellInfo(16190)
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Stream Totem(Arena)</Name><Default>false</Default><SpellID>5394</SpellID><Actions>/cast call of the elements</Actions><Lua>local HStimer, HSTotem = GetTotemInfo(3)

if members[1].HP &amp;lt; 70
and HSTotem ~= GetSpellInfo(108280)
and HSTotem ~= GetSpellInfo(16190)
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Tide Totem(Arena)</Name><Default>false</Default><SpellID>108280</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 35
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Freedom Melee</Name><Default>false</Default><SpellID>108273</SpellID><Actions>/cast call of the elements</Actions><Lua>function CheckSlow(unitid)
local buff = { 45524, 1715, 3408, 59638, 20164, 25809, 31589, 51585, 50040, 50041, 31126, 31124, 122, 44614, 1604, 45524, 50040, 339, 45334, 58179, 61391, 19306, 19185, 35101, 5116, 61394, 2974, 54644, 50245, 50271, 54706, 4167, 33395, 83302, 55080, 11113, 6136, 120, 116, 44614, 31589, 63529, 20170, 87194, 31125, 3409, 26679, 64695, 63685, 8056, 8034, 18118, 18223, 63311, 23694, 1715, 12323, 39965, 55536, 13099, 29703 }

for i,v in ipairs(buff) do
 if UnitDebuffID(unitid,v) then return true end
end
end

if not healinit then

  function CalculateHP(t)
    local incomingheal = 0
    if UnitGetIncomingHeals(t) then incomingheal = UnitGetIncomingHeals(t)  end
    return 100 * ( UnitHealth(t) + incomingheal ) / UnitHealthMax(t)
  end

  function SafeTarget(t)
    if IsSpellInRange(tostring(GetSpellInfo(635)),t) == 1 
    and UnitIsCharmed(t) == nil
    and UnitIsDeadOrGhost(t) == nil 
    and UnitCanCooperate(&amp;quot;player&amp;quot;,t) 
    then return true end
  end

  healinit = true

end

if SafeTarget(&amp;quot;target&amp;quot;) then 
  PQR_CustomTarget = &amp;quot;target&amp;quot; 
  PQR_CustomTargetHP = CalculateHP(&amp;quot;target&amp;quot;) 
else 
  lowhpmembers = 0
  PQR_CustomTarget = &amp;quot;player&amp;quot;
  PQR_CustomTargetHP = CalculateHP(&amp;quot;player&amp;quot;)
  local group = &amp;quot;party&amp;quot;
  local members = GetNumPartyMembers()
  local targethp = CalculateHP(&amp;quot;player&amp;quot;) + 20
  if GetNumRaidMembers() &amp;gt; 0 then group = &amp;quot;raid&amp;quot; members = GetNumRaidMembers() end

  for i = 1, members, 1 do
    local member = group..tostring(i)
    local memberhp = CalculateHP(member)
      if SafeTarget(member)  then
      if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot; and UnitBuffID(member, 53563) == nil  then memberhp = memberhp - 1 else memberhp = memberhp + 5  end
      if UnitThreatSituation(member) == 3 then memberhp = memberhp - 3 end
     if UnitBuffID(member, 23333) then memberhp = memberhp - 40 end
      if CheckSlow(member) then
        PQR_CustomTarget = member
        targethp = memberhp
      end 

    end
  end

end


if UnitBuffID(PQR_CustomTarget, 23333) ~= nil then return true end
if UnitPowerMax(PQR_CustomTarget) &amp;lt; 30000 and CheckSlow(PQR_CustomTarget) and UnitPower(PQR_CustomTarget) ~= UnitPower(&amp;quot;player&amp;quot;)  then return true end
if PQR_CustomTargetHP &amp;lt; 95 and CheckSlow(PQR_CustomTarget) and UnitPower(PQR_CustomTarget) ~= UnitPower(&amp;quot;player&amp;quot;)  then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge(Arena)</Name><Default>false</Default><SpellID>8004</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 62 
and not Nova_Moving
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Wave(Arena)</Name><Default>false</Default><SpellID>331</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 95 
and not Nova_Moving 
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>2000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge(Arena)+SWG</Name><Default>false</Default><SpellID>8004</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 99 
and not Nova_Moving
and UnitBuffID(&amp;quot;player&amp;quot;,79206)
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge(Arena)+Ascendance</Name><Default>false</Default><SpellID>8004</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 65 
and not Nova_Moving
and UnitBuffID(&amp;quot;player&amp;quot;,114049)
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Greater Healing Wave (Arena)+NS</Name><Default>false</Default><SpellID>77472</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 99 
and not Nova_Moving
and UnitBuffID(&amp;quot;player&amp;quot;,16188)
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Purge Specific CD&amp;apos;s(Arena)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

local purgeThis2 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness

12472,  -- Icy Veins

1022,   -- Hand of Protection

11426,   -- Ice Barrier

774,   -- Rejuvenation

20925,  -- Sacred Shield

114250,   -- Selfless Healer

17    -- Power Word: Shield

}

if UnitExists(&amp;quot;arena1&amp;quot;) then
for i=1, #purgeThis2 do
if UnitBuffID(&amp;quot;arena1&amp;quot;, purgeThis2[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena1&amp;quot;) == 1 
and PlayerHP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
CastSpellByID(370, &amp;quot;arena1&amp;quot;)
end
end
end

if UnitExists(&amp;quot;arena2&amp;quot;) then
for i=1, #purgeThis2 do
if UnitBuffID(&amp;quot;arena2&amp;quot;, purgeThis2[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena2&amp;quot;) == 1 
and PlayerHP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
CastSpellByID(370, &amp;quot;arena2&amp;quot;)
end
end
end

if UnitExists(&amp;quot;arena3&amp;quot;) then
for i=1, #purgeThis2 do
if UnitBuffID(&amp;quot;arena3&amp;quot;, purgeThis2[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena3&amp;quot;) == 1 
and PlayerHP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
CastSpellByID(370, &amp;quot;arena3&amp;quot;)
end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Purge Specific CD&amp;apos;s@50% (Arena)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

local purgeThis1 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness

113858,   -- Dark Soul: Instability

113861,   -- Dark Soul: Knowledge

113860,   -- Dark Soul: Misery

1022   -- Hand of Protection

}

if UnitExists(&amp;quot;arena1&amp;quot;) then
for i=1, #purgeThis1 do
if UnitBuffID(&amp;quot;arena1&amp;quot;, purgeThis1[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena1&amp;quot;) == 1 
and PlayerHP &amp;gt; 50 then
CastSpellByID(370, &amp;quot;arena1&amp;quot;)
end
end
end

if UnitExists(&amp;quot;arena2&amp;quot;) then
for i=1, #purgeThis1 do
if UnitBuffID(&amp;quot;arena2&amp;quot;, purgeThis1[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena2&amp;quot;) == 1 
and PlayerHP &amp;gt; 50 then
CastSpellByID(370, &amp;quot;arena2&amp;quot;)
end
end
end

if UnitExists(&amp;quot;arena3&amp;quot;) then
for i=1, #purgeThis1 do
if UnitBuffID(&amp;quot;arena3&amp;quot;, purgeThis1[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena3&amp;quot;) == 1 
and PlayerHP &amp;gt; 50 then
CastSpellByID(370, &amp;quot;arena3&amp;quot;)
end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Purge Specific CD&amp;apos;s@70% (Arena)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

local purgeThis2 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness

12472,  -- Icy Veins

1022,   -- Hand of Protection

11426,   -- Ice Barrier

20925,  -- Sacred Shield

114250,   -- Selfless Healer

17    -- Power Word: Shield

}

if UnitExists(&amp;quot;arena1&amp;quot;) then
for i=1, #purgeThis2 do
if UnitBuffID(&amp;quot;arena1&amp;quot;, purgeThis2[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena1&amp;quot;) == 1 
and PlayerHP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
CastSpellByID(370, &amp;quot;arena1&amp;quot;)
end
end
end

if UnitExists(&amp;quot;arena2&amp;quot;) then
for i=1, #purgeThis2 do
if UnitBuffID(&amp;quot;arena2&amp;quot;, purgeThis2[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena2&amp;quot;) == 1 
and PlayerHP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
CastSpellByID(370, &amp;quot;arena2&amp;quot;)
end
end
end

if UnitExists(&amp;quot;arena3&amp;quot;) then
for i=1, #purgeThis2 do
if UnitBuffID(&amp;quot;arena3&amp;quot;, purgeThis2[i]) ~= nil
and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;, 0.1) == false
and IsSpellInRange(&amp;quot;Purge&amp;quot;, &amp;quot;arena3&amp;quot;) == 1 
and PlayerHP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
CastSpellByID(370, &amp;quot;arena3&amp;quot;)
end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Autotarget Low HP</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local group = &amp;quot;party&amp;quot;
local members = GetNumSubgroupMembers()
lowhpmembers = 0
local lowest = 100

if IsInRaid() then
  group = &amp;quot;raid&amp;quot;
  members = GetNumGroupMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
  local memberhp = 100 * UnitHealth(member) / UnitHealthMax(member)
  if UnitInRange(member) 
  and UnitIsFriend(&amp;quot;player&amp;quot;, member)
  and UnitIsDeadOrGhost(member) == nil 
  and UnitDebuffID(member,33786) == nil then
    if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot; then memberhp = memberhp - 1 end
    if UnitThreatSituation(member) == 3 then memberhp = memberhp - 3 end
    if UnitBuffID(member, 53563) ~= nil then memberhp = memberhp + 7 end
    if UnitBuffID(member, 23333) ~= nil then if memberhp &amp;lt;= 90 and memberhp &amp;gt;= 80 then memberhp = memberhp - 10 end end
    if UnitBuffID(member, 23333) ~= nil then if memberhp &amp;lt;=79 and memberhp &amp;gt;= 60 then memberhp = memberhp - 20 end end
    if UnitBuffID(member, 23333) ~= nil then if memberhp &amp;lt;= 59 and memberhp &amp;gt;= 40 then memberhp = memberhp - 30 end end
    if UnitBuffID(member, 23335) ~= nil then if memberhp &amp;lt;= 90 and memberhp &amp;gt;= 80 then memberhp = memberhp - 10 end end
    if UnitBuffID(member, 23335) ~= nil then if memberhp &amp;lt;=79 and memberhp &amp;gt;= 60 then memberhp = memberhp - 20 end end
    if UnitBuffID(member, 23335) ~= nil then if memberhp &amp;lt;= 59 and memberhp &amp;gt;= 40 then memberhp = memberhp - 30 end end
    if memberhp &amp;lt; 85 then lowhpmembers = lowhpmembers +1 end
    if memberhp &amp;lt; lowest then
      PQR_CustomTarget = member
      lowest = memberhp
      PQR_CustomTargetHP = 100 * UnitHealth(PQR_CustomTarget) / UnitHealthMax(PQR_CustomTarget)
    end
  end
end

end
PQ_StopDispelHP = PQR_CustomTargetHP</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earthbind Totem(Arena)</Name><Default>false</Default><SpellID>2484</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PvPslows 			= {
	45524,		-- Chains of Ice
	50435,		-- Chilblains
	115000,		-- Remorseless Winter
	50259,		-- Dazed 
	58180,		-- Infected Wounds
	61391,		-- Typhoon
	127797,		-- Ursol&amp;apos;s Vortex
	82941,		-- Ice Trap (Hunter)
	135299,		-- IceTrap Debuff
	35101,		-- Concussive Barrage
	5116,		-- Concussive Shot
	61394,		-- Frozen Wake 
	13810,		-- Ice Trap
	50433,		-- Ankle Crack 
	54644,		-- Frost Breath 
	121288,		-- Chilled 
	120,		-- Cone of Cold
	116,		-- Frostbolt
	44614,		-- Frostfire Bolt
	113092,		-- Frost Bomb
	31589,		-- Slow
	116095,		-- Disable
	118585,		-- Leer of the Ox
	123727,		-- Dizzying Haze
	123586,		-- Flying Serpent Kick
	110300,		-- Burden of Guilt
	63529,		-- Dazed - Avenger&amp;apos;s Shield
	20170,		-- Seal of Justice
	15407,		-- Mind Flay
	3409,		-- Crippling Poison
	26679,		-- Deadly Throw
	119696,		-- Debilitation
	3600,		-- Earthbind 
	77478,		-- Earthquake 
	8034,		-- Frostbrand Attack
	8056,		-- Frost Shock
	51490,		-- Thunderstorm
	18223,		-- Curse of Exhaustion
	47960,		-- Shadowflame
	1715,		-- Hamstring
	12323,		-- Piercing Howl
	1604		-- Dazed 

				}
				
			
	
arena1slowed = false
arena2slowed = false
arena3slowed = false
				
for i=1, #PvPslows do
if UnitDebuffID(&amp;quot;arena1&amp;quot;, PvPslows[i]) ~= nil then
arena1slowed = true
end
end

for i=1, #PvPslows do
if UnitDebuffID(&amp;quot;arena2&amp;quot;, PvPslows[i]) ~= nil then
arena2slowed = true
end
end

if UnitExists(&amp;quot;arena3&amp;quot;) then
for i=1, #PvPslows do
if UnitDebuffID(&amp;quot;arena3&amp;quot;, PvPslows[i]) ~= nil then
arena3slowed = true
end
end
end

-- Arena 1
				
if UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Hunter&amp;quot;
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;arena1&amp;quot;) 
and arena1slowed == false 
and PlayerHP &amp;lt; 80 then

if not PQR_SpellAvailable(2484) then
CastSpellByID(108269)
end

if PQR_SpellAvailable(2484) then
return true
end
end

-- Arena 2

if UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Hunter&amp;quot;
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;arena2&amp;quot;) 
and arena2slowed == false 
and PlayerHP &amp;lt; 80 then

if not PQR_SpellAvailable(2484) then
CastSpellByID(108269)
end

if PQR_SpellAvailable(2484) then
return true
end
end

-- Arena 3

if UnitExists(&amp;quot;arena3&amp;quot;) then
if UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Hunter&amp;quot;
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;arena3&amp;quot;) 
and arena3slowed == false 
and PlayerHP &amp;lt; 80 then

if not PQR_SpellAvailable(2484) then
CastSpellByID(108269)
end

if PQR_SpellAvailable(2484) then
return true
end
end
end</Lua><RecastDelay>3500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Flag Return (BG)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local flag = { &amp;quot;Alliance Flag&amp;quot;, &amp;quot;Horde Flag&amp;quot;  }

for _,v in ipairs(flag) do InteractUnit(v) end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Frost Shock(Melee)</Name><Default>false</Default><SpellID>8056</SpellID><Actions></Actions><Lua>local immunity 	= {
					-- HUNTER
						54216,
						19263,
					-- PALADIN (Hand of Freedom / Hand of Protection / Divine Shield)
						1044,
						642,
					-- PRIEST (Dispersion)
						47585,
					-- ROGUE(cloak of shadows)
						31224,
					
					-- SHAMAN (Windwalk Totem)
						114896,
					-- WARRIOR Bladestorm
						46924
				}
				
				
if UnitExists(&amp;quot;target&amp;quot;) == nil
or (UnitExists(&amp;quot;target&amp;quot;) == 1 and UnitIsEnemy(&amp;quot;target&amp;quot;, &amp;quot;player&amp;quot;) == nil) then
return false
end

for i=1, #immunity do
if UnitBuffID(&amp;quot;target&amp;quot;, immunity[i]) ~= nil then
return false
end
end

if UnitExists(&amp;quot;target&amp;quot;) 
and UnitIsEnemy(&amp;quot;target&amp;quot;, &amp;quot;player&amp;quot;) 
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;target&amp;quot;) == 1
and PQR_SpellAvailable(8056)
and PQR_CustomTargetHP &amp;gt; 75
and (UnitClass(&amp;quot;target&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;target&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;target&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;target&amp;quot;) ~= &amp;quot;Hunter&amp;quot;) then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Tide Totem 3s (Arena)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local Party1HP = 100 * UnitHealth(&amp;quot;party1&amp;quot;) / UnitHealthMax(&amp;quot;party1&amp;quot;)

local Party2HP = 100 * UnitHealth(&amp;quot;party2&amp;quot;) / UnitHealthMax(&amp;quot;party2&amp;quot;)

if PQR_SpellAvailable(108280) == false then
return false
end

if PQR_SpellAvailable(108280)
and (PlayerHP &amp;lt; 40 and Party1HP &amp;lt; 90) or (PlayerHP &amp;lt; 60 and Party2HP &amp;lt; 60) or (Party1HP &amp;lt; 65 and Party2HP &amp;lt; 65)  then
CastSpellByID(108280)
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mana Tide Totem(Arena) 60%</Name><Default>false</Default><SpellID>16190</SpellID><Actions></Actions><Lua>local HStimer, HSTotem = GetTotemInfo(3)

if 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) &amp;lt; 60
and HSTotem ~= GetSpellInfo(108280)
and HSTotem ~= GetSpellInfo(5394)
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spirit Link(Arena)</Name><Default>false</Default><SpellID>98008</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local Party1HP = 100 * UnitHealth(&amp;quot;party1&amp;quot;) / UnitHealthMax(&amp;quot;party1&amp;quot;)

local Party2HP = 100 * UnitHealth(&amp;quot;party2&amp;quot;) / UnitHealthMax(&amp;quot;party2&amp;quot;)

if PQR_SpellAvailable(98008) == false then
return false
end

if PQR_SpellAvailable(98008)
and (PlayerHP &amp;lt; 44 or Party1HP &amp;lt; 44 or Party2HP &amp;lt; 44) then

if PlayerHP &amp;lt; 44
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party1&amp;quot;) &amp;lt; 15
or PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party2&amp;quot;) &amp;lt; 15   then
return true
end

if Party1HP &amp;lt; 44
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party1&amp;quot;) &amp;lt; 15 then
return true
end

if Party2HP &amp;lt; 44
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party2&amp;quot;) &amp;lt; 15 then
return true
end

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Unleash Elements(Arena-if NS CD)</Name><Default>false</Default><SpellID>0</SpellID><Actions>/cast [help,nodead][@player]Unleash Elements|/cast Blood Fury(Racial)</Actions><Lua>if members[1].HP &amp;lt; 50 
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>500</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Purify Spirit BG&amp;apos;s</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1,#members do 
    if HaveDebuff(members[i].Unit,{51514,80240,118,11129,115001,115078,8122,5484,5782,20066,853,1499,113724,44572,51514,2637,6789,15487,113792,113092,105593,115750}) 
    and UnitInRange(members[i].Unit)
    and not HaveDebuff(members[i].Unit,34914)
and IsHealer(members[i].Unit)
    then
      PQR_CustomTarget = members[i].Unit
       return true end
    end


for i=1,#members do 
    if HaveDebuff(members[i].Unit,{51514,80240,118,11129,115001,115078,8122,5484,5782,20066,853,1499,113724,44572,51514,2637,6789,15487,113792,113092,105593,115750}) 
    and UnitInRange(members[i].Unit)
    and not HaveDebuff(members[i].Unit,34914)
    then
      PQR_CustomTarget = members[i].Unit
       return true end
    end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earthbind/Capacitor Totem(Arena)</Name><Default>false</Default><SpellID>2484</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PvPslows 			= {
	45524,		-- Chains of Ice
	50435,		-- Chilblains
	115000,		-- Remorseless Winter
	50259,		-- Dazed 
	58180,		-- Infected Wounds
	61391,		-- Typhoon
	127797,		-- Ursol&amp;apos;s Vortex
	82941,		-- Ice Trap (Hunter)
	135299,		-- IceTrap Debuff
	35101,		-- Concussive Barrage
	5116,		-- Concussive Shot
	61394,		-- Frozen Wake 
	13810,		-- Ice Trap
	50433,		-- Ankle Crack 
	54644,		-- Frost Breath 
	121288,		-- Chilled 
	120,		-- Cone of Cold
	116,		-- Frostbolt
	44614,		-- Frostfire Bolt
	113092,		-- Frost Bomb
	31589,		-- Slow
	116095,		-- Disable
	118585,		-- Leer of the Ox
	123727,		-- Dizzying Haze
	123586,		-- Flying Serpent Kick
	110300,		-- Burden of Guilt
	63529,		-- Dazed - Avenger&amp;apos;s Shield
	20170,		-- Seal of Justice
	15407,		-- Mind Flay
	3409,		-- Crippling Poison
	26679,		-- Deadly Throw
	119696,		-- Debilitation
	3600,		-- Earthbind 
	77478,		-- Earthquake 
	8034,		-- Frostbrand Attack
	8056,		-- Frost Shock
	51490,		-- Thunderstorm
	18223,		-- Curse of Exhaustion
	47960,		-- Shadowflame
	1715,		-- Hamstring
	12323,		-- Piercing Howl
	1604		-- Dazed 

				}
				
			
	
arena1slowed = false
arena2slowed = false
arena3slowed = false
				
for i=1, #PvPslows do
if UnitDebuffID(&amp;quot;arena1&amp;quot;, PvPslows[i]) ~= nil then
arena1slowed = true
end
end

for i=1, #PvPslows do
if UnitDebuffID(&amp;quot;arena2&amp;quot;, PvPslows[i]) ~= nil then
arena2slowed = true
end
end

if UnitExists(&amp;quot;arena3&amp;quot;) then
for i=1, #PvPslows do
if UnitDebuffID(&amp;quot;arena3&amp;quot;, PvPslows[i]) ~= nil then
arena3slowed = true
end
end
end

-- Arena 1
				
if UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;arena1&amp;quot;) ~= &amp;quot;Hunter&amp;quot;
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;arena1&amp;quot;) 
and arena1slowed == false 
and PlayerHP &amp;lt; 80 then

if not PQR_SpellAvailable(2484) then
CastSpellByID(108269)
end

if PQR_SpellAvailable(2484) then
return true
end
end

-- Arena 2

if UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;arena2&amp;quot;) ~= &amp;quot;Hunter&amp;quot;
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;arena2&amp;quot;) 
and arena2slowed == false 
and PlayerHP &amp;lt; 80 then

if not PQR_SpellAvailable(2484) then
CastSpellByID(108269)
end

if PQR_SpellAvailable(2484) then
return true
end
end

-- Arena 3

if UnitExists(&amp;quot;arena3&amp;quot;) then
if UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Mage&amp;quot; and UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Warlock&amp;quot; and UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Priest&amp;quot; and UnitClass(&amp;quot;arena3&amp;quot;) ~= &amp;quot;Hunter&amp;quot;
and IsSpellInRange(&amp;quot;Primal Strike&amp;quot;, &amp;quot;arena3&amp;quot;) 
and arena3slowed == false 
and PlayerHP &amp;lt; 80 then

if not PQR_SpellAvailable(2484) then
CastSpellByID(108269)
end

if PQR_SpellAvailable(2484) then
return true
end
end
end</Lua><RecastDelay>3500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ancestral Swiftness(Arena)</Name><Default>false</Default><SpellID>16188</SpellID><Actions>/cast [help,nodead][@player]Unleash Elements|/cast Blood Fury(Racial)|/y NS USED</Actions><Lua>if select(2,GetTalentRowSelectionInfo(4)) == 11
and members[1].HP &amp;lt; 40
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>4000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Riptide Moving(Arena)</Name><Default>false</Default><SpellID>61295</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 97
and not HaveBuff(members[1].Unit,61295,0,&amp;quot;PLAYER&amp;quot;) 
and not Nova_Moving
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>3000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Riptide(Arena)</Name><Default>false</Default><SpellID>61295</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 97
and not HaveBuff(members[1].Unit,61295,0,&amp;quot;PLAYER&amp;quot;) 
then
  PQR_CustomTarget = members[1].Unit
  return true
end</Lua><RecastDelay>3000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Battlemaster</Name><Default>false</Default><SpellID>0</SpellID><Actions>/use 13</Actions><Lua>local myhp = UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) * 100

if myhp &amp;lt; 30 then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge(Arena)+SWG+ &amp;gt; 85MP</Name><Default>false</Default><SpellID>8004</SpellID><Actions>/cast Blood Fury(Racial)|/cast Windwalk Totem</Actions><Lua>if members[1].HP &amp;lt; 50 
and not Nova_Moving
and UnitBuffID(&amp;quot;player&amp;quot;,79206)
and 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) &amp;gt; 85
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Wave(Arena)+SWG+ &amp;lt; 85MP</Name><Default>false</Default><SpellID>331</SpellID><Actions>/cast Blood Fury(Racial)|/cast Windwalk Totem</Actions><Lua>if members[1].HP &amp;gt; 68 
and members[1].HP &amp;lt; 99 
and not Nova_Moving
and UnitBuffID(&amp;quot;player&amp;quot;,79206)
and 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) &amp;lt; 85
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>20</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge(Arena)+CD CHECK</Name><Default>false</Default><SpellID>8004</SpellID><Actions>/cast Ascendance</Actions><Lua>local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)


if members[1].HP &amp;lt; 99 
and not Nova_Moving
and UnitExists(&amp;quot;arena1&amp;quot;)
or UnitExists(&amp;quot;arena2&amp;quot;)
or UnitExists(&amp;quot;arena3&amp;quot;)
or UnitExists(&amp;quot;arena4&amp;quot;)
or UnitExists(&amp;quot;arena5&amp;quot;)
and cdCheck == true
and PlayerMana &amp;gt; 25
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Stormlash(Arena)w/Friendly CD&amp;apos;s</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1,#members do 
    if HaveBuff(members[i].Unit,{1719,121471,50334,49016,10060,106731,3045,113860,113861,113858,114049}) 
    and UnitInRange(members[i].Unit)
    then
  		PQR_CustomTarget = members[i].Unit
  		CastSpellByName(GetSpellInfo(120668),PQR_CustomTarget)
  		return true
	end
	end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wind Shear(Damage)</Name><Default>false</Default><SpellID>57994</SpellID><Actions>/stopcasting|/stopcasting</Actions><Lua>local InterruptSpells = { 79085, 51505, 117014, 2912, 78674, 5176, 16914, 116858, 30108, 1120, 48181, 6353, 8092, 34914, 12051, 7302, 6117, 112948, 30451, 11366 }
local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

if PQR_SpellAvailable(57994) then
	for y=1, 5 do
		local aTarget = &amp;quot;arena&amp;quot;..tostring(y)
		if UnitExists(aTarget) 
		 and IsSpellInRange(GetSpellInfo(57994), aTarget) == 1 
		 and PlayerHP &amp;lt; 42
		 and PQR_UnitFacing(&amp;quot;player&amp;quot;, aTarget) then
			local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(aTarget)
			for i=1, #InterruptSpells do
				if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
					if select(2, Nova_CastingInfo(aTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,aTarget,180) 
then
						PQR_CustomTarget = aTarget
						return true
					end
				end
			end
		end
	end
	local fTarget = &amp;quot;focus&amp;quot;
	if UnitExists(fTarget) 
	 and IsSpellInRange(GetSpellInfo(57994), fTarget) == 1 
	 and PlayerHP &amp;lt; 42
	 and PQR_UnitFacing(&amp;quot;player&amp;quot;, fTarget) then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(fTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
		        if select(2, Nova_CastingInfo(fTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,fTarget,180) 
then
					PQR_CustomTarget = fTarget
					return true
				end
			end
		end
	end	
	local tTarget = &amp;quot;target&amp;quot;
	if UnitExists(tTarget) 
	 and IsSpellInRange(GetSpellInfo(57994), tTarget) == 1 
	 and PlayerHP &amp;lt; 42
	 and PQR_UnitFacing(&amp;quot;player&amp;quot;, tTarget) then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(tTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
				if select(2, Nova_CastingInfo(tTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,tTarget,180) 
then
					PQR_CustomTarget = tTarget
					return true
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wind Shear(Arena Heals/CC)</Name><Default>false</Default><SpellID>57994</SpellID><Actions>/stopcasting|/stopcasting</Actions><Lua>local InterruptSpells = { 331, 77472, 73920, 8004, 8936, 50464, 5185, 740, 2061, 2060, 32546, 64843, 47540,  19750, 82326, 7328, 54428, 82327, 115175, 124682, 116694, 116694, 51514, 33786, 2637, 5782, 111771, 5232, 710, 605, 9484, 32375, 20066, 118, 61305, 28272, 61721, 61780, 28271, 2641, 1513, 982 }

if PQR_SpellAvailable(57994) then
	for y=1, 5 do
		local aTarget = &amp;quot;arena&amp;quot;..tostring(y)
		if UnitExists(aTarget) 
		 and IsSpellInRange(GetSpellInfo(57994), aTarget) == 1 
		 and PQR_UnitFacing(&amp;quot;player&amp;quot;, aTarget) then
			local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(aTarget)
			for i=1, #InterruptSpells do
				if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
					if select(2, Nova_CastingInfo(aTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,aTarget,180) 
then
						PQR_CustomTarget = aTarget
						return true
					end
				end
			end
		end
	end
	local fTarget = &amp;quot;focus&amp;quot;
	if UnitExists(fTarget) 
	 and IsSpellInRange(GetSpellInfo(57994), fTarget) == 1 
	 and PQR_UnitFacing(&amp;quot;player&amp;quot;, fTarget) then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(fTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
		        if select(2, Nova_CastingInfo(fTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,fTarget,180) 
then
					PQR_CustomTarget = fTarget
					return true
				end
			end
		end
	end
	local tTarget = &amp;quot;target&amp;quot;
	if UnitExists(tTarget) 
	 and IsSpellInRange(GetSpellInfo(57994), tTarget) == 1 
	 and PQR_UnitFacing(&amp;quot;player&amp;quot;, tTarget) then
		local spellName, _, _, _, startCast, endCast, _, _, canInterrupt = UnitCastingInfo(tTarget)
		for i=1, #InterruptSpells do
			if GetSpellInfo(InterruptSpells[i]) == spellName and canInterrupt == false then
				if select(2, Nova_CastingInfo(tTarget)) &amp;gt;= 20 
and PQR_UnitFacing(&amp;quot;player&amp;quot;,tTarget,180) 
then
					PQR_CustomTarget = tTarget
					return true
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Surge(Arena, WIZ)</Name><Default>false</Default><SpellID>8004</SpellID><Actions></Actions><Lua>if members[1].HP &amp;lt; 40 
and not Nova_Moving
then
  PQR_CustomTarget = members[1].Unit
  SpellStopCasting()
  return true
end</Lua><RecastDelay>300</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Hex Focus</Name><Default>false</Default><SpellID>51514</SpellID><Actions></Actions><Lua>if IsLeftAltKeyDown() then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spirit Link Totem(Left Ctrl)</Name><Default>false</Default><SpellID>98008</SpellID><Actions></Actions><Lua>if IsLeftControlKeyDown() then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></SHAMAN>