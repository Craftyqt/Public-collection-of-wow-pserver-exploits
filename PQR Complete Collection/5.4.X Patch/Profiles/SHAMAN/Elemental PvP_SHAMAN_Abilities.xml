<?xml version="1.0" encoding="utf-8" ?><SHAMAN><Ability><Name>-- Start Fight --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,5384)
or UnitInVehicle(&amp;quot;player&amp;quot;)
or UnitIsDead(&amp;quot;target&amp;quot;) 
or UnitIsDead(&amp;quot;player&amp;quot;)
or UnitBuffID(&amp;quot;player&amp;quot;, 77769)
or not UnitAffectingCombat(&amp;quot;player&amp;quot;) then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Lightning Bolt</Name><Default>false</Default><SpellID>403</SpellID><Actions></Actions><Lua>return true</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Lava Burst</Name><Default>false</Default><SpellID>51505</SpellID><Actions></Actions><Lua>local flameshock = UnitDebuffID(&amp;quot;target&amp;quot;,8050,&amp;quot;PLAYER&amp;quot;) 

if flameshock then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Main Hand</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local hwv, hwd  = GetWeaponEnchantInfo()

if hwv ~= 1 then
	CastSpellByID(8024)
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Flame Shock</Name><Default>false</Default><SpellID>8050</SpellID><Actions></Actions><Lua>local debufftimer = select(7,UnitDebuffID(&amp;quot;target&amp;quot;,8050,&amp;quot;PLAYER&amp;quot;)) 

if not debufftimer 
or debufftimer - GetTime() &amp;lt; 7  

then
return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Lightning Shield</Name><Default>false</Default><SpellID>324</SpellID><Actions></Actions><Lua>if UnitBuffID( &amp;quot;player&amp;quot;, 324 ) == nil then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Stormlash Totem</Name><Default>false</Default><SpellID>120668</SpellID><Actions></Actions><Lua>if UseCD
and AutoStormlash then

	return true

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Searing Totem</Name><Default>false</Default><SpellID>3599</SpellID><Actions></Actions><Lua>local arg1, totemName, startTime, duration = GetTotemInfo( 1 )
local est_dur = startTime+duration-GetTime() 

if est_dur &amp;lt; 1 then
	return true	
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Fire Ele</Name><Default>false</Default><SpellID>2894</SpellID><Actions></Actions><Lua>if burstKey then

	return true

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Elemental Blast</Name><Default>false</Default><SpellID>117014</SpellID><Actions></Actions><Lua>Ascendance = UnitBuffID(&amp;quot;player&amp;quot;, 114050)
if not Ascendance then

return true

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Earth Shock</Name><Default>false</Default><SpellID>8042</SpellID><Actions></Actions><Lua>local arg1, arg2, arg3, arg4 = UnitBuffID( &amp;quot;player&amp;quot;, 324 )

	if arg1 ~= nil then

		if arg4 &amp;gt;= 7 then
		
			return true

		end

	end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing : Healing Stream Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(5394) then
	for i=1, #members do
		if members[i].HP &amp;lt; hstHp 
		and PQR_IsOutOfSight(members[i].Unit) == false 
		and IsSpellInRange(GetSpellInfo(8004), members[i].Unit) == 1 
		and not UnitIsEnemy(members[i].Unit, &amp;quot;player&amp;quot;) then
			_castSpell(5394)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Lightning Bolt(Mov)</Name><Default>false</Default><SpellID>403</SpellID><Actions></Actions><Lua>if  PQR_IsMoving(1)then

return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Lava Burst(Moving)</Name><Default>false</Default><SpellID>51505</SpellID><Actions></Actions><Lua>local LavaSurge =  UnitBuffID( &amp;quot;player&amp;quot;, 77762 )
local movecastthing =  UnitBuffID( &amp;quot;player&amp;quot;, 79206 )
local flameshock = UnitDebuffID(&amp;quot;target&amp;quot;,8050,&amp;quot;PLAYER&amp;quot;)

if PQR_IsMoving(1)
and flameshock
and LavaSurge 
or movecastthing
then

return true

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Elemental Blast(Moving)</Name><Default>false</Default><SpellID>117014</SpellID><Actions></Actions><Lua>local Ascendance = UnitBuffID(&amp;quot;player&amp;quot;, 114050)
local movecastthing =  UnitBuffID( &amp;quot;player&amp;quot;, 79206 )


if not Ascendance 
and PQR_IsMoving(1)
and movecastthing
then

return true

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--- Init ---</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Load LUA data files.
if PQR_RotationStarted then
	PQR_RotationStarted = false 
	
	-- Load required data files
	if PQR_LoadLua ~= nil then
		if PQR_LoadLua(&amp;quot;PQR_ShamanPvPLite.lua&amp;quot;) == false then
			PQR_WriteToChat(&amp;quot;|cffb73737You&amp;apos;re missing PQR_ShamanPvPLite.lua - Make sure it&amp;apos;s in your Data folder! The Rotation has been halted.|cffffffff&amp;quot;, &amp;quot;Error&amp;quot;)
			PQR_StopRotation()
			return true
		end
	end
end

 

GroupInfo() 


--Pause
if PauseKey 
or IsMounted() 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Grounding Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i = 1, #custTars do
	if UseGrounding(custTars[i]) then
		_castSpell(8177)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Tremor Totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _, talent = GetTalentRowSelectionInfo(4)
local fears = {
111397,  -- Blood Fear
5484,  -- Howl
8122,  -- scream
5782,   -- Fear
5246, -- Intimidating Shout
113004  -- Intimidating Shout (druid symbio) 
}

if PQR_SpellAvailable(8143) then
	for i = 1, #members do
		for f = 1, #fears do
			local isFeared, _, _, _, _, Dur = UnitDebuffID(members[i].Unit, fears[f])
			
			if isFeared
			and Dur &amp;gt;= 6  --Most full fears are 6 or 8 seconds
			and IsSpellInRange(GetSpellInfo(8004), members[i].Unit) == 1 then
				_castSpell(8143)
				
				if talent == 8 then
					RunMacroText(&amp;quot;/click TotemFrameTotem1 RightButton&amp;quot;)
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Purge Important</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) 

local purgeThis1 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness 

1022,   -- Hand of Protection

110909	--Alter time
}

if PQR_SpellAvailable(370) 
and PlayerHP &amp;gt; 50 then
	for i = 1, #custTars do
		if UnitExists(custTars[i]) then
			for j = 1, #purgeThis1 do
				if UnitBuffID(custTars[i], purgeThis1[j]) ~= nil
				and PQR_IsOutOfSight(custTars[i], 0.1) == false then
					_castSpell(370, custTars[i])
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Cooldowns</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local Ascendance = UnitBuffID(&amp;quot;player&amp;quot;, 114050)
local AscendanceAvil = PQR_SpellAvailable(114049)

if burstKey then

	-- Gloves
	if GetInventoryItemCooldown(&amp;quot;player&amp;quot;,10) == 0 then 
			UseInventoryItem(10)
	end
	
	--Trinkets
	if GetInventoryItemCooldown(&amp;quot;player&amp;quot;,13) == 0 then 
			UseInventoryItem(13)
	end
	
	--Orc
	if PQR_SpellAvailable(33697) then
		CastSpellByName(tostring(GetSpellInfo(33697)))  
	end
	
	--Troll
	if PQR_SpellAvailable(26297) then 
		CastSpellByName(tostring(GetSpellInfo(26297))) 
	end
	
	--Elem Mastery
	if PQR_SpellAvailable(16166) then 
		_castSpell(16166)
	end
	
	--AS
	if PQR_SpellAvailable(16188)  then 
		_castSpell(16188)
	end
	
	--Ascendance
	if not Ascendance 
	and AscendanceAvil  
	and cdRemains(2894) &amp;gt; 2 then
		_castSpell(114049)
	end	
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Defensives</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if DefenciveKey then	
  CastSpellByName(tostring(GetSpellInfo(108271)))
  CastSpellByName(tostring(GetSpellInfo(30823))) 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Windwalk totem</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>RootsandSlows = {339,102359,122,96294,91807, 19975, 128405, 45334,102359,110693, 50245,54706,4167,111340,116706,113275,123407,113275,87194,114404,115197,64695,63685,107566}






if PQR_SpellAvailable(108273) then 
	for i=1, #members do
		for j = 1, #RootsandSlows do
			if UnitDebuffID(members[i].Unit,RootsandSlows[j]) then
				_castSpell(108273)
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Purge</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

local purgeThis2 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness

12472,  -- Icy Veins

1022,   -- Hand of Protection

11426,   -- Ice Barrier

20925,  -- Sacred Shield

114250,   -- Selfless Healer

17    -- Power Word: Shield

}

if PQR_SpellAvailable(370)  
and PlayerMana &amp;gt; 50 then
	for i = 1, #custTars do
		if UnitExists(custTars[i]) then
			for j = 1, #purgeThis2 do
				if UnitBuffID(custTars[i], purgeThis2[j]) ~= nil
				and UnitCanAttack(&amp;quot;player&amp;quot;,custTars[i]) ~= nil
				and PQR_IsOutOfSight(custTars[i], 0.1) == false then
					_castSpell(370, custTars[i])
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>All : Hex</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local HexCD = select(2,GetSpellCooldown(51514))

if HexKey
and HexCD &amp;lt; 2 then
	if UnitExists(&amp;quot;focus&amp;quot;)
	and UnitIsEnemy(&amp;quot;focus&amp;quot;, &amp;quot;player&amp;quot;)
	and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 0.1) == false
	and IsSpellInRange(GetSpellInfo(51514), &amp;quot;focus&amp;quot;) == 1 then
		_castSpell(51514, &amp;quot;focus&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ele : Earthquake</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if EarthquakeKey then
	if IsSpellKnown(61882) then
		CastSpellByName(GetSpellInfo(61882))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- Options --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Keybinds
DefenciveKey		= IsLeftShiftKeyDown()	
--					= IsLeftControlKeyDown()
--					= IsRightAltKeyDown()
--					= IsRightShiftKeyDown()
--					= IsRightControlKeyDown()
PauseKey			= IsLeftAltKeyDown()
burstKey			= IsMouseButtonDown(3)  --When you push down the scroll button on mouse(usually)
EarthquakeKey		= IsMouseButtonDown(4)  --MouseButton4 depends on mouse
HexKey				= IsMouseButtonDown(5)  --MouseButton5 depends on mouse


--List of UsableKey Variables.
-- DefenciveKey 
-- pauseKey
-- burstKey
-- HealingRainKey
-- HexKey


-- OPTIONS -- 

--Healing Surge
hsHp = 60

--Healing Stream
hstHp = 80

AutoStormlash = false</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></SHAMAN>