<?xml version="1.0" encoding="utf-8" ?><SHAMAN><Ability><Name>[] Data Files []</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- I only have this for getting spell IDs
if not PQR_LoadLua(&amp;quot;PQR_idTip_core.lua&amp;quot;) then
	PQR_WriteToChat(&amp;quot;You are missing a key file: PQR_idTip_core.lua. Please put this file in the Data folder and reload PQR. Thank You!&amp;quot;, &amp;quot;Error&amp;quot;)
	PQR_RotationStop()
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shield and Weapons</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local mainhand, _, _, offhand = GetWeaponEnchantInfo()

if not IsMounted() then
if not UnitBuffID(&amp;quot;player&amp;quot;, 324) then
	CastSpellByName(GetSpellInfo(324), &amp;quot;player&amp;quot;)
end

if not mainhand then
	CastSpellByName(GetSpellInfo(8232), &amp;quot;player&amp;quot;)
elseif not offhand then
	CastSpellByName(GetSpellInfo(8024), &amp;quot;player&amp;quot;)
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Totems</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _, searing = GetTotemInfo(1)
local searingtime = GetTotemTimeLeft(1)

if not AoEsixplus then
--Prevent from not replacing Fire Elemental
	if searing == GetSpellInfo(2894) then
		return false
--Put down Searing Totem
	elseif select(4, UnitBuffID(&amp;quot;player&amp;quot;, 77661)) ~= 5 then
		if searingtime &amp;lt; 2 then
			CastSpellByName(GetSpellInfo(3599), &amp;quot;target&amp;quot;)
		end
	end
else
--Put down Magma Totem
	if AoEsixplus then
		if searing == GetSpellInfo(3599) then
			CastSpellByName(GetSpellInfo(8190), &amp;quot;target&amp;quot;)
		elseif searingtime &amp;lt; 2 then
			CastSpellByName(GetSpellInfo(8190), &amp;quot;target&amp;quot;)
		end
	end
end

--if Magma Totem is out, and not 6+ targets then go back to Searing
if searing == GetSpellInfo(8190) and not AoEsixplus then
	CastSpellByName(GetSpellInfo(3599))
end

--if no target exists and player isnt in combat, recall totems
if not UnitAffectingCombat(&amp;quot;player&amp;quot;) and not UnitExists(&amp;quot;target&amp;quot;) then
	CastSpellByName(GetSpellInfo(36936), &amp;quot;player&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Stormstrike</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and not UnitBuffID(&amp;quot;player&amp;quot;, 114051) then
	if select(2, GetSpellCooldown(17364)) == 0 then
		CastSpellByName(GetSpellInfo(17364), &amp;quot;target&amp;quot;)
	end
elseif UnitExists(&amp;quot;target&amp;quot;) and UnitBuffID(&amp;quot;player&amp;quot;, 114051) then
	if select(2, GetSpellCooldown(115356)) == 0 then
		CastSpellByName(GetSpellInfo(115356), &amp;quot;target&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Flame Shock</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and not UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;) then
	if UnitBuffID(&amp;quot;player&amp;quot;, 73683) and select(2, GetSpellCooldown(8050)) == 0 then
		CastSpellByName(GetSpellInfo(8050), &amp;quot;target&amp;quot;)
	end
elseif UnitExists(&amp;quot;target&amp;quot;) and select(7, UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;)) - GetTime() &amp;lt; 3 then
	if UnitBuffID(&amp;quot;player&amp;quot;, 73683) then
		CastSpellByName(GetSpellInfo(8050), &amp;quot;target&amp;quot;)
	end
else
	if AoE and select(2, GetSpellCooldown(73680)) ~= 0
	 and not UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;) then
	 	if select(2, GetSpellCooldown(8050)) == 0 then
			CastSpellByName(GetSpellInfo(8050), &amp;quot;target&amp;quot;)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Unleash Elements</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and select(2, GetSpellCooldown(73680)) == 0 then
	CastSpellByName(GetSpellInfo(73680))
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Lightning Bolt</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and not AoE then
	if select(4, UnitBuffID(&amp;quot;player&amp;quot;, 53817)) == 5 then
		CastSpellByName(GetSpellInfo(403), &amp;quot;target&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Lava Lash</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and not AoE then
	if select(4, UnitBuffID(&amp;quot;player&amp;quot;, 77661)) == 5 then
		CastSpellByName(GetSpellInfo(60103), &amp;quot;target&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Earth Shock</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;) then
	if select(7, UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;)) - GetTime() &amp;gt; 4 then
		if select(2, GetSpellCooldown(8042)) == 0 then
			CastSpellByName(GetSpellInfo(8042), &amp;quot;target&amp;quot;)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[] Pause []</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if vattack ~= &amp;quot;on&amp;quot; then
	if IsLeftAltKeyDown()
	or IsMounted()
	or SpellIsTargeting()
	or UnitBuffID(&amp;quot;player&amp;quot;,5384)
	or UnitInVehicle(&amp;quot;player&amp;quot;)
	or UnitIsDead(&amp;quot;target&amp;quot;) 
	or UnitIsDead(&amp;quot;player&amp;quot;)
	or UnitBuffID(&amp;quot;player&amp;quot;, 77769)
	or not UnitAffectingCombat(&amp;quot;player&amp;quot;) then
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[] Hot Keys []</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if modtime == nil then
	modtime = 0
end

if IsRightControlKeyDown() and not GetCurrentKeyBoardFocus() and GetTime() - modtime &amp;gt; 0.3 then
	modtime = GetTime()
	if UseCD then
		UseCD = false
		PQR_WriteToChat(&amp;quot;Cooldowns: \124cFFE61515Disabled&amp;quot;)
	else
		UseCD = true
		PQR_WriteToChat(&amp;quot;Cooldowns: \124cFF15E615Enabled&amp;quot;)
	end
end

if IsRightAltKeyDown() and not GetCurrentKeyBoardFocus() and GetTime() - modtime &amp;gt; 1 then
	modtime = GetTime()
	if AoE then
		AoE = false
		PQR_WriteToChat(&amp;quot;Area of Effect: \124cFFE61515Disabled&amp;quot;)
	else
		AoE = true
		PQR_WriteToChat(&amp;quot;Area of Effect: \124cFF15E615Enabled&amp;quot;)
	end
end

if IsRightShiftKeyDown() and not GetCurrentKeyBoardFocus() and GetTime() - modtime &amp;gt; 1 then
	modtime = GetTime()
	if AoEsixplus then
		AoEsixplus = false
		PQR_WriteToChat(&amp;quot;Using Searing totem now&amp;quot;)
	else
		AoEsixplus = true
		PQR_WriteToChat(&amp;quot;Using Magma totem now&amp;quot;)
	end
end

--------------------
-- Slash Commands
--------------------
function getVar(var,var2)
	if var2 == &amp;quot;on&amp;quot; then
		print(var .. &amp;quot; = |cFF00FF00ON&amp;quot;)
	end
	
	if var2 == &amp;quot;off&amp;quot; then
		print(var .. &amp;quot; = |cFFFF0000OFF&amp;quot;)
	end
	
end

function setVar()
	vattack = &amp;quot;off&amp;quot;
end

--- Attack all ---
SLASH_attack1 = &amp;quot;/attack&amp;quot;
local function attack(attack, editbox)
	if attack == &amp;quot;on&amp;quot; then
		vattack = &amp;quot;on&amp;quot;
		getVar(&amp;quot;Free casting&amp;quot;,vattack)
	elseif attack == &amp;quot;off&amp;quot; then
		vattack = &amp;quot;off&amp;quot;
		getVar(&amp;quot;Free casting&amp;quot;, vattack)
	end
end
SlashCmdList[&amp;quot;attack&amp;quot;] = attack</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ascendance</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UseCD then
	if UnitExists(&amp;quot;target&amp;quot;) and select(2, GetSpellCooldown(114049)) == 0 then
		CastSpellByName(GetSpellInfo(114049), &amp;quot;player&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>AoE: Fire Nova</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if AoE then
	if UnitExists(&amp;quot;target&amp;quot;) and UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;) and select(2, GetSpellCooldown(60103)) ~= 0 then
		CastSpellByName(GetSpellInfo(1535), &amp;quot;target&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Feral Spirit</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and UseCD then
	if select(2, GetSpellCooldown(51533)) == 0 then
		CastSpellByName(GetSpellInfo(51533), &amp;quot;player&amp;quot;)
	end
elseif not UseCD then
	if UnitExists(&amp;quot;target&amp;quot;) and 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 50
	 and select(2, GetSpellCooldown(51533)) == 0 then
		CastSpellByName(GetSpellInfo(51533), &amp;quot;player&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Fire Elemental</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) and UseCD then
	if select(2, GetSpellCooldown(2894)) == 0 then
		CastSpellByName(GetSpellInfo(2894))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>AoE: Lava Lash</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if AoE then
	if UnitExists(&amp;quot;target&amp;quot;) and UnitDebuffID(&amp;quot;target&amp;quot;, 8050, &amp;quot;player&amp;quot;) then
		if select(2, GetSpellCooldown(60103)) == 0 then
			CastSpellByName(GetSpellInfo(60103), &amp;quot;target&amp;quot;)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>AoE: Chain Lightning</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if AoE then
	if UnitExists(&amp;quot;target&amp;quot;) and select(4, UnitBuffID(&amp;quot;player&amp;quot;, 53817)) == 5 then
		CastSpellByName(GetSpellInfo(421), &amp;quot;target&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Lightning Bolt Test</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local start, duration = GetSpellCooldown(73680)
local start2, duration2 = GetSpellCooldown(17364)
local start3, duration3 = GetSpellCooldown(60103)
local start4, duration4 = GetSpellCooldown(8042)

if not AoE then
if ( duration &amp;gt; 1.5 )
 and ( duration2 &amp;gt; 1.5 )
 and ( duration3 &amp;gt; 1.5 )
 and ( duration4 &amp;gt; 1.5 ) then
 	if select(4, UnitBuffID(&amp;quot;player&amp;quot;, 53817)) == 3 then
		CastSpellByName(GetSpellInfo(403), &amp;quot;target&amp;quot;)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Totem recall</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _, searing = GetTotemInfo(1)

--if no target exists and player isnt in combat, recall totems
if not UnitAffectingCombat(&amp;quot;player&amp;quot;) and not UnitExists(&amp;quot;target&amp;quot;) then
	if searing == GetSpellInfo(2894)
	 or searing == GetSpellInfo(3599)
	 or searing == GetSpellInfo(8190) then
		CastSpellByName(GetSpellInfo(36936), &amp;quot;player&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[] Stop Cast []</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitChannelInfo(&amp;quot;player&amp;quot;) then
	if UnitChannelInfo(&amp;quot;player&amp;quot;) == GetSpellInfo(403) then
		if select(4, UnitBuffID(&amp;quot;player&amp;quot;, 53817) ~= 3
		 or select(4, UnitBuffID(&amp;quot;player&amp;quot;, 53817) ~= 5 then
			return true
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></SHAMAN>