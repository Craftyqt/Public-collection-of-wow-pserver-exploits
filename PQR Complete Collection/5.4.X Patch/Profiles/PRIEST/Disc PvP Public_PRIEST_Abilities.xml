<?xml version="1.0" encoding="utf-8" ?><PRIEST><Ability><Name>-- Init --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Load LUA data files.
if PQR_RotationStarted then
 PQR_RotationStarted = false
 
 -- Load required data files
 if PQR_LoadLua ~= nil then
  if PQR_LoadLua(&amp;quot;PQR_PriestPvPLite_Data.lua&amp;quot;) == false then
   PQR_WriteToChat(&amp;quot;|cffb73737You&amp;apos;re missing PQR_PriestPvPLite_Data.lua - Make sure it&amp;apos;s in your Data folder! The Rotation has been halted.|cffffffff&amp;quot;, &amp;quot;Error&amp;quot;)
   PQR_StopRotation()
   return true
  end  
 end
end


GroupInfo() 

--Pause
if PauseKey 
or IsMounted() 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>SWDExecute</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #cTar do
	cTarHP =  100 * UnitHealth(cTar[i]) / UnitHealthMax(cTar[i])
	
	if UnitExists(cTar[i])
	and UnitCanAttack(&amp;quot;player&amp;quot;, cTar[i]) ~= nil
	and not LineOfSight(cTar[i])
	and cTarHP &amp;lt; 20 then
		_castSpell(32379, cTar[i])
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Flash Heal</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(2061) then
	for i=1, #members do 
		if members[i].HP &amp;lt; FlashHealHP 
		and not LineOfSight(members[i].Unit)
		and not PQR_IsMoving(.5)  then
	  		_castSpell(2061, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Divine Star</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(110744) then
for i=1, #members do 
	if members[i].HP &amp;lt; 65 then
   		_castSpell(110744)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>FearWard</Name><Default>false</Default><SpellID>6346</SpellID><Actions></Actions><Lua>if AutoFearWard
and not UnitBuffID(&amp;quot;player&amp;quot;,6346) then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>HolyFire</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(14914) 
and DPSKey
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) ~= nil
and not LineOfSight(&amp;quot;target&amp;quot;)
and not (select(2,GetTalentRowSelectionInfo(3)) == 9)  then
	_castSpell(14914, &amp;quot;target&amp;quot;) 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>InnerFire</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not UnitBuffID(&amp;quot;player&amp;quot;,588) 
and PQR_SpellAvailable(588) then
	CastSpellByName(tostring(GetSpellInfo(588),nil))	 
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>InnerFocusFH</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i = 1, #members do
	if PQR_SpellAvailable(89485) 
	and members[i].HP &amp;lt; 50 then
  		_castSpell(89485) 
 		_castSpell(2061,members[i].Unit)
  
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>SHEEPSWD</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local InterruptSpells = {	 
						118,		-- Polymorph
						61305,		-- Polymorph: Black Cat
						28272,		-- Polymorph: Pig
						61721,		-- Polymorph: Rabbit
						61780,		-- Polymorph: Turkey
						28271,		-- Polymorph: Turtle
						20066, 		-- Repantance
						115750		-- Blinding Light
						}

if PQR_SpellAvailable(129176) then
	for i=1, #cTar do
		if UnitExists(cTar[i]) then
		local spellName, _, _, _, _, endCast, _, _, canInterrupt = UnitCastingInfo(cTar[i])
			for _, v in ipairs(InterruptSpells) do
				if GetSpellInfo(v) == spellName and canInterrupt == false then
					if ((endCast/1000) - GetTime()) &amp;lt; 0.3  then
						SpellStopCasting()
						SpellStopCasting()
						SpellStopCasting()
						CastSpellByName(GetSpellInfo(129176),cTar[i])
					end
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Penance</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(47540) then
	for i = 1, #members do
		if members[i].HP &amp;lt; PenanceHP
		and not LineOfSight(members[i].Unit) 
		then 
	  		_castSpell(47540, members[i].Unit)
	  	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>PenanceDMG</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(47540) 
and DPSKey
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) ~= nil
and not LineOfSight(&amp;quot;target&amp;quot;)  then
	_castSpell(47540, &amp;quot;target&amp;quot;) 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>PowerWordFortitude</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not UnitBuffID(&amp;quot;player&amp;quot;,21562) --Power Word: Fortitude
and not UnitBuffID(&amp;quot;player&amp;quot;,469) --Commanding Shout
and not UnitBuffID(&amp;quot;player&amp;quot;,90364) --Qiraji Fortitude
and not UnitBuffID(&amp;quot;player&amp;quot;,109773) --Dark Intent
and not UnitChannelInfo(&amp;quot;player&amp;quot;)
and not UnitAffectingCombat(&amp;quot;player&amp;quot;)
and not UnitCastingInfo(&amp;quot;player&amp;quot;) then
	_castSpell(21562)
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>PowerWordShield</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(17) then
	for i=1, #members do
		if members[i].HP &amp;lt; PowerWordShieldHP
		and not HaveDebuff(members[i].Unit,6788)
		and not UnitBuffID(members[i].Unit,17)
		and not LineOfSight(members[i].Unit) then
		  _castSpell(17, members[i].Unit) 
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>PrayerOfMending</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(33076) then
	for i=1, #members do
		if members[i].HP &amp;lt; PrayerofMendingHP 
		and not LineOfSight(members[i].Unit) then
		 	_castSpell(33076, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Psyfiend</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PsyfiendKey then
	if IsSpellKnown(108921) then
		CastSpellByName(GetSpellInfo(108921))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
	
	
	if IsSpellKnown(605) 
	and UnitExists(&amp;quot;target&amp;quot;) then
		CastSpellByName(GetSpellInfo(605))
	end	
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>ShackleUndead</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;mouseover&amp;quot;) 
and members[1].HP &amp;gt; 70
and UnitCreatureType(&amp;quot;mouseover&amp;quot;) == &amp;quot;Undead&amp;quot;
and not UnitDebuffID(&amp;quot;mouseover&amp;quot;,9484) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;mouseover&amp;quot;) then
	CastSpellByName(GetSpellInfo(9484),&amp;quot;mouseover&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>SWP</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(589) 
and DPSKey
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) ~= nil
and PQR_IsOutOfSight(&amp;quot;target&amp;quot;, 0.1) == false  
and not UnitDebuffID(&amp;quot;target&amp;quot;, 589, &amp;quot;player&amp;quot;) then
	_castSpell(589, &amp;quot;target&amp;quot;) 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Smite</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(585) 
and DPSKey
and UnitExists(&amp;quot;target&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) ~= nil
and PQR_IsOutOfSight(&amp;quot;target&amp;quot;, 0.1) == false  then
	_castSpell(585, &amp;quot;target&amp;quot;) 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>PainSup</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(33206)
and AutoPainSup then
	for i = 1, #members do
		if members[i].HP &amp;lt; PainSupHP 
		and members[i].IsPlayer
		and not LineOfSight(members[i].Unit) 
		and not UnitBuffID(members[i].Unit, 45438) --Block
		and not UnitBuffID(members[i].Unit, 642) --Bubble
		and not UnitBuffID(members[i].Unit, 19263) --Deterrence
		and not UnitDebuffID(members[i].Unit, 33786) --Clone 
		then 
	    	_castSpell(33206, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Fear</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if FearKey then
	_castSpell(8122)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- Start Combat --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PauseKey
or IsMounted() 
or SpellIsTargeting()
or not UnitCanAttack(&amp;quot;Player&amp;quot;,&amp;quot;Target&amp;quot;)
or not UnitExists(&amp;quot;Target&amp;quot;)
or UnitBuffID(&amp;quot;Player&amp;quot;,80169)
or UnitBuffID(&amp;quot;Player&amp;quot;,87959)
or UnitChannelInfo(&amp;quot;Player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;Player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;Target&amp;quot;)
or not UnitAffectingCombat(&amp;quot;Player&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healthstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * (UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;))
local HealstoneCD = select(2,GetItemCooldown(5512))

if PlayerHP &amp;lt; HealthstoneHP then
	if HealstoneCD == 0 and GetItemCount(5512) &amp;gt; 0  then
    	UseItemByName(select(1,GetItemInfo(5512)), &amp;quot;player&amp;quot;)
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Archangel</Name><Default>false</Default><SpellID>81700</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(81700) then
	for i=1, #members do
	if members[1].HP &amp;lt; ArchangelHP then
		if UnitBuffID(&amp;quot;player&amp;quot;, 81661) 
		and select(4, UnitBuffID(&amp;quot;player&amp;quot;, 81661)) &amp;gt;= 5 then
			return true
		end
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Dispell Important CC</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1,#members do 
    if dispellableCC(members[i].Unit) 
    and members[i].IsPlayer
    and not LineOfSight(members[i].Unit)
    and not UnitDebuff(members[i].Unit, 30108,0) 
    and not UnitDebuff(members[i].Unit, 34914)
    and not UnitDebuff(members[i].Unit, 131736) then 
  		_castSpell(527,members[i].Unit)
  	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Heal</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(2050) then
	for i=1, #members do 
		if members[i].HP &amp;lt; HealHP 
		and not LineOfSight(members[i].Unit)
		and not PQR_IsMoving(.5) then
	  		_castSpell(2050, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Greater Heal</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(2060) then
	for i=1, #members do 
		if members[i].HP &amp;lt; GreaterHealHP 
		and not LineOfSight(members[i].Unit)
		and not PQR_IsMoving(.5) then
	  		_castSpell(2060, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Offencive Dispells</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)

local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)

local purgeThis2 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness

12472,  -- Icy Veins

1022,   -- Hand of Protection

11426,   -- Ice Barrier

20925,  -- Sacred Shield

114250,   -- Selfless Healer

17    -- Power Word: Shield

}

if PQR_SpellAvailable(528) 
and members[1].HP &amp;gt; 70
and PlayerMana &amp;gt; 70 then
	for i = 1, #cTar do
		if UnitExists(cTar[i]) then
			for j = 1, #purgeThis2 do
				if UnitBuffID(cTar[i], purgeThis2[j]) ~= nil
				and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) ~= nil
				and not LineOfSight(cTar[i]) then
					_castSpell(528, cTar[i])
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mass Dispell</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if MDKey then
	if IsSpellKnown(32375) then
		CastSpellByName(GetSpellInfo(32375))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Offencive Dispells @ 50%hp</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) 

local purgeThis1 = {

1044,   -- Hand of Freedom

6940,   -- Hand of Sacrifice

69369,   -- Predatory Swiftness 

1022,   -- Hand of Protection

110909	--Alter time
}

if PQR_SpellAvailable(528) 
and members[1].HP &amp;gt; 50 then
	for i = 1, #cTar do
		if UnitExists(cTar[i]) then
			for j = 1, #purgeThis1 do
				if UnitBuffID(cTar[i], purgeThis1[j]) ~= nil
				and PQR_IsOutOfSight(cTar[i], 0.1) == false then
					_castSpell(528, cTar[i])
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Barrier</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if BarrierKey then
	if IsSpellKnown(62618) then
		CastSpellByName(GetSpellInfo(62618))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Renew</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(139) then
	for i=1, #members do
		if members[i].HP &amp;lt; RenewHP 
		and not UnitBuffID(members[i].Unit, 139)
		and not LineOfSight(members[i].Unit) then
		 	_castSpell(139, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Life Grip</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if LifegripKey then
	_castSpell(73325, &amp;quot;target&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--- Options ---</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Keybinds
MDKey				 	= IsLeftShiftKeyDown()	
BarrierKey				= IsLeftControlKeyDown()
PauseKey				= IsLeftAltKeyDown()
--						= IsRightAltKeyDown()
--						= IsRightShiftKeyDown()
GripKey					= IsRightControlKeyDown() 
DPSKey					= IsMouseButtonDown(3)
FearKey					= IsMouseButtonDown(4)
PsyfiendKey				= IsMouseButtonDown(5)





AutoVoidShift			= true
VoidShiftHP				= 20
AutoFearWard			= true
AutoPainSup				= true
PainSupHP				= 35
HealthstoneHP			= 50
DesperatePrayerHP		= 30 

PowerWordShieldHP		= 95
PrayerofMendingHP		= 90
RenewHP					= 98
HealHP					= 85
FlashHealHP				= 60
GreaterHealHP			= 85
ArchangelHP				= 70
PenanceHP				= 85

--Safe hp to cast shift. Ex, if my my is greater then Safe HP 
--and my team mate&amp;apos;s HP is less then Void Shift HP then cast shift
SafeToShift				= 90</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- Drink Pause --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local DrinkingIDs = {
					118358 --Cobo Cola
}


for i = 1, #DrinkingIDs do
	if UnitBuffID(&amp;quot;player&amp;quot;, DrinkingIDs[i]) then
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- BG Options --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Keybinds
MDKey				 	= IsLeftShiftKeyDown()	
BarrierKey				= IsLeftControlKeyDown()
PauseKey				= IsLeftAltKeyDown()
--						= IsRightAltKeyDown()
--						= IsRightShiftKeyDown()
GripKey					= IsRightControlKeyDown() 
DPSKey					= IsMouseButtonDown(3)
FearKey					= IsMouseButtonDown(4)
PsyfiendKey				= IsMouseButtonDown(5)





AutoVoidShift			= true
VoidShiftHP				= 20
AutoFearWard			= true
AutoPainSup				= true
PainSupHP				= 35
HealthstoneHP			= 50
DesperatePrayerHP		= 30 

PowerWordShieldHP		= 85
PrayerofMendingHP		= 90
RenewHP					= 50
HealHP					= 85
FlashHealHP				= 85
GreaterHealHP			= 0
ArchangelHP				= 70
PenanceHP				= 85

--Safe hp to cast shift. Ex, if my my is greater then Safe HP 
--and my team mate&amp;apos;s HP is less then Void Shift HP then cast shift
SafeToShift				= 90</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- Flash Heal Play Options --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Keybinds
MDKey				 	= IsLeftShiftKeyDown()	
BarrierKey				= IsLeftControlKeyDown()
PauseKey				= IsLeftAltKeyDown()
--						= IsRightAltKeyDown()
--						= IsRightShiftKeyDown()
GripKey					= IsRightControlKeyDown() 
DPSKey					= IsMouseButtonDown(3)
FearKey					= IsMouseButtonDown(4)
PsyfiendKey				= IsMouseButtonDown(5)





AutoVoidShift			= true
VoidShiftHP				= 20
AutoFearWard			= true
AutoPainSup				= true
PainSupHP				= 35
HealthstoneHP			= 50
DesperatePrayerHP		= 30 

PowerWordShieldHP		= 95
PrayerofMendingHP		= 90
RenewHP					= 98
HealHP					= 95
FlashHealHP				= 85
GreaterHealHP			= 0
ArchangelHP				= 70
PenanceHP				= 85

--Safe hp to cast shift. Ex, if my my is greater then Safe HP 
--and my team mate&amp;apos;s HP is less then Void Shift HP then cast shift
SafeToShift				= 90</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Flash Heal Inner Focus</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local InnerFocus = UnitBuffID(&amp;quot;player&amp;quot;, 96267)


if PQR_SpellAvailable(2061) then
	for i=1, #members do 
		if members[i].HP &amp;lt; FlashHealHP 
		and InnerFocus 
		and not LineOfSight(members[i].Unit)
		and not PQR_IsMoving(.5)  then
	  		_castSpell(2061, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Pennance Inner Focus</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local InnerFocus = UnitBuffID(&amp;quot;player&amp;quot;, 96267)


if PQR_SpellAvailable(2061) then
	for i=1, #members do 
		if members[i].HP &amp;lt; PenanceHP
		and InnerFocus 
		and not LineOfSight(members[i].Unit)  then
	  		_castSpell(47540, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Void Shift</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local myHp = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)


if PQR_SpellAvailable(108968)
and AutoVoidShift then
	for i=1, #members do
		--Shift other people
		if members[i].HP &amp;lt; VoidShiftHP
		and members[i].IsPlayer
		and UnitName(members[i].Unit) ~= UnitName(&amp;quot;player&amp;quot;)
		and not UnitBuffID(members[i].Unit, 45438) --Block
		and not UnitBuffID(members[i].Unit, 642) --Bubble
		and not UnitBuffID(members[i].Unit, 19263) --Deterrence
		and not UnitDebuffID(members[i].Unit, 33786) --Clone
		and myHp &amp;gt; SafeToShift then
			SpellStopCasting()
			_castSpell(108968, members[i].Unit)
		end
		
		--Shift self.
		if myHp &amp;lt; VoidShiftHP
		and UnitName(members[i].Unit) ~= UnitName(&amp;quot;player&amp;quot;)
		and members[i].IsPlayer
		and members[i].HP &amp;gt; SafeToShift then
			SpellStopCasting()
			_castSpell(108968, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>ShadowFeind/Mindbender</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- mind bender
if PQR_SpellAvailable(123040) 
and UnitExists(&amp;quot;Target&amp;quot;)
and DPSKey then
	_castSpell(123040)
end


--ShadowFeind
if PQR_SpellAvailable(34433) 
and UnitExists(&amp;quot;Target&amp;quot;)
and DPSKey then
	_castSpell(34433)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Anti Stealth</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--RedRussian&amp;apos;s &amp;quot;Stealthers&amp;apos; Bane&amp;quot;

local rescan_period=2 --how often stealthed list is repopulated

local function IsStealthed(unit) --check if unit is stealthed
local stealth,prowl,shadowmeld=1784,5215,58984 --list of detectable stealth buffs may be incomplete!
	if ( UnitBuffID(unit,stealth) or UnitBuffID(unit,prowl) or UnitBuffID(unit,shadowmeld) ) then return true
	else return false
	end
end

local function Breaker() --instant stealth breaker, class dependent
	local _, playerClass = UnitClass(&amp;quot;player&amp;quot;)
	if playerClass == &amp;quot;WARRIOR&amp;quot; then
		return 57755 --Heroic Throw
	elseif playerClass == &amp;quot;PALADIN&amp;quot; then
		if PQR_SpellAvailable(879) then
			return 879 --Exorcism
		else	
			return 20271 --Judgment
		end	
	elseif playerClass == &amp;quot;HUNTER&amp;quot; then
		return 19503 --Scatter Shot
	elseif playerClass == &amp;quot;ROGUE&amp;quot; then
		if IsStealthed(&amp;apos;player&amp;apos;) then
			return 6770 --Sap
		else
			return 121733 --Throw
		end
	elseif playerClass == &amp;quot;PRIEST&amp;quot; then
		return 589 --Shadow Word: Pain
	elseif playerClass == &amp;quot;DEATHKNIGHT&amp;quot; then
		return 45477 --Icy Touch
	elseif playerClass == &amp;quot;SHAMAN&amp;quot; then
		return 8056 --Frost Shock
	elseif playerClass == &amp;quot;MAGE&amp;quot; then
		return 30455 --Ice Lance
	elseif playerClass == &amp;quot;WARLOCK&amp;quot; then
		return 77799 --Fel Flame
	elseif playerClass == &amp;quot;MONK&amp;quot; then
		return 115078 --Paralysis
	elseif playerClass == &amp;quot;DRUID&amp;quot; then
		if IsStealthed(&amp;apos;player&amp;apos;) then
			return 0 --do nothing
		else
			return 8921 --moonfire
		end
	else
		return 0 
	end
end

local breakername=GetSpellInfo(Breaker()) --localized breaker name for use with IsSpellInRange


------------------------BG/RBG--------------------------------
--get stealthed list
if not last_scan or GetTime()-last_scan&amp;gt;=rescan_period then --repopulate list every T seconds
last_scan=GetTime()
stealthed={} --depopulate stealthed list
currtarget=UnitName(&amp;apos;target&amp;apos;) --get current target&amp;apos;s name

	for j=1,GetNumBattlefieldScores() do --get player faction to make profile work in rbgs and arenas
	name1=GetBattlefieldScore(j) 
		if name1==UnitName(&amp;apos;player&amp;apos;) then 
		pfaction=select(6,GetBattlefieldScore(j)) 
		end 
	end

	for i=1, GetNumBattlefieldScores() do 
	name, killingBlows, honorableKills, deaths, honorGained, faction, rank, race, class = GetBattlefieldScore(i)
	matched_name=name:match(&amp;apos;[^-]+&amp;apos;) --filter out &amp;quot;-Realm&amp;quot; part
		if (class==&amp;quot;DRUID&amp;quot; or class==&amp;quot;ROGUE&amp;quot;) and faction~=pfaction and not UnitChannelInfo(&amp;apos;player&amp;apos;) then --target change is fatal to channgeling
		TargetUnit(name)
			if UnitName(&amp;apos;target&amp;apos;)~=matched_name or ( UnitName(&amp;apos;target&amp;apos;)==matched_name and IsStealthed(&amp;apos;target&amp;apos;) ) then --targeting attemp was unsuccessful or stealthed target was caught during list repopulation
			stealthed[name]=1
			end
		end
		if currtarget and UnitName(&amp;apos;target&amp;apos;)~=currtarget then TargetLastTarget() elseif not currtarget then ClearTarget() end --return to previous target after targeting stealther	
	end
end

--look for stealthed
if PQR_SpellAvailable(Breaker()) then --CD/GCD check to prevent excessive spam. NOTE: spell with ID 0 is never avalaible
oldtarget=UnitName(&amp;apos;target&amp;apos;) --get current target&amp;apos;s name
	for k,v in pairs(stealthed) do
		if not ( UnitCastingInfo(&amp;apos;player&amp;apos;) or UnitChannelInfo(&amp;apos;player&amp;apos;) ) and v==1 then --not on GCD &amp; not casting &amp; not channeling
		TargetUnit(k)
			if UnitName(&amp;apos;target&amp;apos;)==k:match(&amp;apos;[^-]+&amp;apos;) then --k is matched to be the same format with UnitName(&amp;apos;target&amp;apos;)
				if IsStealthed(&amp;apos;target&amp;apos;) and IsSpellInRange(breakername,&amp;apos;target&amp;apos;)==1 then --range check to prevent spam caused by stealth glitch
				CastSpellByID(Breaker(),&amp;apos;target&amp;apos;)
				else
				stealthed[k]=0	--exclude non-stealthed or too distant stealther from the list
				end
			end
		end	
		if oldtarget and UnitName(&amp;apos;target&amp;apos;)~=oldtarget then TargetLastTarget() elseif not oldtarget then ClearTarget() end --return to previous target after breaking stealth	
	end	
end
------------------------ARENA--------------------------------
for a=1,5 do
local arenatarget=&amp;apos;arena&amp;apos;..a
	if IsStealthed(arenatarget) then
	CastSpellByID(Breaker(),arenatarget)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Flash Heal FDCL</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local FromComeDarkness = UnitBuffID(&amp;quot;player&amp;quot;, 114255)


if PQR_SpellAvailable(2061) then
	for i=1, #members do  
		if members[i].HP &amp;lt; FlashHealHP 
		and FromComeDarkness
		and not LineOfSight(members[i].Unit) then
	  		_castSpell(2061, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></PRIEST>