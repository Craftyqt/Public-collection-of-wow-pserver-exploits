<?xml version="1.0" encoding="utf-8" ?><PRIEST><Ability><Name>[&amp;gt;Initialize&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Health Percentages 
AutoVoidShift			= true
VoidShiftHP				= 20
GuardianHP				= 24
HealthstoneHP			= 50
DesperatePrayerHP		= 30 
HWSerenityHP			= 85
PWShieldHP				= 55
PrayerofMendingHP		= 95
RenewHP					= 95
DivineStarHP			= 82
CoHHP					= 92
FlashHealHP				= 86
GreaterHealHP			= 78
SafeToShift				= 90

--Keybinds
MDKey				 	= IsLeftShiftKeyDown()	
LvL15TalentKey			= IsLeftControlKeyDown()
PauseKey				= IsLeftAltKeyDown()
DMGKey					= IsRightAltKeyDown()
FearKey					= IsMouseButtonDown(5)
LifegripKey				= IsRightControlKeyDown() 
GuardianKey				= IsMouseButtonDown(3)
LightwellKey			= IsMouseButtonDown(4)</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] Guardian Spirit</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #members do
	if members[i].HP &amp;lt; GuardianHP	
	and PQR_SpellAvailable(47788) then
		SpellStopCasting()
		SpellStopCasting()
		SpellStopCasting() 
    	_castSpell(47788, members[i].Unit)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Fear Ward Fear</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not cTar
then
	cTar = {&amp;quot;target&amp;quot;,&amp;quot;focus&amp;quot;,&amp;quot;mouseover&amp;quot;,&amp;quot;arena1&amp;quot;,&amp;quot;arena2&amp;quot;,&amp;quot;arena3&amp;quot;,&amp;quot;arena4&amp;quot;,&amp;quot;arena5&amp;quot;,&amp;quot;arenapet1&amp;quot;,&amp;quot;arenapet2&amp;quot;,&amp;quot;arenapet3&amp;quot;,&amp;quot;arenapet4&amp;quot;,&amp;quot;arenapet5&amp;quot;,}
end

function RangeCheckcTar()
 ecTar = { Range = 0, Facing = 0}
  for i=1,#cTar do
  	local facing, range = PQR_UnitFacing(&amp;quot;player&amp;quot;,cTar[i]),PQR_UnitDistance(&amp;quot;player&amp;quot;,cTar[i])
  	table.insert( ecTar,i, { Range = range, Facing = facing} ) 
   end
end

 if rangefacetime == nil then
	rangefacetime = 0
end

if  GetTime() - rangefacetime &amp;gt; 0.40 then
	rangefacetime = GetTime()
	RangeCheckcTar()
end


---------- this is for fear ward buff, just do an ability and put in the left options the fear ward spellID and target: &amp;quot;player&amp;quot; ---------------


for i=1, #cTar do
local class = select(2, UnitClass(cTar[i]))

if class ==&amp;quot;PRIEST&amp;quot;
and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) 
and ecTar[i].Range &amp;lt; 11
then return true 
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Chastise Focus</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local fTarget = &amp;quot;focus&amp;quot;
if PQR_SpellAvailable(&amp;quot;Holy Word: Chastise&amp;quot;)
and PQR_SpellAvailable(8122)
and UnitExists(fTarget)
and not UnitIsDeadOrGhost(fTarget) 
and UnitCanAttack(&amp;quot;player&amp;quot;,fTarget) 
and not HaveDebuff(fTarget,dCurseCC(),2)
and not HaveDebuff(fTarget,dMagicCC(),2)
and not HaveDebuff(fTarget,dSilence(),2)
and not HaveDebuff(fTarget,dSilenceCC(),2)
and not HaveDebuff(fTarget,dCC(),2)
and not HaveDebuff(fTarget,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(fTarget,iDMG(),1)
and not HaveBuff(fTarget,iSpell(),1)
and UnitBuffID(&amp;quot;focus&amp;quot;,6346) == nil
and PQR_UnitFacing(&amp;quot;player&amp;quot;,&amp;quot;focus&amp;quot;,180)
and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 0.1) == false 
and PQR_UnitDistance(&amp;quot;player&amp;quot;, fTarget) &amp;lt; 30 
and PQR_IsMoving(1)
then
	SpellStopCasting()
	SpellStopCasting()
	SpellStopCasting()
	RunMacroText(&amp;quot;/cancelaura Chakra: Serenity&amp;quot;)
	RunMacroText(&amp;quot;/cancelaura Chakra: Sanctuary&amp;quot;)
	CastSpellByName(GetSpellInfo(&amp;quot;Holy Word: Chastise&amp;quot;),fTarget)
	PQR_DelayRotation(0.5)	
end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Void Shift</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local myHp = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)


if PQR_SpellAvailable(108968)
and AutoVoidShift then
	for i=1, #members do
		--Shift other people
		if members[i].HP &amp;lt; VoidShiftHP
		and members[i].IsPlayer
		and UnitName(members[i].Unit) ~= UnitName(&amp;quot;player&amp;quot;)
		and not UnitBuffID(members[i].Unit, 47788) --Guardian
		and not UnitBuffID(members[i].Unit, 45438) --Block
		and not UnitBuffID(members[i].Unit, 642) --Bubble
		and not UnitBuffID(members[i].Unit, 19263) --Deterrence
		and not UnitDebuffID(members[i].Unit, 33786) --Clone
		and myHp &amp;gt; SafeToShift then
			SpellStopCasting()
			SpellStopCasting()
			SpellStopCasting()
			_castSpell(108968, members[i].Unit)
		end
		
		--Shift self.
		if myHp &amp;lt; VoidShiftHP
		and UnitName(members[i].Unit) ~= UnitName(&amp;quot;player&amp;quot;)
		and not UnitBuffID(&amp;quot;player&amp;quot;, 47788) --Guardian
		and members[i].IsPlayer
		and members[i].HP &amp;gt; SafeToShift then
			SpellStopCasting()
			SpellStopCasting()
			SpellStopCasting()
			_castSpell(108968, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Fear Focus</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local fTarget = &amp;quot;focus&amp;quot;
if PQR_SpellAvailable(8122)
and UnitExists(fTarget)
and not UnitIsDeadOrGhost(fTarget) 
and UnitCanAttack(&amp;quot;player&amp;quot;,fTarget) 
and not HaveDebuff(fTarget,dCurseCC(),2)
and not HaveDebuff(fTarget,dMagicCC(),2)
and not HaveDebuff(fTarget,dSilence(),2)
and not HaveDebuff(fTarget,dSilenceCC(),2)
and not HaveDebuff(fTarget,dCC(),2)
and not HaveDebuff(fTarget,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(fTarget,iDMG(),1)
and not HaveBuff(fTarget,iSpell(),1)
and PQR_UnitFacing(&amp;quot;player&amp;quot;,&amp;quot;focus&amp;quot;,180)
and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 0.1) == false 
and PQR_UnitDistance(&amp;quot;player&amp;quot;, fTarget) &amp;lt; 7 
then
	SpellStopCasting()
	SpellStopCasting()
	SpellStopCasting()
	CastSpellByName(GetSpellInfo(8122),fTarget)
	PQR_DelayRotation(0.5)	
end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Death Sheep</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local InterruptSpells = {	 
						118,		-- Polymorph
						61305,		-- Polymorph: Black Cat
						28272,		-- Polymorph: Pig
						61721,		-- Polymorph: Rabbit
						61780,		-- Polymorph: Turkey
						28271,		-- Polymorph: Turtle
						20066, 		-- Repantance
						115750		-- Blinding Light
						}

if PQR_SpellAvailable(129176) then
	for i=1, #cTar do
		if UnitExists(cTar[i]) then
		local spellName, _, _, _, _, endCast, _, _, canInterrupt = UnitCastingInfo(cTar[i])
			for _, v in ipairs(InterruptSpells) do
				if GetSpellInfo(v) == spellName and canInterrupt == false then
					if ((endCast/1000) - GetTime()) &amp;lt; 0.3  then
						SpellStopCasting()
						SpellStopCasting()
						SpellStopCasting()
						RunMacroText(&amp;quot;/cancelaura Power Word: Shield&amp;quot;)
						CastSpellByName(GetSpellInfo(129176),cTar[i])
					end
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Mass Dispel DS</Name><Default>false</Default><SpellID>32375</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(32375)
and UnitBuffID(&amp;quot;mouseover&amp;quot;, 642) 
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) &amp;lt; 37
and UnitIsEnemy(&amp;quot;mouseover&amp;quot;, &amp;quot;player&amp;quot;)
and not GetCurrentKeyBoardFocus()
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;)
then CastSpellByName(tostring(GetSpellInfo(32375)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Mass Dispel IB</Name><Default>false</Default><SpellID>32375</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(32375)
and UnitBuffID(&amp;quot;mouseover&amp;quot;, 45438) 
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) &amp;lt; 37
and UnitIsEnemy(&amp;quot;mouseover&amp;quot;, &amp;quot;player&amp;quot;)
and not GetCurrentKeyBoardFocus()
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;)
then CastSpellByName(tostring(GetSpellInfo(32375)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Juke Interrupts&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>SIN_InterruptFrame = SIN_InterruptFrame or CreateFrame(&amp;quot;FRAME&amp;quot;, nil, UIParent)

function SIN_Interrupt_OnEvent(self, event, ...)
	local type, _, _, _, _, _, destGUID = select(2, ...)
	if event == &amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot; then
		if type == &amp;quot;SPELL_CAST_SUCCESS&amp;quot; then
			if destGUID == UnitGUID(&amp;quot;player&amp;quot;) then
				local spellId = select(12, ...)
				local interruptId = {
					102060, --Disrupting Shout
					106839, --Skull Bash
					80964, --Skull Bash
					115781, --Optical Blast
					116705, --Spear Hand Strike
					1766, --Kick
					19647, --Spell Lock
					2139, --Counterspell
					47476, --Strangulate
					47528, --Mind Freeze
					57994, --Wind Shear
					6552, --Pummel
					96231, --Rebuke
					}
				for i = 1, #interruptId do
					if spellId == interruptId[i] then
						SpellStopCasting()
						PQR_DelayRotation(1)
					end
				end
			end
		end
	end
end

SIN_InterruptFrame:SetScript(&amp;quot;OnEvent&amp;quot;, SIN_Interrupt_OnEvent)
SIN_InterruptFrame:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>True</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>[&amp;gt;Stealth Breaking&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local rescan_period=2 --how often stealthed list is repopulated


local function IsStealthed(unit) --check if unit is stealthed
local stealth,prowl,shadowmeld=1784,5215,58984 --list of detectable stealth buffs may be incomplete!
	if ( UnitBuffID(unit,stealth) or UnitBuffID(unit,prowl) or UnitBuffID(unit,shadowmeld) ) then return true
	else return false
	end
end

local function Breaker() --instant stealth breaker, class dependent
	local _, playerClass = UnitClass(&amp;quot;player&amp;quot;)
	if playerClass == &amp;quot;WARRIOR&amp;quot; then
		return 57755 --Heroic Throw
	elseif playerClass == &amp;quot;PALADIN&amp;quot; then
		if PQR_SpellAvailable(879) then
			return 879 --Exorcism
		else	
			return 20271 --Judgment
		end	
	elseif playerClass == &amp;quot;HUNTER&amp;quot; then
		return 19503 --Scatter Shot
	elseif playerClass == &amp;quot;ROGUE&amp;quot; then
		if IsStealthed(&amp;apos;player&amp;apos;) then
			return 6770 --Sap
		else
			return 121733 --Throw
		end
	elseif playerClass == &amp;quot;PRIEST&amp;quot; then
		return 589 --Shadow Word: Pain
	elseif playerClass == &amp;quot;DEATHKNIGHT&amp;quot; then
		return 45477 --Icy Touch
	elseif playerClass == &amp;quot;SHAMAN&amp;quot; then
		return 8056 --Frost Shock
	elseif playerClass == &amp;quot;MAGE&amp;quot; then
		return 30455 --Ice Lance
	elseif playerClass == &amp;quot;WARLOCK&amp;quot; then
		return 77799 --Fel Flame
	elseif playerClass == &amp;quot;MONK&amp;quot; then
		return 115078 --Paralysis
	elseif playerClass == &amp;quot;DRUID&amp;quot; then
		if IsStealthed(&amp;apos;player&amp;apos;) then
			return 0
		else
			return 8921 --moonfire
		end
	else
		return 0
	end
end

local breakername=GetSpellInfo(Breaker()) --localized breaker name for use with IsSpellInRange


------------------------BG/RBG--------------------------------
--get stealthed list
if not last_scan or GetTime()-last_scan&amp;gt;=rescan_period then --repopulate list every T seconds
	if GetUnitName(&amp;apos;target&amp;apos;) then currtarget=UnitName(&amp;apos;target&amp;apos;) else currtarget=nil end --get current target&amp;apos;s name
last_scan=GetTime()
stealthed={} --depopulate stealthed list

	for j=1,GetNumBattlefieldScores() do --get player faction to make profile work in rbgs and arenas
	name1=GetBattlefieldScore(j) 
		if name1==UnitName(&amp;apos;player&amp;apos;) then 
		pfaction=select(6,GetBattlefieldScore(j)) 
		end 
	end

	for i=1, GetNumBattlefieldScores() do 
	name, killingBlows, honorableKills, deaths, honorGained, faction, rank, race, class = GetBattlefieldScore(i)
	name=name:match(&amp;apos;[^-]+&amp;apos;) --filter out &amp;quot;-Realm&amp;quot; part
		if (class==&amp;quot;DRUID&amp;quot; or class==&amp;quot;ROGUE&amp;quot;) and faction~=pfaction and not UnitChannelInfo(&amp;apos;player&amp;apos;) then --target change is fatal to channgeling
		TargetUnit(name)
			if UnitName(&amp;apos;target&amp;apos;)~=name or ( UnitName(&amp;apos;target&amp;apos;)==name and IsStealthed(&amp;apos;target&amp;apos;) ) then --targeting attemp was unsuccessful or stealthed target was caught during list repopulation
			stealthed[name]=1 
			end
		end
	end
	if currtarget and UnitName(&amp;apos;target&amp;apos;)~=currtarget then TargetUnit(currtarget) elseif not currtarget then ClearTarget() end --return to previous target after targeting stealther
end

--look for stealthed
if PQR_SpellAvailable(Breaker()) then
	if GetUnitName(&amp;apos;target&amp;apos;) then oldtarget=UnitName(&amp;apos;target&amp;apos;) else oldtarget=nil end --get current target
		for k,v in pairs(stealthed) do
			if not ( UnitCastingInfo(&amp;apos;player&amp;apos;) or UnitChannelInfo(&amp;apos;player&amp;apos;) ) and v==1 then --not on GCD &amp; not casting &amp; not channeling
			TargetUnit(k)
				if UnitName(&amp;apos;target&amp;apos;)==k and UnitIsPlayer(&amp;apos;target&amp;apos;) then --IsPlayer check to prevent collisions with pet names
					if IsStealthed(&amp;apos;target&amp;apos;) and IsSpellInRange(breakername,&amp;apos;target&amp;apos;)==1 then --range check to prevent spam caused by stealth glitch
					CastSpellByID(Breaker(),&amp;apos;target&amp;apos;)
					else
					stealthed[k]=0	--exclude non-stealthed or too distant stealther from the list
					end
				end
			end	
		end
	if oldtarget and UnitName(&amp;apos;target&amp;apos;)~=oldtarget then TargetUnit(oldtarget) elseif not oldtarget then ClearTarget() end --return to previous target after breaking stealth	
end
------------------------ARENA--------------------------------
for a=1,5 do
local arenatarget=&amp;apos;arena&amp;apos;..a
	if IsStealthed(arenatarget) then
	CastSpellByID(Breaker(),arenatarget)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[DPS] Shadow Word: Death</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #cTar do
	cTarHP =  100 * UnitHealth(cTar[i]) / UnitHealthMax(cTar[i])
	
	if UnitExists(cTar[i])
	and UnitCanAttack(&amp;quot;player&amp;quot;, cTar[i]) ~= nil
	and not LineOfSight(cTar[i])
	and cTarHP &amp;lt; 20
	and PQR_IsMoving(1) then
		SpellStopCasting()
		SpellStopCasting()
		SpellStopCasting()
		_castSpell(32379, cTar[i])
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[BUFF] Chakra: Serenity</Name><Default>false</Default><SpellID>81208</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(81208) then
for i=1, #members do 
	if members[i].HP &amp;lt; 93
	and not UnitBuffID(&amp;quot;Player&amp;quot;,81208) then
  		return true
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[BUFF] PWF/Inner Will</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Power Word: Fortitude 
if not UnitBuffID(&amp;quot;player&amp;quot;,21562) --Power Word: Fortitude
and not UnitBuffID(&amp;quot;player&amp;quot;,469) --Commanding Shout
and not UnitBuffID(&amp;quot;player&amp;quot;,90364) --Qiraji Fortitude
and not UnitBuffID(&amp;quot;player&amp;quot;,109773) --Dark Intent
and not UnitChannelInfo(&amp;quot;player&amp;quot;)
and not UnitAffectingCombat(&amp;quot;player&amp;quot;)
and not UnitCastingInfo(&amp;quot;player&amp;quot;) then
	_castSpell(21562)
end

-- Inner Will
if not UnitBuffID(&amp;quot;player&amp;quot;,73413) 
and not UnitBuffID(&amp;quot;player&amp;quot;,588)
and PQR_SpellAvailable(588) then
	CastSpellByName(tostring(GetSpellInfo(73413),nil))	 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] PW: Shield</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(17) then
	for i=1, #members do
		if members[i].HP &amp;lt; PWShieldHP
		and not HaveDebuff(members[i].Unit,6788)
		and not UnitBuffID(members[i].Unit,17)
		and not LineOfSight(members[i].Unit) then
		  _castSpell(17, members[i].Unit) 
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] HW: Serenity</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(&amp;quot;Holy Word: Serenity&amp;quot;) then
for i=1, #members do 
	if members[i].HP &amp;lt; HWSerenityHP
	and UnitBuffID(&amp;quot;Player&amp;quot;,131567) --Holy Spark (50% extra Healing)
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	then
  		CastSpellByName(&amp;quot;Holy Word: Serenity&amp;quot;, members[i].Unit)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] PoM</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(33076) then
	for i=1, #members do
	if members[i].HP &amp;lt; PrayerofMendingHP
	and PQR_SpellAvailable(88684) --HW: Serenity 
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	 then
	 	_castSpell(33076, members[i].Unit)
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] Renew</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(139) then
	for i=1, #members do
	if members[i].HP &amp;lt; RenewHP 
	and not UnitBuffID(members[i].Unit, 139)
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false then
	 	_castSpell(139, members[i].Unit)
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] CoH</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(34861) then
	for i=1, #members do
	if members[i].HP &amp;lt; CoHHP then
	 	_castSpell(34861, members[i].Unit)
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] FDCL</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local FDCL = UnitBuffID(&amp;quot;player&amp;quot;, 114255)


if PQR_SpellAvailable(2061) then
	for i=1, #members do  
		if members[i].HP &amp;lt; FlashHealHP 
		and FDCL
		and not LineOfSight(members[i].Unit)
		and PQR_IsMoving(1) then
	  		_castSpell(2061, members[i].Unit)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] Greater Heal</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local _, _, _, serenStack = UnitBuffID( &amp;quot;player&amp;quot;, 63735 )

if PQR_SpellAvailable(2060) then
for i=1, #members do 
	if members[i].HP &amp;lt; GreaterHealHP
	and serenStack == 2
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	and not PQR_IsMoving(1) then
		RunMacroText(&amp;quot;/cast Power Infusion&amp;quot;)
		RunMacroText(&amp;quot;/use 10&amp;quot;)
  		_castSpell(2060, members[i].Unit)
  		PQR_DelayRotation(0.5)
	end
end
end</Lua><RecastDelay>3000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] WotF</Name><Default>false</Default><SpellID>7744</SpellID><Actions></Actions><Lua>local fears = {
111397,  -- Blood Fear
5484,  -- Howl
8122,  -- scream
5782,   -- Fear
113792,  -- Psychic Terror (psyfiend)
5246, -- Intimidating Shout
113004,  -- Intimidating Shout (druid symbio)
6358 -- Seduction

}

for i=1, #fears do
if UnitDebuffID(&amp;quot;player&amp;quot;, fears[i]) ~= nil
and PQR_SpellAvailable(7744) then
return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Purify CC</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1,#members do 
    if dispellableCC(members[i].Unit) 
    and not UnitDebuff(members[i].Unit, 30108)
    and not UnitDebuff(members[i].Unit, 34914)
    and not UnitDebuff(members[i].Unit, 131736) then 
  		_castSpell(527,members[i].Unit)
  	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] Healthstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerHP = 100 * (UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;))
local HealthstoneCD = select(2,GetItemCooldown(5512))

if PlayerHP &amp;lt; HealthstoneHP then
	if HealthstoneCD == 0 and GetItemCount(5512) &amp;gt; 0  then
    	UseItemByName(select(1,GetItemInfo(5512)), &amp;quot;player&amp;quot;)
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Shackle Undead</Name><Default>false</Default><SpellID>9484</SpellID><Actions></Actions><Lua>if IsShiftKeyDown()
and UnitExists(&amp;quot;mouseover&amp;quot;) 
and UnitCreatureType(&amp;quot;mouseover&amp;quot;) == &amp;quot;Undead&amp;quot;
and not UnitDebuffID(&amp;quot;mouseover&amp;quot;,9484) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;mouseover&amp;quot;) then
	CastSpellByName(GetSpellInfo(9484),&amp;quot;mouseover&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[DPS] Shadowfiend</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local p1Target = &amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;
local p2Target = &amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;

local PartyCDs = {
107574, -- Avatar
51713,	-- Shadow Dance
1719,	-- Recklessness
51271,	-- Pillar of Frost
49016,	-- Unholy Frenzy
114049,	-- Ascendance
31884,	-- Avenging Wrath
12472,	-- Icy Veins
12042,	-- Arcane Power
113860,	-- Dark Soul: Misery
113861,	-- Dark Soul: Knowledge
113858,	-- Dark Soul: Instability
102560,	-- Incarnation: Chosen of Elune
102543,	-- Incarnation: King of the Jungle
34692,	-- The Beast Within
121471  -- Shadow Blades
}


if PQR_SpellAvailable(34433) == true then
for i=1, #PartyCDs do

if UnitBuffID(&amp;quot;party1&amp;quot;, PartyCDs[i]) ~= nil
and UnitExists(p1Target)
and not UnitIsDeadOrGhost(&amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;) 
and not HaveDebuff(p1Target,dCurseCC(),2)
and not HaveDebuff(p1Target,dMagicCC(),2)
and not HaveDebuff(p1Target,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(p1Target,iDMG(),1)
and not HaveBuff(p1Target,iSpell(),1)
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;) &amp;lt; 39 
and PQR_IsMoving(1)
then
	CastSpellByName(GetSpellInfo(34433),p1Target)
end


if UnitBuffID(&amp;quot;party2&amp;quot;, PartyCDs[i]) ~= nil
and UnitExists(p2Target)
and not UnitIsDeadOrGhost(&amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;) 
and not HaveDebuff(p2Target,dCurseCC(),2)
and not HaveDebuff(p2Target,dMagicCC(),2)
and not HaveDebuff(p2Target,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(p2Target,iDMG(),1)
and not HaveBuff(p2Target,iSpell(),1)
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;) &amp;lt; 39 
and PQR_IsMoving(1)
then
	CastSpellByName(GetSpellInfo(34433),p2Target)
end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[DPS] Mindbender</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local p1Target = &amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;
local p2Target = &amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;

local PartyCDs = {
107574, -- Avatar
51713,	-- Shadow Dance
1719,	-- Recklessness
51271,	-- Pillar of Frost
49016,	-- Unholy Frenzy
114049,	-- Ascendance
31884,	-- Avenging Wrath
12472,	-- Icy Veins
12042,	-- Arcane Power
113860,	-- Dark Soul: Misery
113861,	-- Dark Soul: Knowledge
113858,	-- Dark Soul: Instability
102560,	-- Incarnation: Chosen of Elune
102543,	-- Incarnation: King of the Jungle
34692,	-- The Beast Within
121471  -- Shadow Blades
}


if PQR_SpellAvailable(123040) == true then
for i=1, #PartyCDs do

if UnitBuffID(&amp;quot;party1&amp;quot;, PartyCDs[i]) ~= nil
and UnitExists(p1Target)
and not UnitIsDeadOrGhost(&amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;) 
and not HaveDebuff(p1Target,dCurseCC(),2)
and not HaveDebuff(p1Target,dMagicCC(),2)
and not HaveDebuff(p1Target,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(p1Target,iDMG(),1)
and not HaveBuff(p1Target,iSpell(),1)
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party1&amp;quot;..&amp;quot;target&amp;quot;) &amp;lt; 39 
and PQR_IsMoving(1)
then
	CastSpellByName(GetSpellInfo(123040),p1Target)
end


if UnitBuffID(&amp;quot;party2&amp;quot;, PartyCDs[i]) ~= nil
and UnitExists(p2Target)
and not UnitIsDeadOrGhost(&amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;) 
and not HaveDebuff(p2Target,dCurseCC(),2)
and not HaveDebuff(p2Target,dMagicCC(),2)
and not HaveDebuff(p2Target,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(p2Target,iDMG(),1)
and not HaveBuff(p2Target,iSpell(),1)
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;party2&amp;quot;..&amp;quot;target&amp;quot;) &amp;lt; 39 
and PQR_IsMoving(1)
then
	CastSpellByName(GetSpellInfo(123040),p2Target)
end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Dispel Magic 1</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)
local PlayerHP = 100 * UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;)

local buff = { 

6940,   -- Hand of Sacrifice
1022,   -- Hand of Protection
29166,  -- Innervate  
54428,  -- Divine Plea
6346    -- Fear Ward

 }

--Target
for i=1, #buff do
	if UnitBuffID(&amp;quot;target&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;target&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;target&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;target&amp;quot;)
	end
	

--Focus
	if UnitBuffID(&amp;quot;focus&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;focus&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;focus&amp;quot;)
	end


--Arena1
	if UnitBuffID(&amp;quot;arena1&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena1&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena1&amp;quot;)
	end


--Arena2
	if UnitBuffID(&amp;quot;arena2&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena2&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena2&amp;quot;)
	end


--Arena3
	if UnitBuffID(&amp;quot;arena3&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena3&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena3&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Dispel Magic 2</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)
local PlayerHP = 100 * UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;)

local buff = { 

6940,   -- Hand of Sacrifice
69369,  -- Predatory Swiftness
12472,  -- Icy Veins
1022,   -- Hand of Protection
29166,  -- Innervate  
54428,  -- Divine Plea
89485,  -- Inner Focus
6346    -- Fear Ward

 }

--Target
for i=1, #buff do
	if UnitBuffID(&amp;quot;target&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;target&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;target&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;target&amp;quot;)
	end
	

--Focus
	if UnitBuffID(&amp;quot;focus&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;focus&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;focus&amp;quot;)
	end


--Arena1
	if UnitBuffID(&amp;quot;arena1&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena1&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena1&amp;quot;)
	end


--Arena2
	if UnitBuffID(&amp;quot;arena2&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena2&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena2&amp;quot;)
	end


--Arena3
	if UnitBuffID(&amp;quot;arena3&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena3&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena3&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Dispel Magic 3</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local PlayerMana = 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;)
local PlayerHP = 100 * UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;)

local buff = { 

1044,   -- Hand of Freedom
6940,   -- Hand of Sacrifice
69369,  -- Predatory Swiftness
12472,  -- Icy Veins
1022,   -- Hand of Protection
11426,  -- Ice Barrier
29166,  -- Innervate  
79206,  -- Spiritwalker&amp;apos;s Grace
54428,  -- Divine Plea
89485,  -- Inner Focus
108978, -- Alter Time
6346    -- Fear Ward

 }

--Target
for i=1, #buff do
	if UnitBuffID(&amp;quot;target&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;target&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;target&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;target&amp;quot;)
	end
	

--Focus
	if UnitBuffID(&amp;quot;focus&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;focus&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;focus&amp;quot;)
	end


--Arena1
	if UnitBuffID(&amp;quot;arena1&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena1&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena1&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena1&amp;quot;)
	end


--Arena2
	if UnitBuffID(&amp;quot;arena2&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena2&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena2&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena2&amp;quot;)
	end


--Arena3
	if UnitBuffID(&amp;quot;arena3&amp;quot;,buff[i])
	and PlayerMana &amp;gt; 24
	and PlayerHP &amp;gt; 65
	and PQR_IsOutOfSight(&amp;quot;arena3&amp;quot;, 0.1) == false
	and IsSpellInRange(&amp;quot;Dispel Magic&amp;quot;, &amp;quot;arena3&amp;quot;) == 1
	then
		CastSpellByName(GetSpellInfo(528),&amp;quot;arena3&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] Divine Star</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(110744) then
for i=1, #members do 
	if members[i].HP &amp;lt; DivineStarHP
	then
   		_castSpell(110744)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] Flash Heal</Name><Default>false</Default><SpellID>0</SpellID><Actions>/use 10</Actions><Lua>if PQR_SpellAvailable(2061) then
for i=1, #members do 
	if members[i].HP &amp;lt; FlashHealHP	
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	and not PQR_IsMoving(1) then
  		_castSpell(2061, members[i].Unit)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Data Load&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Load LUA data files.
if PQR_RotationStarted then
 PQR_RotationStarted = false
 
 -- Load required data files
 if PQR_LoadLua ~= nil then
  if PQR_LoadLua(&amp;quot;PQR_PriestPvPLite_Data.lua&amp;quot;) == false then
   PQR_WriteToChat(&amp;quot;|cffb73737You&amp;apos;re missing PQR_PriestPvPLite_Data.lua - Make sure it&amp;apos;s in your Data folder! The Rotation has been halted.|cffffffff&amp;quot;, &amp;quot;Error&amp;quot;)
   PQR_StopRotation()
   return true
  end  
 end
end


GroupInfo() 

--Pause
if IsShiftKeyDown()
or IsMounted() 
or (UnitBuffID(&amp;quot;player&amp;quot;,119032) and GetSpellCooldown(GetSpellInfo(8122)) &amp;gt; 1 ) -- Spectral Guise (--Ty Dimonoff)
or UnitBuffID(&amp;quot;player&amp;quot;,118358) -- Cobo Cola
then return true end


 -------------------
 -- Nova Lua
 -------------------

if PQR_LoadLua ~= nil then
  -- Load Data File
  if PQR_LoadLua(&amp;quot;PQR_Nova_Data.lua&amp;quot;) == false then
   PQR_WriteToChat(&amp;quot;You are missing PQR_Nova_Data.lua. Rotation has been stopped.&amp;quot;, &amp;quot;Error&amp;quot;)
   PQR_StopRotation()
   return true
  end
 end
 
 -------------------
 -- Cokx Lua
 -------------------
 
 if PQR_LoadLua ~= nil then
  -- Load Data File
  if PQR_LoadLua(&amp;quot;PQR_Cokx_PVP_DATA.lua&amp;quot;) == false then
   PQR_WriteToChat(&amp;quot;You are missing a key file: PQR_Cokx_PVP_DATA.lua. Rotation has been stopped.&amp;quot;, &amp;quot;Error&amp;quot;)
   PQR_StopRotation()
   return true
  end
 end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[BUFF] Chakra: Chastise</Name><Default>false</Default><SpellID>81209</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(81209)
and DMGKey
and not UnitBuffID(&amp;quot;Player&amp;quot;,81209) then
  		return true
	end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Set Focus&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #cTar do
 if UnitExists(cTar[i]) 
 and not UnitExists(&amp;quot;focus&amp;quot;)
 and IsHealer(cTar[i]) then
    if UnitExists(&amp;apos;target&amp;apos;) then
      TargetUnit(cTar[i])
      FocusUnit()
      TargetLastTarget()
     else
      TargetUnit(cTar[i])
      FocusUnit()
      ClearTarget()
     end
 end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Set Focus2&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if lastfocus == nil then lastfocus = 0 end

--Focus Healer
for i=1, #cTar do
 if UnitExists(cTar[i]) 
and ecTar[i].Range &amp;lt; 60
 and not UnitExists(&amp;quot;focus&amp;quot;)
 and IsHealer(cTar[i]) then
RunMacroText(&amp;quot;/focus &amp;quot;..cTar[i])
lastfocus = UnitGUID(cTar[i])
 end
end

--If no Healer Focus DPS
 for i=1, #cTar do
 if UnitExists(cTar[i]) 
and ecTar[i].Range &amp;lt; 60
 and UnitExists(&amp;quot;focus&amp;quot;)
and not IsHealer(&amp;quot;focus&amp;quot;)
 and IsHealer(cTar[i]) then
RunMacroText(&amp;quot;/focus &amp;quot;..cTar[i])
lastfocus = UnitGUID(cTar[i])
 end
end

--Refocus Healer
for i=1, #cTar do
 if UnitExists(cTar[i]) 
and ecTar[i].Range &amp;lt; 60
 and UnitExists(&amp;quot;focus&amp;quot;)
and UnitGUID(&amp;quot;focus&amp;quot;) == lastfocus
and not IsHealer(&amp;quot;focus&amp;quot;)
 and IsHealer(cTar[i]) then
RunMacroText(&amp;quot;/clearfocus&amp;quot;)
 end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;lt;Rdy&amp;gt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_RotationStarted then
  ----------------------------------
  -- Load Data Files
  ----------------------------------

	if not PQR_LoadLua(&amp;quot;PQR_Cokx_PVP_DATA.lua&amp;quot;,true) then
		PQR_WriteToChat(&amp;quot;You are missing a key file: PQR_Cokx_PVP_DATA.lua. Please put this file in the Data folder and reload PQR. Thank You!&amp;quot;, &amp;quot;Error&amp;quot;)
		PQR_RotationStop()
		return true
		else
		PQR_WriteToChat(&amp;quot;Datafile loaded!&amp;quot;)
	end
	if not PQR_LoadLua(&amp;quot;PQR_Cokx_PVP_Settings.lua&amp;quot;,true) then
		PQR_WriteToChat(&amp;quot;You are missing a key file: PQR_Cokx_PVP_DATA.lua. Please put this file in the Data folder and reload PQR. Thank You!&amp;quot;, &amp;quot;Error&amp;quot;)
		PQR_RotationStop()
		return true
		else
		PQR_WriteToChat(&amp;quot;Settings loaded!&amp;quot;)
		
	end
	
	
	PQR_RotationStarted = false
end
GroupInfo() 
CastClick()
if interruptberechner == nil then
	interruptberechner = 0
end

if GetTime() - interruptberechner &amp;gt; 2 then
	interruptberechner = GetTime()
interrupt()
end
settings()
checks()







if not playerdpsinc then playerdpsinc = 0 end
if not playerdpssum then playerdpssum = 0 end
if not playerdpscalc then playerdpscalc = 0 end
if not sumDps then sumDps = 0 end
if not lastplayerhp then lastplayerhp = UnitHealth(&amp;quot;player&amp;quot;) end

if modtime == nil then
	modtime = 0
end

if GetTime() - modtime &amp;gt; 1 then
	modtime = GetTime()
	playerdpsinc = lastplayerhp -UnitHealth(&amp;quot;player&amp;quot;)
	playerdpssum = playerdpssum + playerdpsinc
	lastplayerhp = UnitHealth(&amp;quot;player&amp;quot;)
end

if avgmodtime == nil then
	avgmodtime = 0
end

if GetTime() - avgmodtime &amp;gt; 5 then
	avgmodtime = GetTime()
	sumDps = 0
	playerdpscalc = playerdpssum/5
	sumDps = playerdpscalc
	playerdpscalc = 0
	playerdpssum = 0
end


if shouttime == nil then
	shouttime = 0
end


 if rangefacetime == nil then
	rangefacetime = 0
end

if  GetTime() - rangefacetime &amp;gt; rangecheckenemy then
	rangefacetime = GetTime()
	RangeCheckcTar()
	RangeCheckUTT()
end

  if rangefaceMtime == nil then
	rangefaceMtime = 0
end

if  GetTime() - rangefaceMtime &amp;gt; rangecheckfriends then
	rangefaceMtime = GetTime()
	RangeCheckMembers()
end

if (numberenemy == 0 or numberenemy &amp;gt; #members)  then
numberenemy = #members
end

if numberfriends == 0 or numberfriends &amp;gt; #members then
numberfriends = #members or nil
end

local flag = { &amp;quot;&amp;quot;..GetSpellInfo(23335), &amp;quot;&amp;quot;..GetSpellInfo(23333) }

for _,v in ipairs(flag) do 
InteractUnit(v)end

--local killtotems= {&amp;quot;&amp;quot;..GetSpellInfo(98008),&amp;quot;&amp;quot;..GetSpellInfo(108280),&amp;quot;&amp;quot;..GetSpellInfo(108269)}

 
--if  HaveBuff(&amp;quot;target&amp;quot;,98008,-1,1) then
--for _,v in ipairs(killtotems) do 
--InteractUnit(v)end
--end


---------------

if inMelee == nil then
inMelee = 0
end

if UnitExists(&amp;quot;target&amp;quot;) and inRange(&amp;quot;target&amp;quot;,116095) then
inMelee = 1
else 
inMelee = 0
end

if UnitPower(&amp;quot;player&amp;quot;,12) &amp;gt; 3 then
goRage = 1
end
if UnitPower(&amp;quot;player&amp;quot;,12) &amp;lt; 2 then
goRage = 0
end



if GetItemCount(GetItemInfo(80618)) == 0 then
InteractUnit(&amp;quot;&amp;quot;..GetSpellInfo(57287))end

if GetItemCount(GetItemInfo(5512)) == 0 then
InteractUnit(&amp;quot;&amp;quot;..GetSpellInfo(58275))end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Set Focus3&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #cTar do
 if UnitExists(cTar[i]) 
 and not UnitExists(&amp;quot;focus&amp;quot;)
 and IsHealer(cTar[i])
 and not UnitIsDeadOrGhost(cTar[i]) 
 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) then
RunMacroText(&amp;quot;/focus &amp;quot;..cTar[i])    
 end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Utility] Death ALL</Name><Default>false</Default><SpellID>0</SpellID><Actions>/cancelaura Power Word: Shield</Actions><Lua>-- Create our frame and bind combat log events

if not SWDFrame then
	SWDFrame = CreateFrame(&amp;quot;FRAME&amp;quot;, nil, UIParent)	
	SWDFrame:Hide()
end


if not GlyphCheck(120583)
or not PQR_SpellAvailable(32379) then
  	return false
end
  
 -- Spell event table
  local spellIds = {
	-- Hunter
	[19503] = {GetSpellInfo(129176)},		-- Scatter 
	-- Paladin
	[20066] = {GetSpellInfo(129176)}, 		-- Repantance
	[115750] = {GetSpellInfo(129176)},		-- Blinding Light
	-- Rogue
	[2094]  = {GetSpellInfo(129176)},		-- Blind
	--Monk
	[115078] = {GetSpellInfo(129176)},		-- Paralyze
	--Mage
	[18] = {GetSpellInfo(129176)},			-- Polymorph
	[61305] = {GetSpellInfo(129176)},		-- Polymorph: Black Cat
	[28272] = {GetSpellInfo(129176)},		-- Polymorph: Pig
	[61721] = {GetSpellInfo(129176)},		-- Polymorph: Rabbit
	[61780] = {GetSpellInfo(129176)},		-- Polymorph: Turkey
	[28271] = {GetSpellInfo(129176)},		-- Polymorph: Turtle	
}


function EventHandler(self, event, ...)
    local type, _, sourceGUID, sourceNAME, _, _, destGUID, destNAME = select(2, ...)
    if event == &amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot; then
		if type == &amp;quot;SPELL_CAST_SUCCESS&amp;quot;
		and destGUID == UnitGUID(&amp;quot;player&amp;quot;) then
			local sid = select(12, ...)
			local sname = spellIds[sid]
			if sname ~= nil then
				SpellStopCasting()
				CastSpellByName(GetSpellInfo(129176), sourceNAME) 
				return
			end
	  	end
    end
end

SWDFrame:SetScript(&amp;quot;OnEvent&amp;quot;, EventHandler)
SWDFrame:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Juke Interrupts2&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not SIN_InterruptFrame_created then
SIN_InterruptFrame_created = true	
local interruptID = 
{
[102060] = true, --Disrupting Shout
[106839] = true, --Skull Bash
[80964] = true, --Skull Bash
[115781] = true, --Optical Blast
[116705] = true, --Spear Hand Strike
[1766] = true, --Kick
[19647] = true, --Spell Lock
[2139] = true, --Counterspell
[47476] = true, --Strangulate
[47528] = true, --Mind Freeze
[57994] = true, --Wind Shear
[6552] = true, --Pummel
[96231] = true, --Rebuke
[147362] = true --Counter shot coming in 5.4
}
local SIN_PlayerGUID = UnitGUID(&amp;quot;player&amp;quot;)
SIN_InterruptFrame = SIN_InterruptFrame or CreateFrame(&amp;quot;FRAME&amp;quot;, nil, UIParent)
SIN_InterruptFrame:SetScript(&amp;quot;OnEvent&amp;quot;, function(self, event, _, type, _, sourceGUID, sourceName, _, _, destGUID, destName, _, _, spellID)
	if type == &amp;quot;SPELL_CAST_SUCCESS&amp;quot; and destGUID == SIN_PlayerGUID and interruptID[spellID] and not select(9, UnitCastingInfo(&amp;apos;player&amp;apos;) or UnitChannelInfo(&amp;apos;player&amp;apos;)) then --select(9, ...) is &amp;quot;no interrupt immunity&amp;quot; check
		SpellStopCasting()
		PQR_DelayRotation(.5)
	end
end
)
SIN_InterruptFrame:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>True</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>[MOD] DMG Key</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local tTarget = &amp;quot;target&amp;quot;

if DMGKey then

--Chakra: Chastise
if PQR_SpellAvailable(81209)
and not UnitBuffID(&amp;quot;Player&amp;quot;,81209)
then
	CastSpellByName(GetSpellInfo(81209),&amp;quot;player&amp;quot;)
end


--Holy Fire
if PQR_SpellAvailable(14914)
and UnitExists(tTarget)
and not UnitIsDeadOrGhost(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
and not HaveDebuff(tTarget,dCurseCC(),2)
and not HaveDebuff(tTarget,dMagicCC(),2)
and not HaveDebuff(tTarget,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(tTarget,iDMG(),1)
and not HaveBuff(tTarget,iSpell(),1)
and PQR_UnitFacing(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;,180)  
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;lt; 29 
then
	CastSpellByName(GetSpellInfo(14914),tTarget)
end


--Smite
if PQR_SpellAvailable(585)
and UnitExists(tTarget)
and not UnitIsDeadOrGhost(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
and not HaveDebuff(tTarget,dCurseCC(),2)
and not HaveDebuff(tTarget,dMagicCC(),2)
and not HaveDebuff(tTarget,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(tTarget,iDMG(),1)
and not HaveBuff(tTarget,iSpell(),1)
and PQR_UnitFacing(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;,180)  
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;lt; 29 
then
	CastSpellByName(GetSpellInfo(585),tTarget)
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[MOD] Life Grip Key</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if LifegripKey then
	_castSpell(73325, &amp;quot;target&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[DPS] Smite Auto</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local tTarget = &amp;quot;target&amp;quot;
local PlayerHP = 100 * UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;)

for i=1, #members do
	if members[i].HP &amp;gt; 91
	and PlayerHP &amp;gt; 91
and PQR_SpellAvailable(585)
and UnitBuffID(&amp;quot;Player&amp;quot;,81209)
and UnitExists(tTarget)
and not UnitIsDeadOrGhost(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
and not HaveDebuff(tTarget,dCurseCC(),2)
and not HaveDebuff(tTarget,dMagicCC(),2)
and not HaveDebuff(tTarget,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(tTarget,iDMG(),1)
and not HaveBuff(tTarget,iSpell(),1)
and PQR_UnitFacing(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;,180)  
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;lt; 29 
and not PQR_IsMoving(1)
then
	CastSpellByName(GetSpellInfo(585),tTarget)
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[MOD] Mass Dispel Key</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if MDKey then
	if IsSpellKnown(32375) then
		CastSpellByName(GetSpellInfo(32375))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[MOD] LVL 15 TALENT</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if LvL15TalentKey then
	if IsSpellKnown(108921) then
		CastSpellByName(GetSpellInfo(108921))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
	

	if IsSpellKnown(605) 
	and UnitExists(&amp;quot;target&amp;quot;) then
		CastSpellByName(GetSpellInfo(605))
	end	
	

	if IsSpellKnown(108920) then
		CastSpellByName(GetSpellInfo(108920))
	end	
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[MOD] Fear Key</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if FearKey then
	_castSpell(8122, &amp;quot;target&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[MOD] Guardian Key</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if GuardianKey then
	_castSpell(47788, &amp;quot;target&amp;quot;)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[BUFF] Chakra: Chastise Auto</Name><Default>false</Default><SpellID>81209</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(81209) then
for i=1, #members do 
	if members[i].HP &amp;gt; 97
	and not UnitBuffID(&amp;quot;Player&amp;quot;,81209) then
  		return true
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[BUFF] Chakra: Serenity Auto</Name><Default>false</Default><SpellID>81208</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(81208) then
for i=1, #members do 
	if members[i].HP &amp;lt; 97
	and not LineOfSight(members[i].Unit) 
	and PQR_UnitDistance(&amp;quot;player&amp;quot;, members[i].Unit) &amp;lt; 39
	and not UnitBuffID(&amp;quot;Player&amp;quot;,81208) then
		SpellStopCasting()
		SpellStopCasting()
		SpellStopCasting()
  		return true
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing][M]HW: Serenity</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(88684) then
for i=1, #members do 
	if members[i].HP &amp;lt; HWSerenityHP
	and UnitBuffID(&amp;quot;Player&amp;quot;,81208)
	and UnitBuffID(&amp;quot;Player&amp;quot;,131567) --Holy Spark (50% extra Healing)
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	and PQR_IsMoving(1)
	then
  		CastSpellByName(&amp;quot;Holy Word: Serenity&amp;quot;, members[i].Unit)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[MOD] Lightwell Key</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if LightwellKey then
	if IsSpellKnown(724) then
		CastSpellByName(GetSpellInfo(724))
		if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end  
		return true 
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing][M]Renew</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(139) then
	for i=1, #members do
	if members[i].HP &amp;lt; RenewHP 
	and not UnitBuffID(members[i].Unit, 139)
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	and PQR_IsMoving(1) then
	 	_castSpell(139, members[i].Unit)
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing][M]PW: Shield</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(17) then
	for i=1, #members do
		if members[i].HP &amp;lt; PWShieldHP
		and not HaveDebuff(members[i].Unit,6788)
		and not UnitBuffID(members[i].Unit,17)
		and not LineOfSight(members[i].Unit)
		and PQR_IsMoving(1) then
		  _castSpell(17, members[i].Unit) 
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing][M]PoM</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(33076) then
	for i=1, #members do
	if members[i].HP &amp;lt; PrayerofMendingHP
	and PQR_SpellAvailable(88684) --HW: Serenity 
	and PQR_IsOutOfSight(members[i].Unit, 0.1) == false
	and PQR_IsMoving(1) then
	 	_castSpell(33076, members[i].Unit)
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing][M]Divine Star</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(110744) then
for i=1, #members do 
	if members[i].HP &amp;lt; DivineStarHP
	and PQR_IsMoving(1) then
   		_castSpell(110744)
	end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing][M]CoH</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(34861) then
	for i=1, #members do
	if members[i].HP &amp;lt; CoHHP 
	and PQR_IsMoving(1) then
	 	_castSpell(34861, members[i].Unit)
	end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[DPS] Holy Fire Auto</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local tTarget = &amp;quot;target&amp;quot;
local PlayerHP = 100 * UnitHealth(&amp;quot;Player&amp;quot;) / UnitHealthMax(&amp;quot;Player&amp;quot;)

for i=1, #members do
	if members[i].HP &amp;gt; 91
    and PlayerHP &amp;gt; 91
and PQR_SpellAvailable(14914)
and UnitBuffID(&amp;quot;Player&amp;quot;,81209)
and UnitExists(tTarget)
and not UnitIsDeadOrGhost(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
and not HaveDebuff(tTarget,dCurseCC(),2)
and not HaveDebuff(tTarget,dMagicCC(),2)
and not HaveDebuff(tTarget,{33786, -- Cyclone
113506}) -- Cyclone
and not HaveBuff(tTarget,iDMG(),1)
and not HaveBuff(tTarget,iSpell(),1)
and PQR_UnitFacing(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;,180)  
and PQR_UnitDistance(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;lt; 29 
then
	CastSpellByName(GetSpellInfo(14914),tTarget)
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[Healing] PW: Shield 70</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_SpellAvailable(17) then
	for i=1, #members do
		if members[i].HP &amp;lt; 94
		and not HaveDebuff(members[i].Unit,6788)
		and not UnitBuffID(members[i].Unit,17)
		and not LineOfSight(members[i].Unit) then
		  _castSpell(17, members[i].Unit) 
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>[&amp;gt;Spectral PAUSE&amp;lt;]</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Pause
if UnitBuffID(&amp;quot;player&amp;quot;,119032) -- Spectral Guise
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></PRIEST>