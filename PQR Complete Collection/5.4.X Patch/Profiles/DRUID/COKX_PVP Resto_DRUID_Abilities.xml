<?xml version="1.0" encoding="utf-8" ?><DRUID><Ability><Name>&amp;gt; Initialize</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PQR_RotationStarted then
  ----------------------------------
  -- Load Data Files
  ----------------------------------

	if not PQR_LoadLua(&amp;quot;PQR_Cokx_PVP_DATA.lua&amp;quot;) then
		PQR_WriteToChat(&amp;quot;You are missing a key file: PQR_Cokx_PVP_DATA.lua. Please put this file in the Data folder and reload PQR. Thank You!&amp;quot;, &amp;quot;Error&amp;quot;)
		PQR_RotationStop()
		return true
		else
		PQR_WriteToChat(&amp;quot;Datafile loaded!&amp;quot;)
	end
	if not PQR_LoadLua(&amp;quot;PQR_Cokx_PVP_Settings.lua&amp;quot;) then
		PQR_WriteToChat(&amp;quot;You are missing a key file: PQR_Cokx_PVP_DATA.lua. Please put this file in the Data folder and reload PQR. Thank You!&amp;quot;, &amp;quot;Error&amp;quot;)
		PQR_RotationStop()
		return true
		else
		PQR_WriteToChat(&amp;quot;Settings loaded!&amp;quot;)
		
	end
	
	
	PQR_RotationStarted = false
end
local numglobal,numperchar = GetNumMacros()
if numperchar &amp;lt; 18 then
if not GetMacroInfo(&amp;quot;AvailableMacros&amp;quot;) then
CreateMacro(&amp;quot;AvailableMacros&amp;quot;, &amp;quot;INV_MISC_QUESTIONMARK&amp;quot;, &amp;quot;/Pause&amp;quot;, 1)
end
end


	--------------------
	-- Register CVars --
	--------------------

	Nova_ValueCheck = {
		{	Var1 = nil,	Text = &amp;quot;Toggles&amp;quot;,				Var2 = nil		},
		{	Var1 = 0,	Text = &amp;quot;Pause&amp;quot;, 				Var2 = 1		}	
	}		

	-----------------------------------------------
	-- Registering the CVars for the CustomFrame --
	-----------------------------------------------
	for i=1, #Nova_ValueCheck do
		if GetCVar(&amp;quot;Nova_&amp;quot;..Nova_ValueCheck[i].Text) == nil then 
			RegisterCVar(&amp;quot;Nova_&amp;quot;..string.gsub(Nova_ValueCheck[i].Text, &amp;quot;%s&amp;quot;, &amp;quot;_&amp;quot;), Nova_ValueCheck[i].Var1) 
		end
		if GetCVar(&amp;quot;Nova_&amp;quot;..Nova_ValueCheck[i].Text..&amp;apos;_Enabled&amp;apos;) == nil then 
			RegisterCVar(&amp;quot;Nova_&amp;quot;..string.gsub(Nova_ValueCheck[i].Text, &amp;quot;%s&amp;quot;, &amp;quot;_&amp;quot;)..&amp;apos;_Enabled&amp;apos;, Nova_ValueCheck[i].Var2) 
		end
	end


	

----------------------------
-- To Integer from String --
----------------------------
for i=1, #Nova_ValueCheck do
	if Nova_ValueCheck[i].Var1 ~= nil then
		_G[&amp;apos;Nova_&amp;apos;..string.gsub(Nova_ValueCheck[i].Text, &amp;apos;%s&amp;apos;, &amp;apos;_&amp;apos;)] = tonumber(GetCVar(&amp;apos;Nova_&amp;apos;..string.gsub(Nova_ValueCheck[i].Text, &amp;apos;%s&amp;apos;, &amp;apos;_&amp;apos;)))
	end
	if Nova_ValueCheck[i].Var2 ~= nil then
		_G[&amp;apos;Nova_&amp;apos;..string.gsub(Nova_ValueCheck[i].Text, &amp;apos;%s&amp;apos;, &amp;apos;_&amp;apos;)..&amp;apos;Check&amp;apos;] = GetCVarBool(&amp;apos;Nova_&amp;apos;..string.gsub(Nova_ValueCheck[i].Text, &amp;apos;%s&amp;apos;, &amp;apos;_&amp;apos;)..&amp;apos;_Enabled&amp;apos;)
	end
end



--------------------
-- Slash Commands --
--------------------
if SlashMacros == nil then
	SlashMacros = true

	
		SLASH_Pause1 = &amp;quot;/Pause&amp;quot;
	function SlashCmdList.Pause(msg, editbox)
		if not GetCVarBool(&amp;quot;Nova_Pause&amp;quot;) then
		
			SetCVar(&amp;quot;Nova_Pause&amp;quot;, 1)
		end
	end
	
end
	

if getInfos == nil then
getInfos = 0
end
CastClick()
settings()
checks()
if  GetTime() - getInfos &amp;gt; 1 and (GCDCheck(33876)) then
getInfos = GetTime()
clearCEH()
if cTtimer == nil then cTtimer = 0
end
if GetTime() - cTtimer &amp;gt; 5 then
cTtimer = GetTime()
clearTables()
end
getcTar()
RangeCheckcTar()
clearcTar()
getmembers()
RangeCheckMembers()
clearmembers()
RangeCheckPet()
interrupt()
if GetItemCount(GetItemInfo(80618)) == 0 then
InteractUnit(&amp;quot;&amp;quot;..GetSpellInfo(57287))end

if GetItemCount(GetItemInfo(5512)) == 0 then
InteractUnit(&amp;quot;&amp;quot;..GetSpellInfo(58275))end
RunMacroText(&amp;quot;/run UIErrorsFrame:Clear()&amp;quot;)
end
GroupInfo()
cokxMacros()

if rotationPause == nil then rotationPause = 0 end

if Nova_Pause == 1 then
rotationPause = GetTime()
SetCVar(&amp;quot;Nova_Pause&amp;quot;, 0)
end
if GetTime() - rotationPause &amp;lt; 0.3 then
if MacroSpellNumber ~= 0 and MacroUnitNumber ~= 0 and GCDCheck(MacroSpellNumber) then
CastSpellByName(GetSpellInfo(MacroSpellNumber),MacroCT)
return true
end
return true
end
SetCVar(&amp;quot;MacroSpell&amp;quot;, 0)
SetCVar(&amp;quot;MacroUnit&amp;quot;, 0)
SetCVar(&amp;quot;MacroHP&amp;quot;, 100)
SetCVar(&amp;quot;MacroDR&amp;quot;,nil)
SetCVar(&amp;quot;MacroBuff&amp;quot;,nil)
SetCVar(&amp;quot;MacroDebuff&amp;quot;,nil)



if numberfriends == 0 or numberfriends &amp;gt; #members then
numberfriends = #members or nil
end




if PQR_IsMoving(.01) or (HaveBuff(&amp;quot;player&amp;quot;,132158,0)) then
IsMoving = 0
else
IsMoving = 1
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Nourish</Name><Default>false</Default><SpellID>50464</SpellID><Actions></Actions><Lua>for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 90 
and not PQR_IsMoving(0.1) 
and not UnitBuffID(&amp;quot;player&amp;quot;,132158)
and UnitInRange(members[i])
and LineOfSight(members[i])
then
  PQR_CustomTarget = members[i]
  return true
end
end</Lua><RecastDelay>1000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mark of the Wild</Name><Default>false</Default><SpellID>1126</SpellID><Actions></Actions><Lua>for i=1,numberfriends do 
    if not HaveBuff(members[i],{115921,20217,1126,90363},3) 
    and UnitIsPlayer(members[i])
   and UnitInRange(members[i])
   and LineOfSight(members[i])
    then return true end
  end</Lua><RecastDelay>10000</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Touch</Name><Default>false</Default><SpellID>5185</SpellID><Actions></Actions><Lua>--Healing Touch
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 60
and UnitBuffID(&amp;quot;player&amp;quot;,132158)
and LineOfSight(members[i])
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
  return true
  end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rejuvenation</Name><Default>false</Default><SpellID>774</SpellID><Actions>/use 10</Actions><Lua>-- Reju
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 97
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and not HaveBuff(members[i],774,1,&amp;quot;PLAYER&amp;quot;) 
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
 
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Regrowth</Name><Default>false</Default><SpellID>8936</SpellID><Actions></Actions><Lua>for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt;= 80 
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and (UnitBuffID(&amp;quot;player&amp;quot;,33891) or UnitBuffID(&amp;quot;player&amp;quot;,110806) or  not PQR_IsMoving(0.1))
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
  return true
end



if CalculateHP(members[i]) &amp;lt;= 95 
and UnitBuffID(&amp;quot;player&amp;quot;,16870)
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and (UnitBuffID(&amp;quot;player&amp;quot;,33891) or UnitBuffID(&amp;quot;player&amp;quot;,110806) or  not PQR_IsMoving(0.1))
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
  return true
end
end</Lua><RecastDelay>400</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Lifebloom</Name><Default>false</Default><SpellID>33763</SpellID><Actions></Actions><Lua>memberid = 1
lbactive = false
Lbcount = 0
Lbtimer = 0
for i = 1, #members do
if HaveBuff(members[i],33763,0,&amp;quot;PLAYER&amp;quot;)
then 
_,_,_,Lbcount,_,_,Lbtimer = UnitBuffID(members[i],33763,&amp;quot;PLAYER&amp;quot;) 
lbactive = true
memberid = i
end
end

   if lbactive == true
  and (UnitInRange(members[memberid]) or eMembers[memberid].Range &amp;lt; 40)
  and LineOfSight(members[memberid])
  and HaveBuff(&amp;quot;player&amp;quot;,114108)
  and not HaveDebuff(members[memberid],{33786,113506},0)
  then 
    PQR_CustomTarget = members[memberid]
    return true 
  end


for i = 1, numberfriends do
  if lbactive == true
  and CalculateHP(members[i]) &amp;lt; (CalculateHP(members[memberid])-10)
  and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
  and LineOfSight(members[i])
  and not HaveDebuff(members[i],{33786,113506},0)
      and UnitIsPlayer(members[i])
  then 
    PQR_CustomTarget = members[i] 
    return true 
  end
end

   if lbactive == true
  and ((Lbcount ~= 3)
   or (CalculateHP(members[memberid]) &amp;gt; 75 and Lbtimer - GetTime() &amp;lt;= 3))
  and (UnitInRange(members[memberid]) or eMembers[memberid].Range &amp;lt; 40)
  and LineOfSight(members[memberid])
  and not HaveDebuff(members[memberid],{33786,113506},0)
  then 
    PQR_CustomTarget = members[memberid]
    return true 
  end


for i = 1, numberfriends do
  if CalculateHP(members[i]) &amp;lt;= 99
  and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
  and LineOfSight(members[i])
    and UnitIsPlayer(members[i])
  and lbactive == false  
  and not HaveDebuff(members[i],{33786,113506},0)
  then 
    PQR_CustomTarget = members[i] 
    return true 
  end
end


for i = 1, #members do
local _,_,_,LTbcount,_,_,LTbtimer = UnitBuffID(members[i],33763,&amp;quot;PLAYER&amp;quot;) 
if HaveBuff(&amp;quot;playeR&amp;quot;,117679,0) 
and CalculateHP(members[i]) &amp;lt; 90 
and LTbcount ~= 3
  and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
  and LineOfSight(members[i])
  and not HaveDebuff(members[i],{33786,113506},0)
  then 
    PQR_CustomTarget = members[i] 
    return true 
  end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>Swiftmend</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Swiftmend
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 85
and (GetSpellCooldown(GetSpellInfo(18562))+select(2,GetSpellCooldown(GetSpellInfo(18562)))-GetTime()&amp;lt; 1.5)
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and HaveBuff(members[i],774,0) 
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
  CastSpellByName(GetSpellInfo(18562),PQR_CustomTarget)
  return true
 end

if CalculateHP(members[i]) &amp;lt; 85
and (GetSpellCooldown(GetSpellInfo(18562))+select(2,GetSpellCooldown(GetSpellInfo(18562)))-GetTime()&amp;lt; 1.5)
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and HaveBuff(members[i],8936,0)
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
  CastSpellByName(GetSpellInfo(18562),PQR_CustomTarget)
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Innervate</Name><Default>false</Default><SpellID>29166</SpellID><Actions></Actions><Lua>if 100 * UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) &amp;lt;= 55
and UnitAffectingCombat(&amp;quot;player&amp;quot;) 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>NS Healing Touch</Name><Default>false</Default><SpellID>132158</SpellID><Actions>/cast lifeblood</Actions><Lua>-- NSHeal
for i = 1, numberfriends do
if GCDCheck(132158)
and CalculateHP(members[i]) &amp;lt; 25
and UnitInRange(members[i])
    and UnitIsPlayer(members[i])
and LineOfSight(members[i])
and not HaveDebuff(members[i],{33786,113506},0)
then
  CastSpellByName(GetSpellInfo(132158))
  PQR_CustomTarget = members[i]
  CastSpellByName(GetSpellInfo(5185),PQR_CustomTarget)
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ironbark</Name><Default>false</Default><SpellID>102342</SpellID><Actions></Actions><Lua>-- IB
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 60 
and UnitInRange(members[i])
and LineOfSight(members[i])
and UnitIsPlayer(members[i])
and not HaveBuff(members[i],defBuff(),0)
and not HaveDebuff(members[i],{33786,113506},0)    
and UnitAffectingCombat(members[i])
then
  PQR_CustomTarget = members[i]
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability><Ability><Name>Wild Growth</Name><Default>false</Default><SpellID>48438</SpellID><Actions></Actions><Lua>for i=1, #members do
if aoeHeal(95,40) &amp;gt; 5
and GCDCheck(48438)
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Tranquility</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsRightControlKeyDown()
and IsUsableSpell(740)
and select(2,GetSpellCooldown(740)) &amp;lt; 2
then
CastSpellByName(GetSpellInfo(740))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Barkskin</Name><Default>false</Default><SpellID>22812</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 50 
and UnitAffectingCombat(&amp;quot;player&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Faerie Fire</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #cTar do
if not HaveDebuff(cTar[i],770,1) 
and UnitExists(cTar[i]) 
and LineOfSight(cTar[i])
and UnitInRange(cTar[i])
and ecTar[i].Range &amp;lt; 40
and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) 
and not HaveBuff(cTar[i],iDMG(),0)
and not HaveBuff(cTar[i],iSpell(),0)
then
PQR_CustomTarget = cTar[i]
CastSpellByName(GetSpellInfo(770),PQR_CustomTarget)
return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rebirth</Name><Default>false</Default><SpellID>20484</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;mouseover&amp;quot;) and
   UnitIsDeadOrGhost(&amp;quot;mouseover&amp;quot;) and
   UnitCanCooperate(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) and
   IsSpellInRange(&amp;quot;Rebirth&amp;quot;, &amp;quot;mouseover&amp;quot;) and 
   GetSpellCooldown(20484) == 0 and
   UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then
return true
end</Lua><RecastDelay>1000</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Trinket 2</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if CalculateHP(members[i]) &amp;lt; 40
and GetInventoryItemCooldown(&amp;quot;player&amp;quot;,14) == 0
then UseInventoryItem(14)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Force of Nature</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- FON
for i = 1, numberfriends do
if select(2,GetTalentRowSelectionInfo(4)) == 12
and IsSpellKnown(102693)
and CalculateHP(members[i]) &amp;lt; 90
and UnitInRange(members[i])
and GetSpellCooldown(102693) == 0
then
  CastSpellByName(GetSpellInfo(102693))
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>CenarionWard</Name><Default>false</Default><SpellID>102351</SpellID><Actions></Actions><Lua>for i = 1, #members do
if select(2,GetTalentRowSelectionInfo(2)) == 6
and IsSpellKnown(102351)
and LineOfSight(members[i])
and CalculateHP(members[i]) &amp;lt; 75
and UnitInRange(members[i])
and GetSpellCooldown(102351) == 0
and not HaveDebuff(members[i],{33786,113506},0)
then
PQR_CustomTarget = members[i]
return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Natures Vigil</Name><Default>false</Default><SpellID>124974</SpellID><Actions>/cast lifeblood</Actions><Lua>-- NV
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 50 
and UnitAffectingCombat(members[i])
and UnitInRange(members[i])
    and UnitIsPlayer(members[i])
then
  PQR_CustomTarget = members[i]
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Nature&amp;apos;s Cure CC</Name><Default>false</Default><SpellID>88423</SpellID><Actions></Actions><Lua>for i=1,numberfriends do 
    if  LineOfSight(members[i])
    and GCDCheck(88423)
    and UnitIsPlayer(members[i])
   and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
    and IsHealer(members[i])
    and (not HaveDebuff(members[i],{34914,30108,131736},0) or CalculateHP(&amp;quot;player&amp;quot;) &amp;gt; 90)
  	and (HaveDebuff(members[i],dMagicCC(),2)
     or HaveDebuff(members[i],dCurseCC(),2)
     or HaveDebuff(members[i],dSilence(),2))

    then
      PQR_CustomTarget = members[i]
       return true end
    end
    
    for i=1,numberfriends do 
    if LineOfSight(members[i])
    and GCDCheck(88423)
        and UnitIsPlayer(members[i])
    and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
   and (not HaveDebuff(members[i],{34914,30108,131736},0) or CalculateHP(&amp;quot;player&amp;quot;) &amp;gt; 90)
   and (HaveDebuff(members[i],dMagicCC(),2)
    or HaveDebuff(members[i],dCurseCC(),2)
         or HaveDebuff(members[i],dPoisonCC(),3) )
    then
      PQR_CustomTarget = members[i]
       return true end
    end
    
   for i=1,numberfriends do 
    if LineOfSight(members[i])
    and GCDCheck(88423)
        and UnitIsPlayer(members[i])
    and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
   and (not HaveDebuff(members[i],{34914,30108,131736},0) or CalculateHP(&amp;quot;player&amp;quot;) &amp;gt; 90)
   and  UnitPowerMax(members[i]) &amp;lt; 100000
   and UnitExists(members[i]..&amp;quot;target&amp;quot;)
   and CalculateHP(members[i]..&amp;quot;target&amp;quot;) &amp;lt; 99
  and HaveDebuff(members[i],dRoot(),1)  then
      PQR_CustomTarget = members[i]
       return true end
    end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wrath</Name><Default>false</Default><SpellID>5176</SpellID><Actions></Actions><Lua>if IsUsableSpell(5176)
and (not UnitBuffID(&amp;quot;player&amp;quot;,768) and not UnitBuffID(&amp;quot;player&amp;quot;,40120) and not UnitBuffID(&amp;quot;player&amp;quot;,783) and not UnitBuffID(&amp;quot;player&amp;quot;,1066) and not UnitBuffID(&amp;quot;player&amp;quot;,5487))
and druidrestodmg
and UnitExists(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
and not PQR_IsMoving(1)then 
  return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonfire</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>if druidrestodmg then
RunMacroText(&amp;quot;/cancelaura Travel Form&amp;quot;)
end
if (not HaveDebuff(&amp;quot;target&amp;quot;,8921,3,&amp;quot;PLAYER&amp;quot;) or  PQR_IsMoving(1))
and (not UnitBuffID(&amp;quot;player&amp;quot;,768) and not UnitBuffID(&amp;quot;player&amp;quot;,40120) and not UnitBuffID(&amp;quot;player&amp;quot;,783) and not UnitBuffID(&amp;quot;player&amp;quot;,1066) and not UnitBuffID(&amp;quot;player&amp;quot;,5487))
and druidrestodmg
and UnitExists(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>TravelForm</Name><Default>false</Default><SpellID>783</SpellID><Actions></Actions><Lua>if (select(4,UnitDebuffID(&amp;quot;player&amp;quot;,108200)))==3 or (select(4,UnitDebuffID(&amp;quot;player&amp;quot;,108200)))==4  then return true end

if HaveDebuff(&amp;quot;PLAYER&amp;quot;,{339,102359,122,111340.96294,102051},0) then return true end


if UnitBuffID(&amp;quot;player&amp;quot;,33891) then return false end
local InterruptSpells = { 118,51514,20066 }

if UnitPower(&amp;quot;player&amp;quot;) &amp;gt; 5 then
	for y=1, 5 do
		local aTarget = &amp;quot;arena&amp;quot;..tostring(y)
		if UnitExists(aTarget) then
			local spellName, _, _, _, _, endCast, _, _, canInterrupt = UnitCastingInfo(aTarget)
			for _, v in ipairs(InterruptSpells) do
				if GetSpellInfo(v) == spellName and canInterrupt == false then
					if ((endCast/1000) - GetTime()) &amp;lt; 1.0 
					and LineOfSight(aTarget)
					and PQR_UnitDistance(&amp;quot;player&amp;quot;,aTarget) &amp;lt;33 then
						
						return true
					end
				end
			end
		end
	end
	local fTarget = &amp;quot;focus&amp;quot;
	if UnitExists(fTarget) then
		local spellName, _, _, _, _, endCast, _, _, canInterrupt = UnitCastingInfo(fTarget)
		for _, v in ipairs(InterruptSpells) do
			if GetSpellInfo(v) == spellName and canInterrupt == false then
				if ((endCast/1000) - GetTime()) &amp;lt; 1.0 
				and LineOfSight(fTarget)
				and PQR_UnitDistance(&amp;quot;player&amp;quot;,fTarget) &amp;lt;33 then
					
					return true
				end
			end
		end
	end
	local tTarget = &amp;quot;target&amp;quot;
	if UnitExists(tTarget) then
		local spellName, _, _, _, _, endCast, _, _, canInterrupt = UnitCastingInfo(tTarget)
		for _, v in ipairs(InterruptSpells) do
			if GetSpellInfo(v) == spellName and canInterrupt == false then
				if ((endCast/1000) - GetTime()) &amp;lt; 1.0 
				and LineOfSight(tTarget)
				and PQR_UnitDistance(&amp;quot;player&amp;quot;,tTarget) &amp;lt;33 then
					
					return true
				end
			end
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>TreeOfLife</Name><Default>false</Default><SpellID>106731</SpellID><Actions>/cast lifeblood</Actions><Lua>for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt;= 40
and eMembers[i].Range &amp;lt; 40
and (GCDCheck(106731) or HaveBuff(&amp;quot;player&amp;quot;,117679,0))
and not HaveBuff(&amp;quot;player&amp;quot;,33891,0)
    and UnitIsPlayer(members[i])
and UnitAffectingCombat(members[i])
then
--CastSpellByName(GetSpellInfo(106731))
   return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Natures Grasp</Name><Default>false</Default><SpellID>16689</SpellID><Actions></Actions><Lua>for i=1, #cTar do
if UnitExists(cTar[i]) 
and UnitPowerMax(cTar[i]) &amp;lt; 200000
and LineOfSight(cTar[i])
and ecTar[i].Range &amp;lt; 15
and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) 
then
return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Stun/Blind</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local ccDebuffs = {108194,115001,91800,91797,33786,99,2637,22570,5211,9005,102546,81261,110698,113004,113056,126458,47476,1513,19503,19386,34490,90337,24394,126355,118271,44572,31661,118,55021,126451,122242,119392,119381,115078,117368,116709,105421,115752,105593,853,119072,20066,10326,113506,605,88625,64044,8122,113792,87204,15487,64058,2094,1833,1776,408,113953,6770,1330,51722,51514,113287,5782,118699,5484,6789,30283,104045,89766,7922,118895,5246,20511,132168,105771}

for i=1, #cTar do
if 
UnitExists(cTar[i])
and IsSpellKnown(99)
and select(2,GetSpellCooldown(99)) == 0
and HaveBuff(cTar[i],attentionBuffs(),3) 
and not HaveDebuff(cTar[i],ccDebuffs,1)
and LineOfSight(cTar[i])
and not UnitIsUnit(&amp;quot;target&amp;quot;,cTar[i])
and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) 
and ecTar[i].Range &amp;lt; 13
 then
PQR_CustomTarget = cTar[i]
CastSpellByName(GetSpellInfo(99),PQR_CustomTarget)

end
end

for i=1, #cTar do
if UnitExists(cTar[i]) 
and IsSpellKnown(5211)
and select(2,GetSpellCooldown(5211)) == 0
and HaveBuff(cTar[i],attentionBuffs(),3) 
and not HaveDebuff(cTar[i],ccDebuffs,1)
and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) 
then
PQR_CustomTarget = cTar[i]
CastSpellByName(GetSpellInfo(5211),PQR_CustomTarget)
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wild Growth NE</Name><Default>false</Default><SpellID>48438</SpellID><Actions></Actions><Lua>-- WNE
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 40
and GCDCheck(48438)
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
then
  PQR_CustomTarget = members[i]
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Reju NE</Name><Default>false</Default><SpellID>774</SpellID><Actions>/use 10</Actions><Lua>for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt; 40
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and not HaveBuff(members[i],774,1,&amp;quot;PLAYER&amp;quot;) 
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
 
  return true
end
end

for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt;= 95
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and not HaveBuff(members[i],774,1,&amp;quot;PLAYER&amp;quot;) 
and HaveBuff(members[i],33763,0,&amp;quot;PLAYER&amp;quot;)
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
 
  return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>JukeBox</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not JukeBoxHero then
	JukeBoxHero = CreateFrame(&amp;quot;FRAME&amp;quot;, nil, UIParent)
	JukeBoxHero:Hide()
end

function JukeBoxHero_OnEvent(self, event, ...)
	local type, _, sourceGUID, sourceNAME, _, _, destGUID, destNAME = select(2, ...)
	if event == &amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot; then
		if type == &amp;quot;SPELL_CAST_SUCCESS&amp;quot; then
			if destGUID == UnitGUID(&amp;quot;player&amp;quot;)
			and not HaveBuff(&amp;quot;player&amp;quot;,104773,0) then
				local spellId = select(12, ...)
				local listId = {
					6552, --Pummel
					1766, --Kick
					47528, --Mind Freeze
					47476, --Strangulate
					96231, --Rebuke
					57994, --Wind Shear
					2139, --Counterspell
					19647, --Spell Lock
					80965 --Skull Bash
				}
				for i = 1, #listId do
					if listId[i] == spellId then
						SpellStopCasting()
						SpellStopCasting()
						SpellStopCasting()
						PQR_DelayRotation(.5)
						return true
					end
				end
			end
		end
	end
end

JukeBoxHero:SetScript(&amp;quot;OnEvent&amp;quot;, JukeBoxHero_OnEvent)
JukeBoxHero:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>BearBox</Name><Default>false</Default><SpellID>5487</SpellID><Actions></Actions><Lua>if not GladiusBear then
	GladiusBear = CreateFrame(&amp;quot;FRAME&amp;quot;, nil, UIParent)
	GladiusBear:Hide()
end

function GladiusBear_OnEvent(self, event, ...)
	local type, _, sourceGUID, sourceNAME, _, _, destGUID, destNAME = select(2, ...)
	if event == &amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot; then
		if type == &amp;quot;SPELL_CAST_SUCCESS&amp;quot; then
			if destGUID == UnitGUID(&amp;quot;player&amp;quot;) then
				local spellId = select(12, ...)
				local listId = {
					110698,		-- Hammer of Justice (Paladin)
					1330,		-- Garrote - Silence
					108194,		-- Asphyxiate
					22570,		-- Maim
					5211,		-- Mighty Bash
					9005,		-- Pounce
					102546,		-- Pounce (Incarnation)
					91800,		-- Gnaw
					91797,		-- Monstrous Blow (Dark Transformation)
					44572,		-- Deep Freeze
					119381,		-- Leg Sweep
					105593,		-- Fist of Justice
					853,		-- Hammer of Justice
					1833,		-- Cheap Shot
					408,		-- Kidney Shot
					30283,		-- Shadowfury
					89766,		-- Axe Toss (Felguard/Wrathguard)
					7922,		-- Charge Stun
					132168,		-- Shockwave
					105771		-- Warbringer
				}
				for i = 1, #listId do
					if listId[i] == spellId then
						CastSpellByName(GetSpellInfo(5487),nil)
						end
				end
			end
		end
	end
end

GladiusBear:SetScript(&amp;quot;OnEvent&amp;quot;, GladiusBear_OnEvent)
GladiusBear:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>ShiftBox</Name><Default>false</Default><SpellID>783</SpellID><Actions></Actions><Lua>if not GladiusShift then
	GladiusShift = CreateFrame(&amp;quot;FRAME&amp;quot;, nil, UIParent)
	GladiusShift:Hide()
end

function GladiusShift_OnEvent(self, event, ...)
	local type, _, sourceGUID, sourceNAME, _, _, destGUID, destNAME = select(2, ...)
	if event == &amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot; then
		if type == &amp;quot;SPELL_CAST_SUCCESS&amp;quot; then
			if destGUID == UnitGUID(&amp;quot;player&amp;quot;) then
				local spellId = select(12, ...)
				local listId = {
					51514,		-- Hex
					118,		-- Polymorph
					61305,		-- Polymorph: Black Cat
					28272,		-- Polymorph: Pig
					61721,		-- Polymorph: Rabbit
					61780,		-- Polymorph: Turkey
					28271		-- Polymorph: Turtle
				}
				for i = 1, #listId do
					if listId[i] == spellId then
						CastSpellByName(GetSpellInfo(783),nil)
						end
				end
			end
		end
	end
end

GladiusShift:SetScript(&amp;quot;OnEvent&amp;quot;, GladiusShift_OnEvent)
GladiusShift:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>TravelForm End</Name><Default>false</Default><SpellID>783</SpellID><Actions></Actions><Lua>if PQR_IsMoving(2)
and (not UnitBuffID(&amp;quot;player&amp;quot;,768) and not UnitBuffID(&amp;quot;player&amp;quot;,40120) and not UnitBuffID(&amp;quot;player&amp;quot;,783) and not UnitBuffID(&amp;quot;player&amp;quot;,1066) and not UnitBuffID(&amp;quot;player&amp;quot;,5487))
then return true

end</Lua><RecastDelay>6000</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Faerie Fire RD</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i=1, #cTar do
local class = select(2, UnitClass(cTar[i]))
if not HaveDebuff(cTar[i],770,1) 
and UnitExists(cTar[i]) 
and ecTar[i].Range &amp;lt; 40
and LineOfSight(cTar[i])
and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[i]) 
and (class==&amp;quot;DRUID&amp;quot; or class==&amp;quot;ROGUE&amp;quot;)
and not HaveBuff(cTar[i],iDMG(),0)
and not HaveBuff(cTar[i],iSpell(),0)
then
PQR_CustomTarget = cTar[i]
CastSpellByName(GetSpellInfo(770),PQR_CustomTarget)
return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rake</Name><Default>false</Default><SpellID>1822</SpellID><Actions></Actions><Lua>if not HaveDebuff(&amp;quot;target&amp;quot;,1822,2,&amp;quot;PLAYER&amp;quot;) 
and druidrestodmg
and UnitBuffID(&amp;quot;player&amp;quot;,768)
and GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;lt; 5
and UnitExists(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>FBITE</Name><Default>false</Default><SpellID>22568</SpellID><Actions></Actions><Lua>if GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;gt;= 5
and UnitBuffID(&amp;quot;player&amp;quot;,768)
and druidrestodmg
and UnitExists(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mangle</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if GetComboPoints(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) &amp;lt; 5
and UnitBuffID(&amp;quot;player&amp;quot;,768)
and druidrestodmg
and UnitExists(&amp;quot;target&amp;quot;) 
and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
then 
  CastSpellByName(GetSpellInfo(33876),nil)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>StopDmg</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;gt; 60
and druidrestodmg
and UnitInRange(members[i])
then
RunMacroText(&amp;quot;/cancelaura &amp;quot;..GetSpellInfo(783))
   return true
  end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Catform</Name><Default>false</Default><SpellID>768</SpellID><Actions></Actions><Lua>if UnitAffectingCombat(&amp;quot;player&amp;quot;)
and druidrestodmg
and (IsSpellInRange(GetSpellInfo(33876),&amp;quot;target&amp;quot;) == 1 )
and (not UnitBuffID(&amp;quot;player&amp;quot;,768) and not UnitBuffID(&amp;quot;player&amp;quot;,783) and not UnitBuffID(&amp;quot;player&amp;quot;,5487))
then return true

end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Auto Cyclone Attention</Name><Default>false</Default><SpellID>33786</SpellID><Actions></Actions><Lua>if cycloneon == nil then  cycloneon = 0 end
if cycloneonhealer == nil then  cycloneonhealer = 0 end
if unitcycloneed == nil then  unitcycloneed = 0 end

for i=1 , #cTar do
	if UnitExists(cTar[i])
	and HaveDebuff(cTar[i],{33786},0,&amp;quot;Player&amp;quot;)
	then
	if IsHealer(cTar[i]) 
	then
	cycloneonhealer = 1
	end
	 cycloneon = 1
	unitcycloneed = UnitGUID(cTar[i])
	end
end


for i=1, #cTar do
	if UnitExists(cTar[i])
	and unitcycloneed == UnitGUID(cTar[i])
	and not HaveDebuff(cTar[i],{33786},2,&amp;quot;Player&amp;quot;)
	then
	cycloneonhealer = 0
	cycloneon = 0
	end
end





	
	for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and cycloneon == 0
	 and IsMoving == 1
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	 and CokxDRInfo(cTar[j],&amp;quot;cyclone&amp;quot;) &amp;lt; 3
	 and UnitIsPlayer(cTar[j])
	 and not primaryTarget(cTar[j])
	 and not HaveDebuff(cTar[j],605,0) 
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 25
          and (100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)) &amp;gt; 30
	 and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and HaveBuff(cTar[j],attentionBuffs(),1)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499},1) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end</Lua><RecastDelay>400</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>AutoCyclone</Name><Default>false</Default><SpellID>33786</SpellID><Actions></Actions><Lua>for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and cycloneonhealer == 0
	 and IsMoving == 1
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and not primaryTarget(cTar[j])
	 and CokxDRInfo(cTar[j],&amp;quot;cyclone&amp;quot;) &amp;lt; 3
	 and LineOfSight(cTar[j])
	 and not HaveDebuff(cTar[j],605,0) 
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and UnitIsPlayer(cTar[j])
	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 25
     and IsHealer(cTar[j])
     and (100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)) &amp;gt; 30
     and not UnitCreatureType(cTar[j]) == &amp;quot;Undead&amp;quot;
	 and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499}) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end
	
	

		
		for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and cycloneon == 0
	 and IsMoving == 1
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j])
	 and CokxDRInfo(cTar[j],&amp;quot;cyclone&amp;quot;) &amp;lt; 3 
	 and not primaryTarget(cTar[j])
	 and not HaveDebuff(cTar[j],605,0) 
	 and UnitIsPlayer(cTar[j])
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 25
          and (100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)) &amp;gt; 30
	 and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499}) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end</Lua><RecastDelay>400</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>AutoRootAttention</Name><Default>false</Default><SpellID>339</SpellID><Actions></Actions><Lua>if rooton == nil then  rooton = 0 end
if rootonhealer == nil then  rootonhealer = 0 end
if unitrooted == nil then  unitrooted = 0 end

for i=1 , #cTar do
	if UnitExists(cTar[i])
	and HaveDebuff(cTar[i],{339},0,&amp;quot;Player&amp;quot;)
	then
	if IsHealer(cTar[i]) 
	then
	rootonhealer = 1
	end
	 rooton = 1
	unitrooted = UnitGUID(cTar[i])
	end
end



for i=1, #cTar do
	if UnitExists(cTar[i])
	and unitrooted == UnitGUID(cTar[i])
	and not HaveDebuff(cTar[i],{339},2,&amp;quot;Player&amp;quot;)
	then
	rootonhealer = 0
	rooton = 0
	end
end






	
	for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and rooton == 0
	 and (IsMoving == 1 or HaveBuff(&amp;quot;player&amp;quot;,33891,0))
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and not UnitIsUnit(cTar[j],&amp;quot;target&amp;quot;)
	 and CokxDRInfo(cTar[j],&amp;quot;root&amp;quot;) &amp;lt; 3
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	 and UnitIsPlayer(cTar[j])
	 and not HaveDebuff(cTar[j],aRoots(),2)
	 and not HaveDebuff(cTar[j],605,0) 
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 35
 	 and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and HaveBuff(cTar[j],attentionBuffs(),1)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499}) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end
	
	

	
	
		for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and rooton == 0
	 and (IsMoving == 1 or HaveBuff(&amp;quot;player&amp;quot;,33891,0))
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and CokxDRInfo(cTar[j],&amp;quot;root&amp;quot;) &amp;lt; 3
	 and not UnitIsUnit(cTar[j],&amp;quot;target&amp;quot;)
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	 and UnitIsPlayer(cTar[j])
	 	 and not HaveDebuff(cTar[j],aRoots(),2)
	 and not HaveDebuff(cTar[j],605,0) 
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 and IsHealer(cTar[j])
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 35
     and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499}) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end
	
	

	
	---------------------------3
			for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and rooton == 0
	 and (IsMoving == 1 or HaveBuff(&amp;quot;player&amp;quot;,33891,0))
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and CokxDRInfo(cTar[j],&amp;quot;root&amp;quot;) &amp;lt; 3
	 	 and not HaveDebuff(cTar[j],aRoots(),2)
	 and not UnitIsUnit(cTar[j],&amp;quot;target&amp;quot;)
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	 and UnitIsPlayer(cTar[j])
	 and not HaveDebuff(cTar[j],605,0) 
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 and UnitPowerMax(cTar[j]) &amp;lt; 100000
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 35
     and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499}) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end</Lua><RecastDelay>400</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Auto Hibernate</Name><Default>false</Default><SpellID>2637</SpellID><Actions></Actions><Lua>if hibernateon == nil then  hibernateon = 0 end
if hibernateonhealer == nil then  hibernateonhealer = 0 end
if unithibernateed == nil then  unithibernateed = 0 end

for i=1 , #cTar do
	if UnitExists(cTar[i])
	and HaveDebuff(cTar[i],{2637},0,&amp;quot;Player&amp;quot;)
	then
	if IsHealer(cTar[i]) 
	then
	hibernateonhealer = 1
	end
	 hibernateon = 1
	unithibernateed = UnitGUID(cTar[i])
	end
end


for i=1, #cTar do
	if UnitExists(cTar[i])
	and unithibernateed == UnitGUID(cTar[i])
	and not HaveDebuff(cTar[i],{2637},2,&amp;quot;Player&amp;quot;)
	then
	hibernateonhealer = 0
	hibernateon = 0
	end
end





	
	for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and hibernateon == 0
	 and IsMoving == 1
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	and UnitCreatureType(cTar[j]) == &amp;quot;Beast&amp;quot;
	 and UnitIsPlayer(cTar[j])
	 and CokxDRInfo(cTar[j],&amp;quot;poly&amp;quot;) &amp;lt; 3
	 and not HaveDebuff(cTar[j],605,0) 
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 29
	 and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499}) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end</Lua><RecastDelay>400</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Auto Cyclone Attention High HP</Name><Default>false</Default><SpellID>33786</SpellID><Actions></Actions><Lua>if cycloneon == nil then  cycloneon = 0 end
if cycloneonhealer == nil then  cycloneonhealer = 0 end
if unitcycloneed == nil then  unitcycloneed = 0 end

for i=1 , #cTar do
	if UnitExists(cTar[i])
	and HaveDebuff(cTar[i],{33786},0,&amp;quot;Player&amp;quot;)
	then
	if IsHealer(cTar[i]) 
	then
	cycloneonhealer = 1
	end
	 cycloneon = 1
	unitcycloneed = UnitGUID(cTar[i])
	end
end


for i=1, #cTar do
	if UnitExists(cTar[i])
	and unitcycloneed == UnitGUID(cTar[i])
	and not HaveDebuff(cTar[i],{33786},2,&amp;quot;Player&amp;quot;)
	then
	cycloneonhealer = 0
	cycloneon = 0
	end
end




	
	for j=1 , #cTar do
	 if  UnitExists(cTar[j])
	 and cycloneon == 0
	 and IsMoving == 1
	 and CokxDRInfo(cTar[j],&amp;quot;cyclone&amp;quot;) &amp;lt; 3
	 and not UnitIsDeadOrGhost(cTar[j]) 
	 and UnitCanAttack(&amp;quot;player&amp;quot;,cTar[j]) 
	 and CalculateHP(members[1]) &amp;gt; 70
	 and UnitIsPlayer(cTar[j])
	 	 and cycloneloslos == 1
	 and not primaryTarget(cTar[j])
	 and not HaveDebuff(cTar[j],605,0) 
	 	 and not HaveBuff(cTar[j],{49039,18499},1.3)
	 and not HaveDebuff(cTar[j],dPoisonCC(),3)
	 and LineOfSight(cTar[j])
	 	 and not HaveBuff(&amp;quot;player&amp;quot;,114168,0)
	 and ecTar[j].Range ~= nil
     and ecTar[j].Range &amp;lt; 25
          and (100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)) &amp;gt; 30
	 and not HaveDebuff(cTar[j],dCurseCC(),3)
	 and not HaveDebuff(cTar[j],dMagicCC(),3)
	 and not HaveDebuff(cTar[j],dSilence(),3)
	 and not HaveDebuff(cTar[j],dSilenceCC(),3)
	 and not HaveDebuff(cTar[j],dCC(),3)
	 and HaveBuff(cTar[j],attentionBuffs(),1)
	 and not HaveDebuff(cTar[j],{33786, -- Cyclone
113506,18499},1) -- Cyclone
	 and not HaveBuff(cTar[j],iDMG(),1.5)
	 and not HaveBuff(cTar[j],iSpell(),1.5)
	
	 then
	 PQR_CustomTarget=cTar[j]
	--CastSpellByName(GetSpellInfo(5782)cTar[j])
	return true
	end
	end</Lua><RecastDelay>400</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Manual Cyclone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if  100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;) &amp;gt; 15 
and 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;) &amp;lt; 70 
and UnitBuffID(&amp;quot;player&amp;quot;,69369)
and UnitBuffID(&amp;quot;target&amp;quot;,1022)
then
CastSpellByName(GetSpellInfo(33786),&amp;quot;target&amp;quot;)
saveinstant = 0
return true
 end
 
if hibernatemod 
and UnitCreatureType(&amp;quot;mouseover&amp;quot;) == &amp;quot;Beast&amp;quot;
and UnitBuffID(&amp;quot;player&amp;quot;,69369)
and CokxDRInfo(&amp;quot;mouseover&amp;quot;,&amp;quot;poly&amp;quot;) &amp;lt; 3
and UnitExists(&amp;quot;mouseover&amp;quot;)
then
CastSpellByName(GetSpellInfo(2637),&amp;quot;mouseover&amp;quot;)
saveinstant = 0
return true
 end

if hibernatemod 
and UnitCreatureType(&amp;quot;focus&amp;quot;) == &amp;quot;Beast&amp;quot;
and UnitBuffID(&amp;quot;player&amp;quot;,69369)
and CokxDRInfo(&amp;quot;focus&amp;quot;,&amp;quot;poly&amp;quot;) &amp;lt; 3
and UnitExists(&amp;quot;focus&amp;quot;)
then
CastSpellByName(GetSpellInfo(2637),&amp;quot;focus&amp;quot;)
saveinstant = 0
return true
 end
 
 if hibernatemod 
and UnitCreatureType(&amp;quot;target&amp;quot;) == &amp;quot;Beast&amp;quot;
and UnitBuffID(&amp;quot;player&amp;quot;,69369)
and CokxDRInfo(&amp;quot;target&amp;quot;,&amp;quot;poly&amp;quot;) &amp;lt; 3
and UnitExists(&amp;quot;target&amp;quot;)
and not UnitExists(&amp;quot;focus&amp;quot;)
and not UnitExists(&amp;quot;mouseover&amp;quot;)
then
CastSpellByName(GetSpellInfo(2637),&amp;quot;Target&amp;quot;)
saveinstant = 0
return true
 end

----------------------------------------

if  cyclonemod 
and UnitExists(&amp;quot;mouseover&amp;quot;)
and CokxDRInfo(&amp;quot;mouseover&amp;quot;,&amp;quot;cyclone&amp;quot;) &amp;lt; 3
then
CastSpellByName(GetSpellInfo(33786),&amp;quot;mouseover&amp;quot;)
saveinstant = 0
return true
 end

if  cyclonemod 
and UnitExists(&amp;quot;focus&amp;quot;)
and CokxDRInfo(&amp;quot;focus&amp;quot;,&amp;quot;cyclone&amp;quot;) &amp;lt; 3
then
CastSpellByName(GetSpellInfo(33786),&amp;quot;focus&amp;quot;)
saveinstant = 0
return true
 end
 
 if  cyclonemod 
and UnitExists(&amp;quot;target&amp;quot;)
and not UnitExists(&amp;quot;focus&amp;quot;)
and CokxDRInfo(&amp;quot;target&amp;quot;,&amp;quot;cyclone&amp;quot;) &amp;lt; 3
and not UnitExists(&amp;quot;mouseover&amp;quot;)
then
CastSpellByName(GetSpellInfo(33786),&amp;quot;target&amp;quot;)
saveinstant = 0
return true
 end

---------Roots--------------

if  rootmod 
and UnitBuffID(&amp;quot;player&amp;quot;,69369)

and UnitExists(&amp;quot;mouseover&amp;quot;)
and CokxDRInfo(&amp;quot;mouseover&amp;quot;,&amp;quot;root&amp;quot;) &amp;lt; 3
then
CastSpellByName(GetSpellInfo(339),&amp;quot;mouseover&amp;quot;)
saveinstant = 0
return true
 end


if  rootmod 
and UnitBuffID(&amp;quot;player&amp;quot;,69369)

and UnitExists(&amp;quot;focus&amp;quot;)
and CokxDRInfo(&amp;quot;focus&amp;quot;,&amp;quot;root&amp;quot;) &amp;lt; 3
then
CastSpellByName(GetSpellInfo(339),&amp;quot;focus&amp;quot;)
saveinstant = 0
return true
 end

 if  rootmod 
and UnitBuffID(&amp;quot;player&amp;quot;,69369)
and UnitExists(&amp;quot;target&amp;quot;)
and not UnitExists(&amp;quot;focus&amp;quot;)
and not UnitExists(&amp;quot;mouseover&amp;quot;)
and CokxDRInfo(&amp;quot;target&amp;quot;,&amp;quot;root&amp;quot;) &amp;lt; 3
then
CastSpellByName(GetSpellInfo(339),&amp;quot;target&amp;quot;)
saveinstant = 0
return true
 end

------------------------------------</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Pause</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if druidpause
or IsMounted()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,40120)
or UnitBuffID(&amp;quot;player&amp;quot;,5215)
or UnitBuffID(&amp;quot;player&amp;quot;,87959)
or UnitChannelInfo(&amp;quot;player&amp;quot;) 
then return true end

if  GetTime() - getInfos &amp;lt; 0.2 and  GetTime() - getInfos &amp;gt; 0.1 and (GCDCheck(33876)) then
return true
end
if  GetTime() - getInfos &amp;lt; 0.6 and  GetTime() - getInfos &amp;gt; 0.5 and (GCDCheck(33876)) then
return true
end
if  GetTime() - getInfos &amp;lt; 0.4 and  GetTime() - getInfos &amp;gt; 0.3 and (GCDCheck(33876)) then
return true
end
if  GetTime() - getInfos &amp;lt; 0.8 and  GetTime() - getInfos &amp;gt; 0.7 and (GCDCheck(33876))  then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Genesis</Name><Default>false</Default><SpellID>145518</SpellID><Actions>/use 10</Actions><Lua>-- Genesis
for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt;= 80
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and HaveBuff(members[i],774,2,&amp;quot;PLAYER&amp;quot;) 
and not HaveDebuff(members[i],{33786,113506},0)
then
  PQR_CustomTarget = members[i]
   return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wild Mushroom</Name><Default>false</Default><SpellID>145205</SpellID><Actions></Actions><Lua>if mushroomcoords == nil then mushroomcoords = 0 end
if not GetTotemInfo(1)
and GCDCheck(145205)
and not HaveBuff(&amp;quot;player&amp;quot;,{32728,44521},0)
and (UnitAffectingCombat(&amp;quot;player&amp;quot;)  or #members &amp;gt; 2 ) then 
PQR_CustomTarget=&amp;quot;player&amp;quot;
mushroomcoords = PQR_CustomTarget
return true
end

for i = 1, numberfriends do
if CalculateHP(members[i]) &amp;lt;= 90
and GCDCheck(145205)
and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
and LineOfSight(members[i])
and GetTotemInfo(1)
then
local w = 100000
local h = 100000
local x2 , y2 = select(1,PQR_UnitInfo(members[i])), select(2,PQR_UnitInfo(members[i]))
local distance = sqrt(min(cx1 - x2, w - (cx1 - x2))^2 + min(cy1 - y2, h - (cy1-y2))^2)
if distance &amp;gt; 10
then
  PQR_CustomTarget = members[i]
  mushroomcoords = PQR_CustomTarget
  return true
  end
end
end</Lua><RecastDelay>7500</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wild Mushroom Bloom</Name><Default>false</Default><SpellID>102791</SpellID><Actions></Actions><Lua>for i=1,#members do
if GetTotemInfo(1)
and GCDCheck(102791)
and UnitExists(members[i])
and eMembers[i].Range &amp;lt; 40
and CalculateHP(members[i]) &amp;lt;= 60
then
local px2 , py2 = select(1,PQR_UnitInfo(&amp;quot;player&amp;quot;)), select(2,PQR_UnitInfo(&amp;quot;player&amp;quot;))
local w = 100000
local h = 100000
local Pdistance = sqrt(min(cx1 - px2, w - (cx1 - px2))^2 + min(cy1 - py2, h - (cy1-py2))^2)
local x2 , y2 = select(1,PQR_UnitInfo(members[i])), select(2,PQR_UnitInfo(members[i]))
local distance = sqrt(min(cx1 - x2, w - (cx1 - x2))^2 + min(cy1 - y2, h - (cy1-y2))^2)
if distance &amp;lt; 10
and Pdistance &amp;lt; 40 then
  PQR_CustomTarget = members[i]
  return true
  end
end
end</Lua><RecastDelay>15000</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healthstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if CalculateHP(&amp;quot;player&amp;quot;) &amp;lt; 30
   and GetItemCount(GetItemInfo(5512)) ~= 0
  and select(2,GetItemCooldown(5512)) == 0 
  then 
	UseItemByName(5512)
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Bear</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if HaveBuff(&amp;quot;player&amp;quot;,5487,0)
and not GCDCheck(18562) 
and HaveBuff(&amp;quot;player&amp;quot;,33763,0,&amp;quot;PLAYER&amp;quot;)
and HaveBuff(&amp;quot;player&amp;quot;,774,0,&amp;quot;PLAYER&amp;quot;)
then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>SRG</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>local spell, _, _, _, _, endTime = UnitChannelInfo(&amp;quot;player&amp;quot;)
for i = 1 , #cTar do
if UnitExists(cTar[i])
and spell == GetSpellInfo(33786) 
and HaveBuff(cTar[i],{114028,23920,8177},0)
then
SpellStopCasting()
PQR_CustomTarget = cTar[i]
return true
end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>eventRA</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not cx1 then cx1 = 0 end
if not cy1 then cy1 = 0 end
if not mushroomtimer then mushroomtimer = 0 end
if not mushroomDestGUID then mushroomDestGUID = 0 end
if not CokxLog then
    Cokx_CokxLog = CreateFrame(&amp;apos;Frame&amp;apos;)
    Cokx_CokxLog:RegisterEvent(&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;)

 function OnSuccessfulCast(self, event, ...)
  local type, _, sourceGUID, sourceNAME, _, _, destGUID, destNAME = select(2, ...)
  if (event==&amp;quot;COMBAT_LOG_EVENT_UNFILTERED&amp;quot;) then
            if (type==&amp;quot;SPELL_CAST_SUCCESS&amp;quot;) then
                if sourceGUID == UnitGUID(&amp;quot;target&amp;quot;) then
       			targetPhysRA = EphysRA()
       			for i=1,#targetPhysRA do
       				if select(12, ...) == targetPhysRA[i] then
       					if IsSpellKnown(99) 
       					and GCDCheck(99)
       					and PQR_UnitDistance(&amp;quot;player&amp;quot;,sourceGUID) &amp;lt; 10 then
						CastSpellByName(GetSpellInfo(99),&amp;quot;target&amp;quot;)
						return true
						end
						if IsSpellKnown(5211) 
       					and GCDCheck(5211)
       					and PQR_UnitDistance(&amp;quot;player&amp;quot;,sourceGUID) &amp;lt; 8 then
						CastSpellByName(GetSpellInfo(5211),&amp;quot;target&amp;quot;)
						return true
						end
       				end
       			end
       			end
	     		
	     		if sourceGUID == UnitGUID(&amp;quot;player&amp;quot;) then
	     		if select(12, ...) == 145205 then
	     		mushroomtimer=GetTime()
	     		mushroomDestGUID = destGUID
	     		cx1 , cy1 = select(1,PQR_UnitInfo(mushroomDestGUID)), select(2,PQR_UnitInfo(mushroomDestGUID))
	     		end
       			targetSpellRA = EspellRA()
       			for i=1,#targetSpellRA do
       				if select(12, ...) == targetSpellRA[i] then
       					if IsSpellKnown(783) 
       					and GCDCheck(783)
       					and PQR_UnitDistance(&amp;quot;player&amp;quot;,sourceGUID) &amp;lt; 40 then
						CastSpellByName(GetSpellInfo(783))
						return true
						end
       				end
       			end
	     		end
	     		
	     		for i = 1, #cTar do
                if sourceGUID == UnitGUID(cTar[i])
                and ecTar[i].Range &amp;lt; 25 then
       				if select(12, ...) == 19503	then
       				if IsSpellKnown(99) 
       					and GCDCheck(99)
       					and PQR_UnitDistance(&amp;quot;player&amp;quot;,sourceGUID) &amp;lt; 10 then
						CastSpellByName(GetSpellInfo(99),cTar[i])
						return true
						end
						if IsSpellKnown(5211) 
       					and GCDCheck(5211)
       					and PQR_UnitDistance(&amp;quot;player&amp;quot;,sourceGUID) &amp;lt; 8 then
						CastSpellByName(GetSpellInfo(5211),cTar[i])
						return true
						end
       				end
	     		end
	     		end
	     		     		
   		
	     
                if destGUID == UnitGUID(&amp;quot;player&amp;quot;)
                then
       			allHSpellRA = HealerphysRA()
       			for i=1,#allHSpellRA do
       				if select(12, ...) == allHSpellRA[i] then
       					if GCDCheck(102280) then
						CastSpellByName(GetSpellInfo(102280))
						return true
						end
       				end
       			end
	     		end
	     	
	     		
	     	   		
		    end
  end
 end

 Cokx_CokxLog:SetScript(&amp;apos;OnEvent&amp;apos;, OnSuccessfulCast)

    CokxLog = true
end

if GetTime() - mushroomtimer &amp;lt; 0.5 then
	cx1 , cy1 = select(1,PQR_UnitInfo(mushroomDestGUID)), select(2,PQR_UnitInfo(mushroomDestGUID))
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Focus</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not myFocusID then myFocusID = 0 end
if UnitExists(&amp;quot;focus&amp;quot;) and not UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;focus&amp;quot;) and UnitGUID(&amp;quot;focus&amp;quot;) == myFocusID then ClearFocus() end
if not UnitExists(&amp;quot;focus&amp;quot;)
or UnitGUID(&amp;quot;focus&amp;quot;) == myFocusID then
for i = 1, #cTar do
if UnitExists(cTar[i]) and IsHealer(cTar[i])
and ecTar[i].Range &amp;lt; 60
and not UnitIsUnit(&amp;quot;target&amp;quot;,cTar[i]) then
FocusUnit(cTar[i])
myFocusID = 0
break
end
end

for i = 1, #cTar do
if UnitExists(cTar[i])
and ecTar[i].Range &amp;lt; 60
and not eHealer()
and not UnitIsUnit(&amp;quot;target&amp;quot;,cTar[i]) then
FocusUnit(cTar[i])
myFocusID=UnitGUID(cTar[i])
break
end
end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Lifebloom SotF</Name><Default>false</Default><SpellID>33763</SpellID><Actions></Actions><Lua>memberid = 1
lbactive = false
Lbcount = 0
Lbtimer = 0
for i = 1, #members do
if HaveBuff(members[i],33763,0,&amp;quot;PLAYER&amp;quot;)
then 
_,_,_,Lbcount,_,_,Lbtimer = UnitBuffID(members[i],33763,&amp;quot;PLAYER&amp;quot;) 
lbactive = true
memberid = i
end
end

for i = 1, numberfriends do
  if lbactive == true
  and Lbcount == 3
  and CalculateHP(members[i]) &amp;lt; (CalculateHP(members[memberid])-10)
  and (UnitInRange(members[i]) or eMembers[i].Range &amp;lt; 40)
  and LineOfSight(members[i])
    and HaveBuff(&amp;quot;player&amp;quot;,114108)
  and not HaveDebuff(members[i],{33786,113506},0)
      and UnitIsPlayer(members[i])
  then 
    PQR_CustomTarget = members[i] 
    return true 
  end
end

   if lbactive == true
   and Lbcount == 3
  and (UnitInRange(members[memberid]) or eMembers[memberid].Range &amp;lt; 40)
  and LineOfSight(members[memberid])
  and HaveBuff(&amp;quot;player&amp;quot;,114108)
  and not HaveDebuff(members[memberid],{33786,113506},0)
  then 
    PQR_CustomTarget = members[memberid]
    return true 
  end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><SkipUnknown>False</SkipUnknown></Ability></DRUID>