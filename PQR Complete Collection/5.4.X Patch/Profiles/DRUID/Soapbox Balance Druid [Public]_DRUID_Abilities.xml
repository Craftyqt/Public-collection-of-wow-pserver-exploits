<?xml version="1.0" encoding="utf-8" ?><DRUID><Ability><Name>Starfall</Name><Default>false</Default><SpellID>48505</SpellID><Actions></Actions><Lua>local Starfall = UnitBuffID(&amp;quot;player&amp;quot;, 48505)

if Starfall == nil then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonfire</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>local MF,_,_,_,_,_,MFtimer = UnitDebuffID(&amp;quot;target&amp;quot;,8921,&amp;quot;PLAYER&amp;quot;)
local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
local Starfall = UnitBuffID(&amp;quot;player&amp;quot;, 48505)
local Iwin = UnitBuffID(&amp;quot;player&amp;quot;, 124974)

if (EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower == -75 and Starfall) then
return false
	else
	if EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower &amp;lt;= 100 and EclipsePower &amp;gt; -70 then
		if MF == nil 
		or MFtimer - GetTime() &amp;lt; 3 then
	    return true
		end
	end
end

if (EclipseDirection == &amp;quot;sun&amp;quot; and (EclipsePower == -20 or EclipsePower == -40) and Iwin) then
return false
	else
	if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower &amp;gt;= -100 then
		if MF == nil 
		or MFtimer - GetTime() &amp;lt; 3 then
	    return true
		end
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sunfire</Name><Default>false</Default><SpellID>93402</SpellID><Actions></Actions><Lua>local SF,_,_,_,_,_,SFtimer = UnitDebuffID(&amp;quot;target&amp;quot;,93402,&amp;quot;PLAYER&amp;quot;)
local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
local Starfall = UnitBuffID(&amp;quot;player&amp;quot;, 48505)
local Iwin = UnitBuffID(&amp;quot;player&amp;quot;, 124974)

if (EclipseDirection == &amp;quot;sun&amp;quot; and (EclipsePower == -20 or EclipsePower == -40) and Iwin) then
return false
else
	if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower &amp;gt;= -100 and EclipsePower &amp;lt; 20 then
		if SF == nil 
		or SFtimer - GetTime() &amp;lt; 3 then
	   	 return true
		end
	end
end


if (EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower == -75 and Starfall) then
return false
	else
	if EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower &amp;lt;= 100 then
		if SF == nil 
		or SFtimer - GetTime() &amp;lt; 3 then
	    return true
		end
	end
end

if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower == 40
	and (CurrentCast == &amp;quot;Starfire&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
	return false
	else 
	if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower &amp;gt;= 0 and EclipsePower &amp;lt; 80 then
		if SF == nil 
		or SFtimer - GetTime() &amp;lt; 3 then
	   	return true
	   	end
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starfire</Name><Default>false</Default><SpellID>2912</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
local Iwin = UnitBuffID(&amp;quot;player&amp;quot;, 124974)

if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower == -20 and Iwin and 
	(CurrentCast == &amp;quot;Starfire&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
	return false
	else
	if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower &amp;lt; 60 then
	return true
	end    
end


if EclipseDirection == &amp;quot;none&amp;quot; then
	if  EclipsePower &amp;gt;= 80 then
	return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wrath</Name><Default>false</Default><SpellID>5176</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if EclipseDirection == &amp;quot;moon&amp;quot; then
	if EclipsePower &amp;gt; -70 then
	return true
	end    
end

if EclipseDirection == &amp;quot;none&amp;quot; then
	if  EclipsePower &amp;lt;= 79 then
	return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Barkskin</Name><Default>false</Default><SpellID>22812</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 50 
then return true end</Lua><RecastDelay>500</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonkin</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if GetShapeshiftForm(&amp;quot;player&amp;quot;) ~= 5 then
CastShapeshiftForm(5)
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>&amp;gt; Initialise</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsLeftAltKeyDown() 
or IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,87959)
--or UnitChannelInfo(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;target&amp;quot;)
or UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mark of the Wild</Name><Default>false</Default><SpellID>1126</SpellID><Actions></Actions><Lua>if IsMounted() then
return false
end

if not UnitBuffID(&amp;quot;player&amp;quot;,1126)
and not UnitBuffID(&amp;quot;player&amp;quot;,20217)
and not UnitBuffID(&amp;quot;player&amp;quot;,90363)
and not UnitBuffID(&amp;quot;player&amp;quot;,115921)
then
return true
end</Lua><RecastDelay>5000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wrath End</Name><Default>false</Default><SpellID>5176</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower &amp;lt;= -70 then
	if (CurrentCast == &amp;quot;Wrath&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
	return false
	else
	CastSpellByName(tostring(GetSpellInfo(5176)))
	return true
	end
end

if EclipseDirection == &amp;quot;none&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	if  EclipsePower &amp;lt;= 79 then
	return true
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starfire End</Name><Default>false</Default><SpellID>2912</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower &amp;gt;= 60 then
	if (CurrentCast == &amp;quot;Starfire&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
		return false
	else
	    CastSpellByName(tostring(GetSpellInfo(2912)))
	    return true
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starsurge &amp;gt; Solar End</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
if EclipseDirection == &amp;quot;sun&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
	if EclipsePower &amp;gt; 60 and (CurrentCast == &amp;quot;Starfire&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
		return false
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starsurge &amp;gt; Solar</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
local Stars = UnitBuffID(&amp;quot;player&amp;quot;, 93399)
local Iwin = UnitBuffID(&amp;quot;player&amp;quot;, 124974)


if (EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower == -20 and Iwin) then 
	return false
	else
	if EclipseDirection == &amp;quot;sun&amp;quot; then
		if EclipsePower &amp;lt; 60 then
		return true
		end    
	end
end


if EclipseDirection == &amp;quot;none&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	if  EclipsePower &amp;gt;= 80 then
	return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starsurge &amp;gt; Lunar</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
if EclipseDirection == &amp;quot;moon&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
	if EclipsePower &amp;gt;= -60 then
	    return true
	end    
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starsurge &amp;gt; Lunar End</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
if EclipseDirection == &amp;quot;moon&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
	if EclipsePower &amp;lt;= -60 and (CurrentCast == &amp;quot;wrath&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
	return false
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonfire Lunar</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower == -100 then

	if (CurrentCast == &amp;quot;Starfire&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
		return false
	else
	    CastSpellByName(tostring(GetSpellInfo(8921)))
	    return true
	end
end</Lua><RecastDelay>4000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sunfire Solar</Name><Default>false</Default><SpellID>93402</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower == 100 then

	if (CurrentCast == &amp;quot;Wrath&amp;quot; or CurrentCast == &amp;quot;Starsurge&amp;quot;) then
		return false
	else
	    CastSpellByName(tostring(GetSpellInfo(93402)))
	    return true
	end
end</Lua><RecastDelay>4000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sunfire Solar Eclipse Phase</Name><Default>false</Default><SpellID>93402</SpellID><Actions></Actions><Lua>local SF,_,_,_,_,_,SFtimer = UnitDebuffID(&amp;quot;target&amp;quot;,93402,&amp;quot;PLAYER&amp;quot;)
local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)

if EclipseDirection == &amp;quot;moon&amp;quot; and (EclipsePower &amp;lt;= 100 and EclipsePower &amp;gt; 0) then
	if SF == nil 
	or SFtimer - GetTime() &amp;lt; 7 then
	   return true
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonfire Lunar Eclipse Phase</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>local MF,_,_,_,_,_,MFtimer = UnitDebuffID(&amp;quot;target&amp;quot;,8921,&amp;quot;PLAYER&amp;quot;)
local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
local Starfall = UnitBuffID(&amp;quot;player&amp;quot;, 48505)
local Iwin = UnitBuffID(&amp;quot;player&amp;quot;, 124974)

if (EclipseDirection == &amp;quot;sun&amp;quot; and (EclipsePower == -20 or EclipsePower == -40) and Iwin) then
return false
	else
	if EclipseDirection == &amp;quot;sun&amp;quot; and (EclipsePower &amp;gt;= -100 and EclipsePower &amp;lt; 0) then
		if MF == nil 
		or MFtimer - GetTime() &amp;lt; 7 then
	   	return true
		end
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wild Mushroom: Detonate</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsRightShiftKeyDown() then
	if IsUsableSpell(88751) then
	CastSpellByName(tostring(GetSpellInfo(88751)))
	return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moving Starsurge</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local SS,_,_,_,_,_,SStimer = UnitBuffID(&amp;quot;player&amp;quot;,93400)

if PQR_IsMoving(1) then
	if SS then
	CastSpellByName(tostring(GetSpellInfo(78674)))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Hurricane</Name><Default>false</Default><SpellID>16914</SpellID><Actions></Actions><Lua>if IsLeftShiftKeyDown() then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Click</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonfire (Focus)</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>local MF,_,_,_,_,_,MFtimer = UnitDebuffID(&amp;quot;focus&amp;quot;,8921,&amp;quot;PLAYER&amp;quot;)

if UnitExists(&amp;quot;focus&amp;quot;)
	and not UnitIsDeadOrGhost(&amp;quot;focus&amp;quot;)
	and not PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 1)
	and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;focus&amp;quot;) == 1
	and IsSpellInRange(GetSpellInfo(8921), &amp;quot;focus&amp;quot;) == 1
then
	if MF then
		if MFtimer - GetTime() &amp;lt; 2
		then 
		return true 
		end
		else 
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sunfire (focus)</Name><Default>false</Default><SpellID>93402</SpellID><Actions></Actions><Lua>local SF,_,_,_,_,_,SFtimer = UnitDebuffID(&amp;quot;focus&amp;quot;,93402,&amp;quot;PLAYER&amp;quot;)

if UnitExists(&amp;quot;focus&amp;quot;)
	and not UnitIsDeadOrGhost(&amp;quot;focus&amp;quot;)
	and not PQR_IsOutOfSight(&amp;quot;focus&amp;quot;, 1)
	and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;focus&amp;quot;) == 1
	and IsSpellInRange(GetSpellInfo(93402), &amp;quot;focus&amp;quot;) == 1
then
	if SF then
		if SFtimer - GetTime() &amp;lt; 2
		then 
		return true 
		end
		else 
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moving Fire</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)

if PQR_IsMoving(1) then
	if EclipseDirection == &amp;quot;moon&amp;quot; then
	CastSpellByName(tostring(GetSpellInfo(93402)))
	else 
	CastSpellByName(tostring(GetSpellInfo(8921)))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></DRUID>