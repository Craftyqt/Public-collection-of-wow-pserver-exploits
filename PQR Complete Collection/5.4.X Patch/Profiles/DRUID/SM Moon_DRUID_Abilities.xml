<?xml version="1.0" encoding="utf-8" ?><DRUID><Ability><Name>Starsurge</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>if not PQR_IsMoving(1)
or UnitBuffID(&amp;quot;player&amp;quot;,93400)
then
return true
end</Lua><RecastDelay>1.5</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starfall</Name><Default>false</Default><SpellID>48505</SpellID><Actions></Actions><Lua>return true</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonfire</Name><Default>false</Default><SpellID>8921</SpellID><Actions></Actions><Lua>local MF,_,_,_,_,_,MFtimer = UnitDebuffID(&amp;quot;target&amp;quot;,43545,&amp;quot;PLAYER&amp;quot;)

if UnitLevel(&amp;quot;player&amp;quot;) &amp;lt; 18 and PQR_IsMoving(1) 
then return true end

if MF == nil
or (PQR_IsMoving(1) and UnitDebuffID(&amp;quot;target&amp;quot;,93402,&amp;quot;PLAYER&amp;quot;))
then
return true
end

if MFtimer - GetTime() &amp;lt; 2.5 then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sunfire</Name><Default>false</Default><SpellID>93402</SpellID><Actions></Actions><Lua>local SF,_,_,_,_,_,SFtimer = UnitDebuffID(&amp;quot;target&amp;quot;,93402,&amp;quot;PLAYER&amp;quot;)

if SF == nil
or PQR_IsMoving(1)
then
return true
end

if SFtimer - GetTime() &amp;lt; 2.5 then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starfire</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
if EclipseDirection == &amp;quot;sun&amp;quot; then
    local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
    local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
	if EclipsePower &amp;gt; 60 and CurrentCast == &amp;quot;Starfire&amp;quot; then
		--CastSpellByName(tostring(GetSpellInfo(5176)))
		return false
	else
	    CastSpellByName(tostring(GetSpellInfo(2912)))
	    return true
	end
end

if EclipseDirection == &amp;quot;none&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	if  EclipsePower &amp;gt;= 80 then
		CastSpellByName(tostring(GetSpellInfo(2912)))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wrath</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
if EclipseDirection == &amp;quot;moon&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)
	if EclipsePower &amp;lt; -70 and CurrentCast == &amp;quot;Wrath&amp;quot; then
		--CastSpellByName(tostring(GetSpellInfo(2912)))
		return false
	else
	    CastSpellByName(tostring(GetSpellInfo(5176)))
	    return true
	end    
end

if EclipseDirection == &amp;quot;none&amp;quot; then
	local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
	if  EclipsePower &amp;lt;= 79 then
		CastSpellByName(tostring(GetSpellInfo(5176)))
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Incarnation</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if select(2,GetTalentRowSelectionInfo(4)) == 11
and IsUsableSpell(102560)
and select(2,GetSpellCooldown(102560)) &amp;lt; 2
then
	CastSpellByName(tostring(GetSpellInfo(102560)))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Celestial Alignment</Name><Default>false</Default><SpellID>112071</SpellID><Actions></Actions><Lua>return true</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rebirth</Name><Default>false</Default><SpellID>20484</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;mouseover&amp;quot;) and
   UnitIsDeadOrGhost(&amp;quot;mouseover&amp;quot;) and
   UnitCanCooperate(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) and
   IsSpellInRange(&amp;quot;Rebirth&amp;quot;, &amp;quot;mouseover&amp;quot;) and 
   GetSpellCooldown(20484) == 0 and
   UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
then
return true
end</Lua><RecastDelay>500</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Barkskin</Name><Default>false</Default><SpellID>22812</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 50 
then return true end</Lua><RecastDelay>500</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Moonkin</Name><Default>false</Default><SpellID>24858</SpellID><Actions></Actions><Lua>if not (GetShapeshiftForm(&amp;quot;player&amp;quot;) == 1 or 
GetShapeshiftForm(&amp;quot;player&amp;quot;) == 2 or
GetShapeshiftForm(&amp;quot;player&amp;quot;) == 3 or 
GetShapeshiftForm(&amp;quot;player&amp;quot;) == 4 or
GetShapeshiftForm(&amp;quot;player&amp;quot;) == 5 or
GetShapeshiftForm(&amp;quot;player&amp;quot;) == 6) then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>&amp;gt; Initialise</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) or
IsLeftAltKeyDown() 
or IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,87959)
--or UnitChannelInfo(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;target&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mark of the Wild</Name><Default>false</Default><SpellID>1126</SpellID><Actions></Actions><Lua>if not UnitBuffID(&amp;quot;player&amp;quot;,1126)
and not UnitBuffID(&amp;quot;player&amp;quot;,20217)
and not UnitBuffID(&amp;quot;player&amp;quot;,90363)
and not UnitBuffID(&amp;quot;player&amp;quot;,115921)
then
return true
end</Lua><RecastDelay>5000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wild Mushroom</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsUsableSpell(88747)
and select(2,GetSpellCooldown(88747)) &amp;lt; 2
and IsLeftShiftKeyDown() 
then 
  CastSpellByName(GetSpellInfo(88747)) 
  if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end 
  return true 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rejuvenation</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 75
and not UnitBuffID(&amp;quot;player&amp;quot;,774)
then
CastSpellByName(GetSpellInfo(774))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healing Touch</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 40
and UnitBuffID(&amp;quot;player&amp;quot;,774) and not PQR_IsMoving()
then
CastSpellByName(GetSpellInfo(5185))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starsurge Proc Moving</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>if PQR_IsMoving(1) and UnitBuffID(&amp;quot;player&amp;quot;,93400)
then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Out of Combat Rejuvenation</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 85
and not UnitBuffID(&amp;quot;player&amp;quot;,774) and not(IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,87959)
--or UnitChannelInfo(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;player&amp;quot;) 
or UnitIsDeadOrGhost(&amp;quot;target&amp;quot;) or UnitAffectingCombat(&amp;quot;player&amp;quot;))
then
CastSpellByName(GetSpellInfo(774))
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Astral Insight Sun</Name><Default>false</Default><SpellID>127663</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if UnitBuffID(&amp;quot;player&amp;quot;,112071) or not UnitBuffID(&amp;quot;player&amp;quot;,145138)
then return false end

if EclipsePower &amp;gt; 59 and CurrentCast == &amp;quot;Starfire&amp;quot; then return false end

if EclipseDirection == &amp;quot;sun&amp;quot; and EclipsePower &amp;gt; -1 then
		return true
	end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Astral Insight Moon</Name><Default>false</Default><SpellID>127663</SpellID><Actions></Actions><Lua>local EclipseDirection = GetEclipseDirection()
local EclipsePower = UnitPower(&amp;quot;player&amp;quot;, 8)
local CurrentCast = UnitCastingInfo(&amp;quot;player&amp;quot;)

if UnitBuffID(&amp;quot;player&amp;quot;,112071) or not UnitBuffID(&amp;quot;player&amp;quot;,145138)
then return false end

if EclipsePower &amp;lt; -71 and CurrentCast == &amp;quot;Wrath&amp;quot; then return false end

if EclipseDirection == &amp;quot;moon&amp;quot; and EclipsePower &amp;lt; 1 then
		return true end
		
if EclipseDirection == &amp;quot;none&amp;quot; then return true end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Starsurge Proc</Name><Default>false</Default><SpellID>78674</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;,93400)
then
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Hurricane and Astral Storm</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsUsableSpell(16914)
and IsLeftShiftKeyDown() 
then 
  CastSpellByName(GetSpellInfo(16914)) 
  if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end 
  return true 
end

if IsUsableSpell(106996)
and IsLeftShiftKeyDown() 
then 
  CastSpellByName(GetSpellInfo(106996)) 
  if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end 
  return true 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></DRUID>