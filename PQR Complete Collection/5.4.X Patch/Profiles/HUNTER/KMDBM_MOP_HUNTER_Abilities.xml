<?xml version="1.0" encoding="utf-8" ?><HUNTER><Ability><Name>TANK AUTOTARGET</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Code provided by Sheuron
if GetNumPartyMembers() &amp;gt; 0 and UnitInRaid(&amp;quot;player&amp;quot;) == nil then

local heisthetank = nil

for i = 1, GetNumPartyMembers(), 1 do
  if UnitGroupRolesAssigned(&amp;quot;party&amp;quot;..tostring(i)) == &amp;quot;TANK&amp;quot; then heisthetank = &amp;quot;party&amp;quot;..tostring(i) end
end

if heisthetank and UnitExists(&amp;quot;target&amp;quot;) == nil 
and UnitAffectingCombat(heisthetank) 
and UnitAffectingCombat(heisthetank..&amp;quot;target&amp;quot;) 
and UnitIsDead(heisthetank..&amp;quot;target&amp;quot;) == nil
and UnitCanAttack(&amp;quot;player&amp;quot;,heisthetank..&amp;quot;target&amp;quot;)
then TargetUnit(heisthetank..&amp;quot;target&amp;quot;) end

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Kill Shot</Name><Default>false</Default><SpellID>53351</SpellID><Actions></Actions><Lua>return true</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Lynx Rush</Name><Default>false</Default><SpellID>120697</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(120697)
or not UnitExists(&amp;quot;pet&amp;quot;) 
or UnitIsDead(&amp;quot;pet&amp;quot;) 
or IsSpellInRange(tostring(GetSpellInfo(2649)), &amp;quot;pettarget&amp;quot;) == 0
then return false end

return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Multi-Shot</Name><Default>false</Default><SpellID>2643</SpellID><Actions></Actions><Lua>-- disable multi-shot if target needs A Murder Of Crows on it
if IsPlayerSpell(131894)
and select(2,GetSpellCooldown(131894)) == 0
and not UnitDebuffID(&amp;quot;target&amp;quot;, 131894, &amp;quot;PLAYER&amp;quot;) 
and UnitHealth(&amp;quot;target&amp;quot;) &amp;gt; (UnitHealthMax(&amp;quot;player&amp;quot;)*6) then
return false end

-- disable multi-shot if Barrage is needed
if IsPlayerSpell(120360)
and select(2,GetSpellCooldown(120360)) == 0 
and IsRightControlKeyDown() then 
return false end

-- disable multi-shot to conserve focus for Bestial Wrath
if not UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;34692&amp;quot;)
and select(2,GetSpellCooldown(19574)) == 0
then return false end

if UnitPower(&amp;quot;player&amp;quot;) &amp;gt; 40 
or UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;109306&amp;quot;) 
then return true end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Tranquilizing Shot</Name><Default>false</Default><SpellID>19801</SpellID><Actions></Actions><Lua>for i = 1, 40 do
	local buff = { UnitBuff(&amp;quot;target&amp;quot;, i) }
	if buff[9] then
		return true
	end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Lightwell--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Code provided by Xelper
local LightwellName = &amp;quot;Lightwell&amp;quot;
local hp = UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) * 100
local sLightwell = UnitBuffID(&amp;quot;player&amp;quot;, 7001)
local sDeepCorruption = UnitDebuffID(&amp;quot;player&amp;quot;, 108220)
if PQR_LightwellTimeout == nil then
    PQR_LightwellTimeout = 0
end

if hp &amp;lt; 70 and sLightwell == nil then
    if PQR_LightwellTimeout &amp;lt; GetTime() then
        if sDeepCorruption == nil then
            PQR_LightwellTimeout = GetTime() + 1
            InteractUnit(LightwellName)
        end
    end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rapid Fire (Pushdown)</Name><Default>false</Default><SpellID>3045</SpellID><Actions>/cast Blood Fury</Actions><Lua>if IsRightShiftKeyDown()
	and not UnitBuffID(&amp;quot;player&amp;quot;, 3045)  -- Rapid Fire
	then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>PET AUTOTARGET</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;Target&amp;quot;) == nil 
or ( UnitExists(&amp;quot;Target&amp;quot;) and UnitIsDead(&amp;quot;Target&amp;quot;))
and UnitAffectingCombat(&amp;quot;Player&amp;quot;) 
then TargetUnit(&amp;quot;PetTarget&amp;quot;) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Rapid Fire</Name><Default>false</Default><SpellID>3045</SpellID><Actions></Actions><Lua>if not UnitBuffID(&amp;quot;player&amp;quot;, 3045)  -- Rapid Fire
and UnitExists(&amp;quot;target&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Dire Beast</Name><Default>false</Default><SpellID>120679</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(120679) then return false end

return true</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Serpent Sting</Name><Default>false</Default><SpellID>1978</SpellID><Actions></Actions><Lua>if not UnitDebuffID(&amp;quot;target&amp;quot;, 1978, &amp;quot;PLAYER&amp;quot;) 
then return true end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Arcane Shot</Name><Default>false</Default><SpellID>3044</SpellID><Actions></Actions><Lua>if IsRightControlKeyDown() then return false end
local BWStart, BWDuration = GetSpellCooldown(19574)
local BWCD = BWStart + BWDuration - GetTime()
local KCStart, KCDuration = GetSpellCooldown(34026)
local KCCD = KCStart + KCDuration - GetTime()
local AMoCStart, AMoCDuration = GetSpellCooldown(131894)
local AMoCCD = AMoCStart + AMoCDuration - GetTime()

-- Stop Arcane Shot if Murder of Crows is coming off cooldown.
if IsPlayerSpell(131894)
and not UnitDebuffID(&amp;quot;target&amp;quot;, 131894, &amp;quot;PLAYER&amp;quot;)
and AMoCCD &amp;lt; 2
and UnitHealth(&amp;quot;target&amp;quot;) &amp;lt; (UnitHealthMax(&amp;quot;player&amp;quot;)*6)
then return false end

-- Stop Arcane Shot if Kill Command is off cooldown
if UnitExists(&amp;quot;Pet&amp;quot;) 
and KCCD &amp;lt; 1
and not UnitIsDead(&amp;quot;pet&amp;quot;)
and UnitPower(&amp;quot;player&amp;quot;) &amp;lt; 50
and UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;109306&amp;quot;)
and IsSpellInRange(tostring(GetSpellInfo(2649)), &amp;quot;pettarget&amp;quot;) == 1
then return false end

-- Stop Arcane Shot to conserve focus for Bestial Wrath
if not UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;34692&amp;quot;)
and UnitExists(&amp;quot;Pet&amp;quot;) 
and not UnitIsDead(&amp;quot;pet&amp;quot;)
and IsSpellInRange(tostring(GetSpellInfo(2649)), &amp;quot;pettarget&amp;quot;) == 1
and BWCD &amp;lt; 2
then return false end

-- Arcane Shot when Fervor is off cooldown.
if IsPlayerSpell(82726)
and select(2,GetSpellCooldown(82726)) == 0
and UnitPower(&amp;quot;player&amp;quot;) &amp;gt; 30
or UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;109306&amp;quot;)
or UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;34692&amp;quot;)
then return true end

-- Arcane Shot with Thrill of the Hunt
if UnitPower(&amp;quot;player&amp;quot;) &amp;gt; 40
and UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;109306&amp;quot;)
then return true end

-- Arcane Shot with Bestial Wrath
if UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;34692&amp;quot;)
then return true end

-- Arcane Shot usage code.
if UnitPower(&amp;quot;player&amp;quot;) &amp;gt; 60
or UnitIsDead(&amp;quot;pet&amp;quot;)
or not UnitExists(&amp;quot;pet&amp;quot;) 
then return true end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Bestial Wrath</Name><Default>false</Default><SpellID>19574</SpellID><Actions>/cast Blood Fury|/cast Rabid|/cast Lifeblood|/use 10</Actions><Lua>-- non Thrill of the Hunt
if UnitExists(&amp;quot;target&amp;quot;) 
and UnitExists(&amp;quot;Pet&amp;quot;) 
and UnitPower(&amp;quot;player&amp;quot;) &amp;gt; 80
and IsSpellInRange(tostring(GetSpellInfo(2649)), &amp;quot;pettarget&amp;quot;) == 1
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Cobra Shot</Name><Default>false</Default><SpellID>56641</SpellID><Actions></Actions><Lua>if UnitPower(&amp;quot;player&amp;quot;) &amp;lt; 75 then 
return true end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Focus Fire</Name><Default>false</Default><SpellID>82692</SpellID><Actions></Actions><Lua>local _,_,_,frenzycount,_,_,frenzytimer = UnitBuffID(&amp;quot;player&amp;quot;,19615)

if UnitBuffID(&amp;quot;player&amp;quot;,34692) then return false end

if frenzycount == 5 and not UnitBuffID(&amp;quot;player&amp;quot;,3045) 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>FocusBuilder</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsLeftShiftKeyDown() then CastSpellByName(GetSpellInfo(77767),nil)
return true end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Kill Command</Name><Default>false</Default><SpellID>34026</SpellID><Actions></Actions><Lua>local BWStart, BWDuration = GetSpellCooldown(19574)
local BWCD = BWStart + BWDuration - GetTime()

if not UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;34692&amp;quot;)
-- and BWCD &amp;lt; 2
and select(2,GetSpellCooldown(19574)) == 0
then return false end

if IsSpellInRange(tostring(GetSpellInfo(2649)), &amp;quot;pettarget&amp;quot;) == 1
and UnitExists(&amp;quot;pet&amp;quot;) 
then return true end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Serpent Sting (mouseover)</Name><Default>false</Default><SpellID>1978</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;Mouseover&amp;quot;) 
and IsLeftControlKeyDown() 
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) 
and not UnitDebuffID(&amp;quot;Mouseover&amp;quot;, 1978, &amp;quot;PLAYER&amp;quot;) then
    return true
end</Lua><RecastDelay>1000</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>A Murder of Crows</Name><Default>false</Default><SpellID>131894</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(131894) then return false end

if not UnitDebuffID(&amp;quot;target&amp;quot;, 131894, &amp;quot;PLAYER&amp;quot;) 
and  UnitHealth(&amp;quot;target&amp;quot;) &amp;gt; (UnitHealthMax(&amp;quot;player&amp;quot;)*4) then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Explosive Trap</Name><Default>false</Default><SpellID>13813</SpellID><Actions></Actions><Lua>if IsLeftAltKeyDown()
and not GetCurrentKeyBoardFocus()
then CastSpellByName(tostring(GetSpellInfo(13813)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Freezing Trap</Name><Default>false</Default><SpellID>1499</SpellID><Actions></Actions><Lua>F_traplaunch()

if IsRightAltKeyDown()
and not GetCurrentKeyBoardFocus()
then CastSpellByName(tostring(GetSpellInfo(1499)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Ice Trap</Name><Default>false</Default><SpellID>13809</SpellID><Actions></Actions><Lua>F_traplaunch()

if IsLeftAltKeyDown()
and not GetCurrentKeyBoardFocus()
then CastSpellByName(tostring(GetSpellInfo(13809)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Snake Trap</Name><Default>false</Default><SpellID>34600</SpellID><Actions></Actions><Lua>F_traplaunch()

if IsLeftAltKeyDown()
and not GetCurrentKeyBoardFocus()
then CastSpellByName(tostring(GetSpellInfo(34600)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Mend Pet</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;pet&amp;quot;) 
and not UnitIsDead(&amp;quot;pet&amp;quot;) 
and PQR_IsOutOfSight(&amp;quot;pet&amp;quot;) == false 
and (100 * UnitHealth(&amp;quot;pet&amp;quot;) / UnitHealthMax(&amp;quot;pet&amp;quot;)) &amp;lt; 95 
and not UnitBuffID(&amp;quot;pet&amp;quot;,136)
and IsSpellInRange(GetSpellInfo(136), &amp;quot;pet&amp;quot;) 
then CastSpellByName(GetSpellInfo(136),nil)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>-- Functions</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>function F_traplaunch()
	if ( IsLeftAltKeyDown() or IsRightAltKeyDown() )
	and not UnitBuffID(&amp;quot;player&amp;quot;, 77769) 
	then CastSpellByID(77769, &amp;quot;player&amp;quot;) end
end

--crossed over
local crossedover = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,116161))
if crossedover and crossedover - GetTime() &amp;lt; 1.5 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Healthstone</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;) &amp;lt; 40
and GetItemCount(5512,false,false) &amp;gt; 0
and ( select(2, GetItemCooldown(5512)) == 0 )
then UseItemByName(5512)
return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Scatter Shot</Name><Default>false</Default><SpellID>19503</SpellID><Actions></Actions><Lua>if IsRightAltKeyDown() and UnitExists(&amp;quot;mouseover&amp;quot;)then return true end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Concussive Shot</Name><Default>false</Default><SpellID>5116</SpellID><Actions></Actions><Lua>return true</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Widow Venom</Name><Default>false</Default><SpellID>82654</SpellID><Actions></Actions><Lua>if not UnitDebuffID(&amp;quot;target&amp;quot;, 82654) then
	return true
end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Serpent Sting (focus)</Name><Default>false</Default><SpellID>1978</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;Focus&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;Focus&amp;quot;) 
and not UnitDebuffID(&amp;quot;Focus&amp;quot;, 1978, &amp;quot;PLAYER&amp;quot;) then
    return true
end</Lua><RecastDelay>1000</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Stampede</Name><Default>false</Default><SpellID>121818</SpellID><Actions>/cast Rabid</Actions><Lua>if not IsPlayerSpell(121818) then return false end

if IsRightShiftKeyDown() then return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Glaive Toss</Name><Default>false</Default><SpellID>117050</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(117050) then return false end

return true</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Power Shot</Name><Default>false</Default><SpellID>109259</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(109259) 
then return false end

if not PQR_IsMoving(0.5) 
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Barrage</Name><Default>false</Default><SpellID>120360</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(120360) then return false end

if IsRightControlKeyDown() then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Raid</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Implement PQR_resumeAttack.. this is used to prevent
--abilities lower in the rotation from being cast.
if PQR_resumeAttack == nil then
	PQR_resumeAttack = 0
elseif PQR_resumeAttack &amp;gt; GetTime() then
	return true
else
	PQR_resumeAttack = 0
end


--IMPORTANT: Change this if you have any cleaves that would do damage to a secondary target
--as part of your single target rotation. Better to be safe than sorry! 
--Used for : Spirit Kings

for i=1,4 do
	local bossCheck = &amp;quot;boss&amp;quot;..i
	if UnitExists(bossCheck) then
		local npcID = tonumber(UnitGUID(bossCheck):sub(6,10), 16)
		local bossCasting,_,_,_,_,castEnd = UnitCastingInfo(bossCheck)
		
		if npcID == 62511 or npcID == 62711 then --Amber-Shaper Un&amp;apos;sok or Amber Monstrosity
			local reshapeLife = UnitDebuffID(&amp;quot;vehicle&amp;quot;, 122370)
			local reshapeLife2 = UnitDebuffID(&amp;quot;player&amp;quot;, 122370)
			if reshapeLife or reshapeLife2 then
				local playerCasting = UnitCastingInfo(&amp;quot;vehicle&amp;quot;)
				--grab spell names for abilities:
				local amberExplosion = GetSpellInfo(122402)
				
				--interrupt the target if casting amber explosion
				if bossCasting == amberExplosion then
					TargetUnit(bossCheck)
					--Press the 1st button (Amber Strike)
					RunMacroText(&amp;quot;/click OverrideActionBarButton1&amp;quot;)
				end
				
				--interrupt self if casting amber explosion
				if playerCasting == amberExplosion then
					--Press the 2nd button (Struggle for Control)
					RunMacroText(&amp;quot;/click OverrideActionBarButton2&amp;quot;)
				end
				
				return true --prevent the rotation from executing while reshaped

			end
			
		elseif npcID == 60709 then --Spirit Kings: Qiang. (Impervious Shield)
			--Stop all attacks until 0.2 seconds after cast time ends and until buff (Impervious Shield) is gone.
			
			--only continue checking if we are targetting the boss or have no target.
			if (not UnitExists(&amp;quot;target&amp;quot;)) or (UnitIsUnit(&amp;quot;target&amp;quot;, bossCheck)) then
				local impName = GetSpellInfo(117961)
				local impShieldBuff = UnitBuffID(bossCheck, 117961)
				
				if (bossCasting and bossCasting == impName) then
					StopAttack()
					SpellStopCasting()
					local delayAdd = (castEnd/1000) - GetTime() --the number of seconds remaining on the cast.
					PQR_resumeAttack = GetTime() + delayAdd + 0.2
					return true
				end
				
				if impShieldBuff then
					StopAttack()
					SpellStopCasting()
					return true
				end
			end
			
		elseif npcID == 60710 then --Spirit Kings: Subetai. (Sleight of Hand)
			--Stop all attacks when casting Sleight of Hand, and until 0.2 seconds after cast time ends.
			--Also stop attacks if not stunned.
			
			--only continue checking if we are targetting the boss or have no target.
			if (not UnitExists(&amp;quot;target&amp;quot;)) or (UnitIsUnit(&amp;quot;target&amp;quot;, bossCheck)) or then
				local sleightName = GetSpellInfo(118162)
				local sleightBuff = UnitBuffID(bossCheck, 118162)
				--				  HoJ,   FoJ,  Kidney  
				local stunList = { 853, 105593, 408 }
				local isStunned = nil
				for _,v in ipairs(stunList) do
					local debuffCheck = UnitDebuffID(bossCheck, v)
					if debuffCheck then
						isStunned = true
					end
				end
				
				if (bossCasting and bossCasting == sleightName) then
					StopAttack()
					SpellStopCasting()
					local delayAdd = (castEnd/1000) - GetTime() --the number of seconds remaining on the cast.
					PQR_resumeAttack = GetTime() + delayAdd + 0.2
					return true
				end
				
				if sleightBuff and not isStunned then
					StopAttack()
					SpellStopCasting()
					return true
				end
			end

		elseif npcID == 60701 then --Spirit Kings: Zian. (Shield of Darkness)
			--Stop all attacks until 0.5 seconds after cast time ends and until buff (Shield of Darkness) is gone.
						
			if (not UnitExists(&amp;quot;target&amp;quot;)) or (UnitIsUnit(&amp;quot;target&amp;quot;, bossCheck)) or then
				local sodName = GetSpellInfo(117697)
				local sodBuff = UnitBuffID(bossCheck, 117697)
				
				if (bossCasting and bossCasting == sodName) then
					StopAttack()
					SpellStopCasting()
					local delayAdd = (castEnd/1000) - GetTime() --the number of seconds remaining on the cast.
					PQR_resumeAttack = GetTime() + delayAdd + 0.5 --0.5 to account for lag... REALLY do not want to set this off.
					return true
				end
				
				if sodBuff then
					StopAttack()
					SpellStopCasting()
					return true
				end
			end
		end
	end
end

--click button to leave.
--Gara&amp;apos;jal isn&amp;apos;t a boss while in the Spirit Realm.
local returnSoul = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,116161))
if returnSoul and returnSoul - GetTime() &amp;lt; 2 then 
	RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) 
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Fervor</Name><Default>false</Default><SpellID>82726</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(82726) then return false end

if UnitPower(&amp;quot;player&amp;quot;) &amp;lt;= 50
and UnitPower(&amp;quot;pet&amp;quot;) &amp;lt;= 50 then
return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Binding Shot</Name><Default>false</Default><SpellID>109248</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(109248) then return false end

if IsLeftShiftKeyDown()
and not GetCurrentKeyBoardFocus()
then CastSpellByName(tostring(GetSpellInfo(109248)))
if SpellIsTargeting() then CameraOrSelectOrMoveStart() CameraOrSelectOrMoveStop() end
return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>A Murder of Crows (focus)</Name><Default>false</Default><SpellID>131894</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(131894) then return false end

if not UnitDebuffID(&amp;quot;focus&amp;quot;, 131894, &amp;quot;PLAYER&amp;quot;) 
and  UnitHealth(&amp;quot;focus&amp;quot;) &amp;gt; (UnitHealthMax(&amp;quot;player&amp;quot;)*4) then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Focus</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Beastcleave</Name><Default>false</Default><SpellID>2643</SpellID><Actions></Actions><Lua>if not UnitBuffID(&amp;quot;pet&amp;quot;, &amp;quot;115939&amp;quot;) 
then return true end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Misdirection</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitIsPlayer(&amp;quot;target&amp;quot;) == 1 then return false end

local InParty = GetNumGroupMembers()
if InParty == 0 
and UnitExists(&amp;quot;pet&amp;quot;) 
and UnitThreatSituation(&amp;quot;pet&amp;quot;,&amp;quot;target&amp;quot;) ~= 3 
then CastSpellByName(GetSpellInfo(34477),&amp;quot;pet&amp;quot;) else
    local groupType = IsInRaid() 
    and &amp;quot;raid&amp;quot; 
    or &amp;quot;party&amp;quot; 
    for i=1, InParty do
        local member = groupType..i
        if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot; 
        and UnitThreatSituation(member,&amp;quot;target&amp;quot;) ~= 3 then
            CastSpellByName(GetSpellInfo(34477),member)
        end
    end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Pause--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if not UnitBuffID(&amp;quot;player&amp;quot;, &amp;quot;5384&amp;quot;) 
or not IsMounted() then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Intimidation</Name><Default>false</Default><SpellID>19577</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(19577) then return false end

if IsLeftShiftKeyDown() then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Wyvern Sting</Name><Default>false</Default><SpellID>19386</SpellID><Actions></Actions><Lua>if not IsPlayerSpell(19386) then return false end

if UnitExists(&amp;quot;Mouseover&amp;quot;)
and UnitCanAttack(&amp;quot;player&amp;quot;, &amp;quot;Mouseover&amp;quot;) 
then return true end</Lua><RecastDelay>1000</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></HUNTER>