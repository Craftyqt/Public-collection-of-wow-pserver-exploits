local gotloot = GetNumLootItems()
local race = { "Dwarf", "Draenei", "Fossil", "Night Elf", "Nerubian", "Orc", "Tol'vir", "Troll", "Vrykul" }

if GetUnitSpeed("player") == 0  
and not UnitCastingInfo("player") 
and gotloot == 0
then 
  for _,v in ipairs(race) do InteractUnit(v.." Archaeology Find") end 
  if GetSpellCooldown(80451) == 0 then CastSpellByID(80451) end 
end

if gotloot > 0 then for i = 1,gotloot do LootSlot(i) end end
