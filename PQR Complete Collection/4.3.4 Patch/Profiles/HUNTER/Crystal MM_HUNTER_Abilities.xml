<?xml version="1.0" encoding="utf-8" ?><HUNTER><Ability><Name>--Extra Action--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Avoid sudden death on Ultraxion
local fadingtime = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,110070))
if fadingtime and fadingtime - GetTime() &amp;lt; 1.3 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end 

-- Avoid Hour of Twilight on Ultraxion, Delete next 3 lines if you are working as tank
local channelSpell, _, _, _, _, endTime = UnitCastingInfo(&amp;quot;boss1&amp;quot;)
if channelSpell == GetSpellInfo(109417) and endTime/1000 - GetTime() &amp;lt; 1.3 
then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end

-- Avoid sudden death on Madness (kickmydog)
local tentacledeath = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,109597))
if tentacledeath and tentacledeath - GetTime() &amp;lt; 1 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel></Ability><Ability><Name>--Initialize--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if ctInit == nil then
	ctInit = true
	function PQ_SwitchToHawk()
		if UnitBuffID(&amp;quot;player&amp;quot;, 13165) == nil then
			CastSpellByID(13165, &amp;quot;player&amp;quot;)
		end
	end
	
	function PQ_SwitchToFox()
		local FoxBuff = UnitBuffID(&amp;quot;player&amp;quot;, 82661)
		if PQR_IsMoving(1) == true and FoxBuff == nil and UnitExists(&amp;quot;target&amp;quot;) then
			CastSpellByID(82661, &amp;quot;player&amp;quot;)
		end
	end
	
	function PQ_HealthPercent(pq_health)
	 pq_health = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>--Pause--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if IsLeftAltKeyDown()
or IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,77769)
or UnitBuffID(&amp;quot;player&amp;quot;,5384)
or UnitInVehicle(&amp;quot;player&amp;quot;)
or UnitIsDead(&amp;quot;target&amp;quot;) 
or UnitIsDead(&amp;quot;player&amp;quot;)
or UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>--Timer--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if TTD_loaded == nil and UnitAffectingCombat(&amp;quot;player&amp;quot;) ~= nil then
	PQ_TimeA = GetTime()
	PQ_LifeStart = UnitHealth(&amp;quot;target&amp;quot;)
	PQ_LifeMax = UnitHealthMax(&amp;quot;target&amp;quot;)
	TTD_loaded = 1
elseif TTD_loaded == 1 and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil then
	PQ_TimeA = nil
	PQ_LifeStart = nil
	PQ_LifeMax = nil
	TTD_loaded = nil
	PQ_CalcTime = 31
end

if TTD_loaded then
	PQ_TimeDiff = GetTime() - PQ_TimeA
	PQ_HPDiff = PQ_LifeStart - UnitHealth(&amp;quot;target&amp;quot;)

	if PQ_HPDiff &amp;gt; 0 then
		PQ_FullTime = (PQ_TimeDiff * PQ_LifeMax)/PQ_HPDiff
		PQ_PastFullTime = (PQ_LifeMax - PQ_LifeMax) * PQ_TimeDiff/ PQ_HPDiff
		PQ_CalcTime = PQ_TimeA - PQ_PastFullTime + PQ_FullTime - GetTime()
	end
end

if PQ_CalcTime &amp;gt;= 21 then
	ALLHM = 1
else
	ALLHM = nil
end

if PQ_CalcTime &amp;gt;= 10 then
	SVSERPENT = 1
else
	SVSERPENT = nil
end

if PQ_CalcTime &amp;gt;= 8 then
	SVBLACKARROW = 1
else
	SVBLACKARROW = nil
end</Lua><RecastDelay>1000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>CD - Misdirection</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local InParty = GetNumPartyMembers()

if IsLeftControlKeyDown() then return false end

if InParty &amp;gt; 0 and UnitInRaid(&amp;quot;player&amp;quot;) == nil then
	for i = 1, InParty, 1 do
	local member = &amp;quot;party&amp;quot;..tostring(i)
		if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot; and UnitThreatSituation(member,&amp;quot;target&amp;quot;) ~= 3 then
			CastSpellByID(&amp;quot;34477&amp;quot;)
			SpellTargetUnit(member)
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>Mark - Hunter&amp;apos;s</Name><Default>false</Default><SpellID>1130</SpellID><Actions></Actions><Lua>if IsLeftControlKeyDown() then return false end
if UnitDebuffID(&amp;quot;target&amp;quot;, 1130) == nil and UnitAffectingCombat(&amp;quot;player&amp;quot;) == nil then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>Shot - Steady</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>return true</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>Shot - Serpent Sting</Name><Default>false</Default><SpellID>1978</SpellID><Actions>/Cast !Auto Shot</Actions><Lua>PQ_SwitchToHawk()

if IsLeftControlKeyDown() then return false end

if UnitDebuffID(&amp;quot;target&amp;quot;, 1978, &amp;quot;PLAYER&amp;quot;) == nil and PQ_HealthPercent() &amp;lt;= 90 then return true end</Lua><RecastDelay>200</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability><Ability><Name>Shot - Chimera</Name><Default>false</Default><SpellID>53209</SpellID><Actions>/cast !Auto Shot|/cast Rabid</Actions><Lua>local unithp = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)

if unithp &amp;lt;= 90 then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel></Ability></HUNTER>