<?xml version="1.0" encoding="utf-8" ?><HUNTER><Ability><Name>Mark - Hunter</Name><Default>false</Default><SpellID>1130</SpellID><Actions></Actions><Lua>if EnemyExists then
	if not lCtrl then
		if not UnitDebuffID(&amp;quot;target&amp;quot;, 1130) and PlayerHP &amp;lt;= EnemyHP then
			return true
		end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Calcs/Functions--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Player Info
PlayerFocus			= UnitPower(&amp;quot;player&amp;quot;)
PlayerHP			= 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)
PlayerCombat		= UnitAffectingCombat(&amp;quot;player&amp;quot;)
PlayerThreat		= UnitThreatSituation(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
PlayerLevel			= UnitLevel(&amp;quot;player&amp;quot;)
PlayerPet			= UnitExists(&amp;quot;pet&amp;quot;)
PlayerPetHP			= UnitHealth(&amp;quot;pet&amp;quot;)

--PQR Functions
isMoving			= PQR_IsMoving()

--Key Mods
lShift				= IsLeftShiftKeyDown()
lCtrl				= IsLeftControlKeyDown()
lAlt				= IsLeftAltKeyDown()
rShift				= IsRightShiftKeyDown()
rCtrl				= IsRightControlKeyDown()
rAlt				= IsRightAltKeyDown()

local hasTarget		= UnitExists(&amp;quot;target&amp;quot;)

if hasTarget then
	--Target Info
	EnemyHP				= 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)
	EnemyLevel			= UnitLevel(&amp;quot;target&amp;quot;)
	EnemyExists			= UnitExists(&amp;quot;target&amp;quot;)
	InteractRange		= CheckInteractDistance(&amp;quot;target&amp;quot;, 3)
	EnemyID				= tonumber(UnitGUID(&amp;quot;target&amp;quot;):sub(-13, -9), 16)
	
	if EnemyLevel &amp;gt;= (PlayerLevel + 2) or EnemyLevel == -1 then
		IsBossLVL = 1
	else
		IsBossLVL = nil
	end
end

if ctInit == nil then
	ctInit = true
	--code by xelper
	function PQ_SwitchToHawk()
		if UnitBuffID(&amp;quot;player&amp;quot;, 13165) == nil and UnitIsDead(&amp;quot;player&amp;quot;) == nil and UnitBuffID(&amp;quot;player&amp;quot;, 5384) == nil then
			CastSpellByID(13165, &amp;quot;player&amp;quot;)
		end
	end
	
	function PQ_SwitchToFox()
		local FoxBuff = UnitBuffID(&amp;quot;player&amp;quot;, 82661)
		if PQR_IsMoving(1) == true and FoxBuff == nil and UnitExists(&amp;quot;target&amp;quot;)and UnitIsDead(&amp;quot;player&amp;quot;) == nil and UnitBuffID(&amp;quot;player&amp;quot;, 5384) == nil then
			CastSpellByID(82661, &amp;quot;player&amp;quot;)
		end
	end
	--end code by xelper
	
	-- Code provided by Sheuron
	function HaveBuff(UnitID,SpellID,TimeLeft,Filter) 
  		if not TimeLeft then TimeLeft = 0 end
  		if type(SpellID) == &amp;quot;number&amp;quot; then SpellID = { SpellID } end 
 		for i=1,#SpellID do 
    		local spell, rank = GetSpellInfo(SpellID[i])
    			if spell then
     				local buff = select(7,UnitBuff(UnitID,spell,rank,Filter)) 
      				if buff and ( buff == 0 or buff - GetTime() &amp;gt; TimeLeft ) then return true end
    			end
  		end
	end

	function HaveDebuff(UnitID,SpellID,TimeLeft,Filter) 
  		if not TimeLeft then TimeLeft = 0 end
  		if type(SpellID) == &amp;quot;number&amp;quot; then SpellID = { SpellID } end 
  		for i=1,#SpellID do 
    		local spell, rank = GetSpellInfo(SpellID[i])
    		if spell then
      			local debuff = select(7,UnitDebuff(UnitID,spell,rank,Filter)) 
     			if debuff and ( debuff == 0 or debuff - GetTime() &amp;gt; TimeLeft ) then return true end
   			 end
 		 end
	end
--end code by sheuron
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Pause--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if lAlt
or IsMounted()
or SpellIsTargeting()
or UnitBuffID(&amp;quot;player&amp;quot;,80169)
or UnitBuffID(&amp;quot;player&amp;quot;,77769)
or UnitBuffID(&amp;quot;player&amp;quot;,5384)
or UnitInVehicle(&amp;quot;player&amp;quot;)
or UnitIsDead(&amp;quot;target&amp;quot;) 
or UnitIsDead(&amp;quot;player&amp;quot;)
or not PlayerCombat then
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spec - Focus Fire</Name><Default>false</Default><SpellID>82692</SpellID><Actions></Actions><Lua>if EnemyExists and PlayerCombat then
	fStack = select(4, UnitBuffID( &amp;quot;pet&amp;quot;, 19615 ) )
	if fStack == 5 and PQR_SpellAvailable(82692) then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sting - Serpent</Name><Default>false</Default><SpellID>1978</SpellID><Actions>/cast !auto shot|/cast Rabid</Actions><Lua>if EnemyExists and PlayerCombat then
	if not lCtrl then
		PQ_SwitchToHawk()
		if not HaveDebuff(&amp;quot;target&amp;quot;, 1978, 2, &amp;quot;PLAYER&amp;quot;) then return true end
	end
end</Lua><RecastDelay>200</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Racials--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if PlayerCombat and EnemyExists then

  -- Arcane Torrent (Blood Elf)(Hunter)
  if IsSpellKnown(80483) and GetSpellCooldown(80483) == 0 
  and PlayerFocus &amp;lt; 35 
  then CastSpellByID(80483) return true end
  
  -- Berserking (Troll)(All Classes)
  if IsSpellKnown(26297) and GetSpellCooldown(26297) == 0 
  then CastSpellByID(26297) return true end

  -- Blood Fury (Orc) (Hunter)
  if IsSpellKnown(20572) and GetSpellCooldown(20572) == 0 
  then CastSpellByID(20572) return true end

  -- Will of the Forsaken (Undead)
  if not GotFear then
    function GotFear(t) 
      local debuff = { 10326, 8122, 2094, 5782, 5484, 6358, 5246 }
      for i=1, #debuff do if UnitDebuffID(t,debuff[i]) then return true end end
    end
  end
  if IsSpellKnown(7744) and GetSpellCooldown(7744) == 0 and GotFear(&amp;quot;player&amp;quot;) 
  then CastSpellByID(7744) return true end

  -- Rocket Barrage (Goblin)
  if IsSpellKnown(69041) and GetSpellCooldown(69041) == 0 
  and IsSpellInRange(GetSpellInfo(69041),&amp;quot;target&amp;quot;) == 1 and UnitCanAttack(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;) 
  then CastSpellByID(69041) return true end

  -- Stoneform (Dwarf)
  if not GotPoison then
    function GotPoison(t)
      local i, debuff = 1, select(5,UnitDebuff(t, 1)) 
      while debuff do
        if debuff == &amp;quot;Poison&amp;quot; or debuff == &amp;quot;Disease&amp;quot; then return true end
        i = i + 1 debuff = select(5,UnitDebuff(t, i)) 
      end
    end
  end
  if IsSpellKnown(20594) and GetSpellCooldown(20594) == 0 and GotPoison(&amp;quot;player&amp;quot;) 
  then CastSpellByID(20594) return true end

  -- Escape Artist (Gnome)
  if not CantMove then
    function CantMove(t) 
      local debuff = { 122, 53754, 1715, 12323, 3775, 339, 48483, 8056, 2974, 45524 }
      for i=1, #debuff do if UnitDebuffID(t,debuff[i]) then return true end end
    end
  end
  if IsSpellKnown(20589) and GetSpellCooldown(20589) == 0 and CantMove(&amp;quot;player&amp;quot;) 
  then CastSpellByID(20589) return true end

  -- Every Man for Himself (Human)
  if not LostControl then
    function LostControl(t) 
      local debuff = { 122, 10326, 8122, 2094, 5782, 5484, 6358, 5246, 408 }
      for i=1, #debuff do if UnitDebuffID(t,debuff[i]) then return true end end
    end
  end
  if IsSpellKnown(59752) and GetSpellCooldown(59752) == 0 and LostControl(&amp;quot;player&amp;quot;) 
  then CastSpellByID(59752) return true end

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spec - Bestial Wrath</Name><Default>false</Default><SpellID>19574</SpellID><Actions>/use 13|/use 14</Actions><Lua>if PlayerCombat and PQR_SpellAvailable(19574) then
	if lShift and PlayerFocus &amp;gt; 60 then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>AoE - MutliShot</Name><Default>false</Default><SpellID>2643</SpellID><Actions></Actions><Lua>if EnemyExists and PlayerCombat then
	PQ_SwitchToHawk()
	if lCtrl then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shot - Kill</Name><Default>false</Default><SpellID>53351</SpellID><Actions>/cast !auto shot|/cast Rabid</Actions><Lua>if EnemyExists and PlayerCombat then
	PQ_SwitchToHawk()
	if EnemyHP &amp;lt;= 20 and PQR_SpellAvailable(53351) then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>CD - Rapid Fire</Name><Default>false</Default><SpellID>3045</SpellID><Actions>/cast call of the wild|/cast Roar of Recovery|/cast Potion of the Tol&amp;apos;vir</Actions><Lua>local bwstart, bwdur = GetSpellCooldown(19574)

if EnemyExists and PlayerCombat then
	if UnitBuffID(&amp;quot;player&amp;quot;, 34692) ~= nil then return false end
	if bwstart &amp;gt; 0 and bwdur &amp;gt; 0 and lShift then return true end
	if rAlt then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shot - Kill Command</Name><Default>false</Default><SpellID>34026</SpellID><Actions>/cast !auto shot|/cast Rabid</Actions><Lua>if EnemyExists and PlayerCombat then
	if not lCtrl then
		PQ_SwitchToHawk()
		if PlayerPetHP &amp;gt; 1
		and PlayerPet
		and PQR_SpellAvailable(34026) 
		and IsSpellInRange(tostring(GetSpellInfo(2649)), &amp;quot;pettarget&amp;quot;) == 1 then return true end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Spec - Fervor</Name><Default>false</Default><SpellID>82726</SpellID><Actions></Actions><Lua>if EnemyExists and PlayerCombat then
	if PQR_SpellAvailable(82726) and PlayerFocus &amp;lt; 37 then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shot - Arcane</Name><Default>false</Default><SpellID>3044</SpellID><Actions>/cast !auto shot|/cast Rabid</Actions><Lua>if EnemyExists and PlayerCombat then
	if not lCtrl then
		PQ_SwitchToFox()
		if PlayerFocus &amp;gt; 59 or UnitBuffID(&amp;quot;player&amp;quot;, 34692) then return true end
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shot - Cobra</Name><Default>false</Default><SpellID>77767</SpellID><Actions>/cast !auto shot|/cast Rabid</Actions><Lua>if EnemyExists and PlayerCombat then
	PQ_SwitchToFox()
	return true
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Extra Action--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Code provided by Sheuron
-- Avoid sudden death on Ultraxion
local fadingtime = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,110070))
if fadingtime and fadingtime - GetTime() &amp;lt; 1.3 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end 

-- Code provided by Kickmydog
-- Avoid Hour of Twilight on Ultraxion, deterrence to cancel use.
if not UnitBuffID(&amp;quot;player&amp;quot;,19263) then
	local HourOfTwilight,_,_,_,_,endTime = UnitCastingInfo(&amp;quot;boss1&amp;quot;)
	if HourOfTwilight == GetSpellInfo(109417) and endTime/1000 - GetTime() &amp;lt;= 1.3 then
		RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;)
	end
end

-- Code provided by Kickmydog
-- Avoid Fragmentation on Madness
local tentacledeath = select(7,UnitDebuffID(&amp;quot;player&amp;quot;,109597))
if tentacledeath and tentacledeath - GetTime() &amp;lt; 0.7 then RunMacroText(&amp;quot;/click ExtraActionButton1&amp;quot;) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>True</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Item - Gloves</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if GetInventoryItemCooldown(&amp;quot;player&amp;quot;,10) == 0 and PlayerCombat then 
	UseInventoryItem(10)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shot - Misdirection</Name><Default>false</Default><SpellID>34477</SpellID><Actions></Actions><Lua>--Code provided by Sheuron
local InParty = GetNumPartyMembers()
if InParty &amp;gt; 0 and UnitInRaid(&amp;quot;player&amp;quot;) == nil then
	for i = 1, InParty, 1 do
		local member = &amp;quot;party&amp;quot;..tostring(i)
		if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot;
		and UnitThreatSituation(member,&amp;quot;target&amp;quot;) ~= 3
		and PQR_SpellAvailable(34477) then
			CastSpellByName(&amp;quot;Misdirection&amp;quot;)
    		SpellTargetUnit(member)
    	end
    end
end</Lua><RecastDelay>500</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>--Lightwell--</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>--Code provided by Xelper
local LightwellName = &amp;quot;Lightwell&amp;quot;
local sLightwell = UnitBuffID(&amp;quot;player&amp;quot;, 7001)
local sDeepCorruption = UnitDebuffID(&amp;quot;player&amp;quot;, 108220)
if PQR_LightwellTimeout == nil then
    PQR_LightwellTimeout = 0
end

if PlayerHP &amp;lt; 70 and sLightwell == nil then
    if PQR_LightwellTimeout &amp;lt; GetTime() then
        if sDeepCorruption == nil then
            PQR_LightwellTimeout = GetTime() + 1
            InteractUnit(LightwellName)
        end
    end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Shot - Tranquilizing</Name><Default>false</Default><SpellID>19801</SpellID><Actions></Actions><Lua>-- Code provided by Sheuron
local i = 1
local buff,_,_,_,bufftype = UnitBuff(&amp;quot;target&amp;quot;, i)
while buff do
  if bufftype == &amp;quot;Magic&amp;quot; or buff == &amp;quot;Enrage&amp;quot; then
    return true
  end
  i = i + 1;
  buff,_,_,_,bufftype = UnitBuff(&amp;quot;target&amp;quot;, i)
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Item - Trinket 1</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Code provided by Sheuron
if EnemyExists and PlayerCombat then
	if GetInventoryItemCooldown(&amp;quot;player&amp;quot;,13) == 0 then
		UseInventoryItem(13)
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Item - Trinket 2</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Code provided by Sheuron
local _,cd,havecd = GetInventoryItemCooldown(&amp;quot;player&amp;quot;,14)
if EnemyExists and PlayerCombat then
	if cd == 0 and havecd == 1 and not UnitChannelInfo(&amp;quot;player&amp;quot;) then 
		UseInventoryItem(14) 
		return true
	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Sting - Widow Venom</Name><Default>false</Default><SpellID>82654</SpellID><Actions></Actions><Lua>if EnemyExists and PlayerCombat then
		if not HaveDebuff(&amp;quot;target&amp;quot;,{12294, 82654, 54680, 13219}, 5) then return true end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Trap - Launcher</Name><Default>false</Default><SpellID>77769</SpellID><Actions></Actions><Lua>if rCtrl and not UnitBuffID(&amp;quot;player&amp;quot;, 77769) then
	return true
elseif rShift and not UnitBuffID(&amp;quot;player&amp;quot;, 77769) then
	return true
end</Lua><RecastDelay>10000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Trap - Freezing</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if rShift and GetCurrentKeyBoardFocus() == nil then
	CastSpellByName(tostring(GetSpellInfo(1499)))
	if SpellIsTargeting() then 
		CameraOrSelectOrMoveStart()
		CameraOrSelectOrMoveStop()
	end
	return true
end</Lua><RecastDelay>10000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Trap - Explosive</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if rCtrl and GetCurrentKeyBoardFocus() == nil then
	CastSpellByName(tostring(GetSpellInfo(13813)))
	if SpellIsTargeting() then 
		CameraOrSelectOrMoveStart()
		CameraOrSelectOrMoveStop()
	end
	return true
end</Lua><RecastDelay>10000</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Strike - Raptor</Name><Default>false</Default><SpellID>2973</SpellID><Actions></Actions><Lua>if EnemyExists and PlayerCombat then
	if not lCtrl and PQR_SpellAvailable(2973) then
 		if IsSpellInRange(tostring(GetSpellInfo(56641))) == 0 then return true end
 	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Strike - Wing Clip</Name><Default>false</Default><SpellID>2974</SpellID><Actions></Actions><Lua>if EnemyExists and PlayerCombat then
	if not lCtrl and not PQR_SpellAvailable(2973) then
 		if IsSpellInRange(tostring(GetSpellInfo(56641))) == 0 then return true end
 	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability><Ability><Name>Pet - Mend Pet</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;pet&amp;quot;) 
and UnitIsDead(&amp;quot;pet&amp;quot;) == nil 
and PQR_IsOutOfSight(&amp;quot;pet&amp;quot;) == false
and 100 * UnitHealth(&amp;quot;pet&amp;quot;) / UnitHealthMax(&amp;quot;pet&amp;quot;) &amp;lt; 90 
and UnitBuffID(&amp;quot;pet&amp;quot;,136) == nil 
then CastSpellByID(136, &amp;quot;pet&amp;quot;) end</Lua><RecastDelay>500</RecastDelay><Target>Pet</Target><CancelChannel>False</CancelChannel><SkipUnknown>True</SkipUnknown></Ability></HUNTER>