<?xml version="1.0" encoding="utf-8" ?><DRUID><Ability><Name>Resto: Verjüngung</Name><Default>false</Default><SpellID>48441</SpellID><Actions></Actions><Lua>if UnitBuffID(PQR_CustomTarget, 48441, &amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Blühendes Leben</Name><Default>false</Default><SpellID>48451</SpellID><Actions></Actions><Lua>lb,_,_,count,_,_,expire = UnitBuffID(PQR_CustomTarget, 48451)

if count ~= 3
or expire - GetTime() &amp;lt; 3
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Target</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;) 
  and UnitIsDead(&amp;quot;target&amp;quot;) == nil
  and UnitIsFriend(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;) 
  and UnitCanCooperate(&amp;quot;player&amp;quot;,&amp;quot;target&amp;quot;)
  and UnitHasVehicleUI(&amp;quot;target&amp;quot;) == false
  and UnitDebuffID(&amp;quot;target&amp;quot;, 69065) == nil
  and UnitDebuffID(&amp;quot;target&amp;quot;, 70157) == nil
  then PQR_CustomTarget = &amp;quot;target&amp;quot;
          PQR_CustomTargetHP = 100 * UnitHealth(&amp;quot;target&amp;quot;) / UnitHealthMax(&amp;quot;target&amp;quot;)
else 

PQR_CustomTarget = &amp;quot;player&amp;quot;
PQR_CustomTargetHP = 100 * UnitHealth(&amp;quot;player&amp;quot;) / UnitHealthMax(&amp;quot;player&amp;quot;)
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()
lowhpmembers = 0
local lowest = 100

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
  local memberhp = 100 * UnitHealth(member) / UnitHealthMax(member)
  if UnitInRange(member) 
  and UnitIsFriend(&amp;quot;player&amp;quot;, member)
  and UnitIsDeadOrGhost(member) == nil  then
    if UnitGroupRolesAssigned(member) == &amp;quot;TANK&amp;quot; then memberhp = memberhp - 1 end
    if UnitThreatSituation(member) == 3 then memberhp = memberhp - 3 end
    if UnitBuffID(member, 53563) ~= nil then memberhp = memberhp + 7 end
    if memberhp &amp;lt; 85 then lowhpmembers = lowhpmembers +1 end
    if memberhp &amp;lt; lowest then
      PQR_CustomTarget = member
      lowest = memberhp
      PQR_CustomTargetHP = 100 * UnitHealth(PQR_CustomTarget) / UnitHealthMax(PQR_CustomTarget)
    end
  end
end

end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Nachwachsen</Name><Default>false</Default><SpellID>48443</SpellID><Actions></Actions><Lua>nw,_,_,_,_,_,expire = UnitBuffID(PQR_CustomTarget, 48443)

if PQR_CustomTargetHP &amp;lt; 70
and (nw == nil or expire - GetTime() &amp;lt; 1.5)
and PQR_IsCastingSpell(48443) == false
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Start Fight --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if StopRota
or UnitIsDeadOrGhost(&amp;quot;player&amp;quot;)
or IsMounted()
or UnitChannelInfo(&amp;quot;player&amp;quot;) ~= nil
or UnitCastingInfo(&amp;quot;player&amp;quot;) ~= nil
or UnitBuff(&amp;quot;player&amp;quot;, &amp;quot;Essen&amp;quot;)
or UnitBuff(&amp;quot;player&amp;quot;, &amp;quot;Trinken&amp;quot;)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Hotkeys --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>-- Pause the rotation
if not leftkeydown then leftkeydown = 0 end
if IsLeftControlKeyDown()  and GetTime() - leftkeydown &amp;gt; 1 then
	leftkeydown = GetTime()
  	if StopRota  then 
    		StopRota  = false 
		print(&amp;quot;Rotation reenabled!&amp;quot;)
  	else 
		StopRota  = true 
		print(&amp;quot;Rotation stopped!&amp;quot;)
  	end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Rasche Heilung</Name><Default>false</Default><SpellID>18562</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 60
and (UnitBuffID(PQR_CustomTarget, 48441) or UnitBuffID(PQR_CustomTarget, 48443))
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Pflege</Name><Default>false</Default><SpellID>50464</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 70
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Mouseover Skill</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>if UnitAffectingCombat(&amp;quot;player&amp;quot;) and IsMouseButtonDown()
    then RunMacroText(&amp;quot;/click &amp;quot;..GetMouseFocus():GetName()) end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Wildwuchs</Name><Default>false</Default><SpellID>53251</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 90
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Fluch aufheben</Name><Default>false</Default><SpellID>2782</SpellID><Actions></Actions><Lua>local buff = { }
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()
if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 0, members, 1 do
  if i==0 then mem = &amp;quot;player&amp;quot; else mem = group..tostring(i) end
  if UnitInRange(mem) and UnitIsDeadOrGhost(mem) == nil then
   local candispel = 1
   for k,v in ipairs(buff) do
    if UnitDebuffID(mem,v) then candispel = nil end
   end
   local j = 1
   local debuff,_,_,count,bufftype,dur = UnitDebuff(mem, j)
   while debuff do
    if (bufftype == &amp;quot;Curse&amp;quot;) and dur &amp;gt; 1 and candispel then
     CastSpellByID(2782,mem)
     return true
    end
    j = j + 1;
    debuff,_,_,count,bufftype,duration = UnitDebuff(mem, j)
    end
  end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Vergiftung aufheben</Name><Default>false</Default><SpellID>2893</SpellID><Actions></Actions><Lua>local buff = { }
local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()
if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 0, members, 1 do
  if i==0 then mem = &amp;quot;player&amp;quot; else mem = group..tostring(i) end
  if UnitInRange(mem) and UnitIsDeadOrGhost(mem) == nil then
   local candispel = 1
   for k,v in ipairs(buff) do
    if UnitDebuffID(mem,v) then candispel = nil end
   end
   local j = 1
   local debuff,_,_,count,bufftype,dur = UnitDebuff(mem, j)
   while debuff do
    if (bufftype == &amp;quot;Poison&amp;quot;) and dur &amp;gt; 1 and candispel and UnitBuffID(mem, 2893) == nil then
     CastSpellByID(2893,mem)
     return true
    end
    j = j + 1;
    debuff,_,_,count,bufftype,duration = UnitDebuff(mem, j)
    end
  end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Baum des Lebens</Name><Default>false</Default><SpellID>33891</SpellID><Actions></Actions><Lua>if IsShiftKeyDown()
and UnitBuffID(&amp;quot;player&amp;quot;, 33891) == nil
and UnitChannelInfo(&amp;quot;player&amp;quot;) == nil
and UnitCastingInfo(&amp;quot;player&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Baumrinde</Name><Default>false</Default><SpellID>22812</SpellID><Actions></Actions><Lua>if checkHP(&amp;quot;player&amp;quot;, 50)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>-- Functions --</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>function checkMana(percent)
    local mana = UnitPower(&amp;quot;player&amp;quot;) / UnitPowerMax(&amp;quot;player&amp;quot;) * 100
    if mana &amp;lt; percent then return true else return false end
end

function checkHP(unit, percent)
    local hp = UnitHealth(unit) / UnitHealthMax(unit) * 100
    if hp &amp;lt; percent then return true else return false end
end

function checkSpell(spell, target)
    local Cast = true;
    local SpellName = GetSpellInfo(spell)
    if UnitExists(target) == nil
    or UnitIsDeadOrGhost(target)
    --or UnitCanCooperate(&amp;quot;player&amp;quot;, target) == nil
    or IsSpellInRange(SpellName, target) == 0
    or UnitChannelInfo(&amp;quot;player&amp;quot;) ~= nil
    or UnitCastingInfo(&amp;quot;player&amp;quot;) ~= nil
    then Cast = false end
    return Cast
end

function checkAggro(unit)
    if UnitThreatSituation(unit) == 3 then return true else return false end
end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Wucherwurzeln</Name><Default>false</Default><SpellID>53308</SpellID><Actions></Actions><Lua>if IsLeftShiftKeyDown( ) and GetCurrentKeyBoardFocus() == nil then
    if UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) and UnitIsDead(&amp;quot;mouseover&amp;quot;) == nil then
        return true
    end
end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Wirbelsturm</Name><Default>false</Default><SpellID>33786</SpellID><Actions></Actions><Lua>if IsLeftAltKeyDown( ) and GetCurrentKeyBoardFocus() == nil then
    if UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;mouseover&amp;quot;) and UnitIsDead(&amp;quot;mouseover&amp;quot;) == nil then
        return true
    end
end</Lua><RecastDelay>0</RecastDelay><Target>Mouseover</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Verjüngung (Alle)</Name><Default>false</Default><SpellID>0</SpellID><Actions></Actions><Lua>local group = &amp;quot;party&amp;quot;
local members = GetNumPartyMembers()

if UnitBuffID(&amp;quot;player&amp;quot;, 48441, &amp;quot;player&amp;quot;) == nil
    then CastSpellByID(48441, &amp;quot;player&amp;quot;) end

if GetNumRaidMembers() &amp;gt; 0 then
  group = &amp;quot;raid&amp;quot;
  members = GetNumRaidMembers()
end

for i = 1, members, 1 do
  local member = group..tostring(i)
    if UnitBuffID(member, 48441, &amp;quot;player&amp;quot;) == nil
    and UnitInRange(member)
    and UnitIsFriend(&amp;quot;player&amp;quot;, member)
    and UnitIsDeadOrGhost(member) == nil 
    and UnitHasVehicleUI(member) == false
    and UnitDebuffID(member, 69065) == nil
    and UnitDebuffID(member, 70157) == nil
    then
        CastSpellByID(48441, member)
   end
end</Lua><RecastDelay>0</RecastDelay><Target>Custom</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Schnelligkeit der Natur</Name><Default>false</Default><SpellID>17116</SpellID><Actions></Actions><Lua>if PQR_CustomTargetHP &amp;lt; 30
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Anregen</Name><Default>false</Default><SpellID>29166</SpellID><Actions></Actions><Lua>if checkMana(40)
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Mal der Wildnis (Player)</Name><Default>false</Default><SpellID>48469</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;,48469) == nil
and UnitBuffID(&amp;quot;player&amp;quot;, 48470) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Griff der Natur</Name><Default>false</Default><SpellID>53312</SpellID><Actions></Actions><Lua>if UnitExists(&amp;quot;target&amp;quot;)
and CheckInteractDistance(&amp;quot;target&amp;quot;,3) == 1
and UnitIsEnemy(&amp;quot;player&amp;quot;, &amp;quot;target&amp;quot;)
and UnitIsDead(&amp;quot;target&amp;quot;) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Feenfeuer</Name><Default>false</Default><SpellID>770</SpellID><Actions></Actions><Lua>_,class,_ = UnitClass(&amp;quot;target&amp;quot;);

if class == &amp;quot;ROGUE&amp;quot;
and checkSpell(770, &amp;quot;target&amp;quot;)
and UnitDebuffID(&amp;quot;target&amp;quot;, 770) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>All: Dornen (Player)</Name><Default>false</Default><SpellID>53307</SpellID><Actions></Actions><Lua>if UnitBuffID(&amp;quot;player&amp;quot;, 53307) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Player</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability><Ability><Name>Resto: Mondfeuer</Name><Default>false</Default><SpellID>48463</SpellID><Actions></Actions><Lua>if checkSpell(48463, &amp;quot;target&amp;quot;)
and UnitDebuffID(&amp;quot;target&amp;quot;, 48463) == nil
then return true end</Lua><RecastDelay>0</RecastDelay><Target>Target</Target><CancelChannel>False</CancelChannel><LuaBefore></LuaBefore><LuaAfter></LuaAfter></Ability></DRUID>